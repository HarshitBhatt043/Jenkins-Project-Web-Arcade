!function(e){function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"object"===("undefined"==typeof exports?"undefined":r(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).iampakopako=e()}((function(){return function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);throw(u=new Error("Cannot find module '"+s+"'")).code="MODULE_NOT_FOUND",u}u=r[s]={exports:{}},t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t,n,i=Array.prototype.slice.call(arguments,1);i.length;){var a=i.shift();if(a){if("object"!==r(a))throw new TypeError(a+"must be non-object");for(var s in a)t=a,n=s,Object.prototype.hasOwnProperty.call(t,n)&&(e[s]=a[s])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){for(var t,r,n,i=0,a=0,s=e.length;a<s;a++)i+=e[a].length;for(n=new Uint8Array(i),a=t=0,s=e.length;a<s;a++)r=e[a],n.set(r,t),t+=r.length;return n}},s={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)},{}],2:[function(e,t,r){"use strict";var n=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function u(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){for(var t,r,i,a,s=e.length,o=0,u=0;u<s;u++)55296==(64512&(r=e.charCodeAt(u)))&&u+1<s&&56320==(64512&(i=e.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(i-56320),u++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(o),u=a=0;a<o;u++)55296==(64512&(r=e.charCodeAt(u)))&&u+1<s&&56320==(64512&(i=e.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(i-56320),u++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t},r.buf2binstring=function(e){return u(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){for(var r,n,i=t||e.length,a=new Array(2*i),o=0,c=0;c<i;)if((r=e[c++])<128)a[o++]=r;else if(4<(n=s[r]))a[o++]=65533,c+=n-1;else{for(r&=2===n?31:3===n?15:7;1<n&&c<i;)r=r<<6|63&e[c++],n--;1<n?a[o++]=65533:r<65536?a[o++]=r:(r-=65536,a[o++]=55296|r>>10&1023,a[o++]=56320|1023&r)}return u(a,o)},r.utf8border=function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+s[e[r]]>t?r:t}},{"./common":1}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;a=a+(i=i+t[n++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16|0}},{}],4:[function(e,t,r){"use strict";var n=function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();t.exports=function(e,t,r,i){var a=n,s=i+r;e^=-1;for(var o=i;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},{}],5:[function(e,t,r){"use strict";var n,i=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),c=-2,d=258,l=262,f=113;function h(e,t){return e.msg=u[t],t}function g(e){return(e<<1)-(4<e?9:0)}function p(e){for(var t=e.length;0<=--t;)e[t]=0}function _(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function v(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_(e.strm)}function m(e,t){e.pending_buf[e.pending++]=t}function y(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function E(e,t){var r,n,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-l?e.strstart-(e.w_size-l):0,c=e.window,f=e.w_mask,h=e.prev,g=e.strstart+d,p=c[a+s-1],_=c[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]===_&&c[r+s-1]===p&&c[r]===c[a]&&c[++r]===c[a+1]){for(a+=2,r++;c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<g;);if(n=d-(g-a),a=g-d,s<n){if(e.match_start=t,o<=(s=n))break;p=c[a+s-1],_=c[a+s]}}}while((t=h[t&f])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function C(e){var t,r,n,a,u,c,d,f,h,g=e.w_size;do{if(h=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-l)){for(i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=r=e.hash_size;n=e.head[--t],e.head[t]=g<=n?n-g:0,--r;);for(t=r=g;n=e.prev[--t],e.prev[t]=g<=n?n-g:0,--r;);h+=g}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,d=e.strstart+e.lookahead,f=h,h=void 0,r=0===(h=f<(h=u.avail_in)?f:h)?0:(u.avail_in-=h,i.arraySet(c,u.input,u.next_in,h,d),1===u.state.wrap?u.adler=s(u.adler,c,h,d):2===u.state.wrap&&(u.adler=o(u.adler,c,h,d)),u.next_in+=h,u.total_in+=h,h),e.lookahead+=r,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+3-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<l&&0!==e.strm.avail_in)}function I(e,t){for(var r,n;;){if(e.lookahead<l){if(C(e),e.lookahead<l&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-l&&(e.match_length=E(e,r)),e.match_length>=3)if(n=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function b(e,t){for(var r,n,i;;){if(e.lookahead<l){if(C(e),e.lookahead<l&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-l&&(e.match_length=E(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,n=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=a._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function D(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),p(this.dyn_ltree),p(this.dyn_dtree),p(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),p(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),p(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):h(e,c)}function T(e){var t=A(e);return 0===t&&((e=e.state).window_size=2*e.w_size,p(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t}function k(e,t,r,n,a,s){if(!e)return c;var o=1;if(-1===t&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),a<1||9<a||8!==r||n<8||15<n||t<0||9<t||s<0||4<s)return h(e,c);8===n&&(n=9);var u=new w;return(e.state=u).strm=e,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=+u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,T(e)}n=[new D(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(C(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-l&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(v(e,!1),e.strm.avail_out),1)})),new D(4,4,8,4,I),new D(4,5,16,8,I),new D(4,6,32,32,I),new D(4,4,16,16,b),new D(8,16,32,32,b),new D(8,16,128,128,b),new D(8,32,128,256,b),new D(32,128,258,1024,b),new D(32,258,258,4096,b)],r.deflateInit=function(e,t){return k(e,t,8,15,8,0)},r.deflateInit2=k,r.deflateReset=T,r.deflateResetKeep=A,r.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,0):c},r.deflate=function(e,t){var r,i,s,u;if(!e||!e.state||5<t||t<0)return e?h(e,c):c;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return h(e,0===e.avail_out?-5:c);if(r.strm=e,l=r.last_flush,r.last_flush=t,42===r.status&&(2===r.wrap?(e.adler=0,m(r,31),m(r,139),m(r,8),r.gzhead?(m(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),m(r,255&r.gzhead.time),m(r,r.gzhead.time>>8&255),m(r,r.gzhead.time>>16&255),m(r,r.gzhead.time>>24&255),m(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),m(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(m(r,255&r.gzhead.extra.length),m(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=o(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(m(r,0),m(r,0),m(r,0),m(r,0),m(r,0),m(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),m(r,3),r.status=f)):(u=8+(r.w_bits-8<<4)<<8,u|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(u|=32),u+=31-u%31,r.status=f,y(r,u),0!==r.strstart&&(y(r,e.adler>>>16),y(r,65535&e.adler)),e.adler=1)),69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=o(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending!==r.pending_buf_size));)m(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=o(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=o(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}}while(s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,m(r,s),0!==s);r.gzhead.hcrc&&r.pending>i&&(e.adler=o(e.adler,r.pending_buf,r.pending-i,i)),0===s&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=o(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending===r.pending_buf_size)){s=1;break}}while(s=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,m(r,s),0!==s);r.gzhead.hcrc&&r.pending>i&&(e.adler=o(e.adler,r.pending_buf,r.pending-i,i)),0===s&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&_(e),r.pending+2<=r.pending_buf_size&&(m(r,255&e.adler),m(r,e.adler>>8&255),e.adler=0,r.status=f)):r.status=f),0!==r.pending){if(_(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(l)&&4!==t)return h(e,-5);if(666===r.status&&0!==e.avail_in)return h(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&666!==r.status){var l=2===r.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(C(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=d){if(C(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){for(s=e.strstart+d;n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s;);e.match_length=d-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(r,t):n[r.level].func(r,t);if(3!==l&&4!==l||(r.status=666),1===l||3===l)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===l&&(1===t?a._tr_align(r):5!==t&&(a._tr_stored_block(r,0,0,!1),3===t&&(p(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),_(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(m(r,255&e.adler),m(r,e.adler>>8&255),m(r,e.adler>>16&255),m(r,e.adler>>24&255),m(r,255&e.total_in),m(r,e.total_in>>8&255),m(r,e.total_in>>16&255),m(r,e.total_in>>24&255)):(y(r,e.adler>>>16),y(r,65535&e.adler)),_(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==f&&666!==t?h(e,c):(e.state=null,t===f?h(e,-3):0):c},r.deflateSetDictionary=function(e,t){var r,n,a,o,u,d,l,f=t.length;if(!e||!e.state)return c;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return c;for(1===o&&(e.adler=s(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(p(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new i.Buf8(r.w_size),i.arraySet(l,t,f-r.w_size,r.w_size,0),t=l,f=r.w_size),u=e.avail_in,d=e.next_in,l=e.input,e.avail_in=f,e.next_in=0,e.input=t,C(r);r.lookahead>=3;){for(n=r.strstart,a=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--a;);r.strstart=n,r.lookahead=2,C(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=d,e.input=l,e.avail_in=u,r.wrap=o,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(e,t,r){"use strict";var n=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var a=256,s=286,o=30,u=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);i(h);var g=new Array(60);i(g);var p=new Array(512);i(p);var _=new Array(256);i(_);var v=new Array(29);i(v);var m,y,E,C=new Array(o);function I(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?p[e]:p[256+(e>>>7)]}function w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function A(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function T(e,t,r){A(e,r[2*t],r[2*t+1])}function k(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function P(e,t,r){for(var n,i=new Array(16),a=0,s=1;s<=u;s++)i[s]=a=a+r[s-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=k(i[o]++,o))}}function S(e){for(var t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function U(e){8<e.bi_valid?w(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function x(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&O(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!O(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function R(e,t,r){var n,i,s,o,u=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0==n?T(e,i,t):(T(e,(s=_[i])+a+1,t),0!==(o=c[s])&&A(e,i-=v[s],o),T(e,s=D(--n),r),0!==(o=d[s])&&A(e,n-=C[s],o)),u<e.last_lit;);T(e,256,t)}function N(e,t){var r,n,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<c;r++)0!==a[2*r]?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=d,r=e.heap_len>>1;1<=r;r--)x(e,a,r);for(i=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],x(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,x(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){for(var r,n,i,a,s,o=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,l=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,g=t.stat_desc.max_length,p=0,_=0;_<=u;_++)e.bl_count[_]=0;for(o[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)g<(_=o[2*o[2*(n=e.heap[r])+1]+1]+1)&&(_=g,p++),o[2*n+1]=_,c<n||(e.bl_count[_]++,a=0,h<=n&&(a=f[n-h]),s=o[2*n],e.opt_len+=s*(_+a),l&&(e.static_len+=s*(d[2*n+1]+a)));if(0!==p){do{for(_=g-1;0===e.bl_count[_];)_--}while(e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[g]--,0<(p-=2));for(_=g;0!==_;_--)for(n=e.bl_count[_];0!==n;)c<(i=e.heap[--r])||(o[2*i+1]!==_&&(e.opt_len+=(_-o[2*i+1])*o[2*i],o[2*i+1]=_),n--)}}(e,t),P(a,d,e.bl_count)}function L(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++o<u&&i===s||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=i,c=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function V(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++o<u&&i===s)){if(o<c)for(;T(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==a&&(T(e,i,e.bl_tree),o--),T(e,16,e.bl_tree),A(e,o-3,2)):o<=10?(T(e,17,e.bl_tree),A(e,o-3,3)):(T(e,18,e.bl_tree),A(e,o-11,7));a=i,c=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}i(C);var B=!1;function M(e,t,r,i){A(e,0+(i?1:0),3),i=t,t=r,r=!0,U(e=e),r&&(w(e,t),w(e,~t)),n.arraySet(e.pending_buf,e.window,i,t,e.pending),e.pending+=t}r._tr_init=function(e){B||(function(){for(var e,t,r,n=new Array(16),i=0,a=0;a<28;a++)for(v[a]=i,e=0;e<1<<c[a];e++)_[i++]=a;for(_[i-1]=a,a=r=0;a<16;a++)for(C[a]=r,e=0;e<1<<d[a];e++)p[r++]=a;for(r>>=7;a<o;a++)for(C[a]=r<<7,e=0;e<1<<d[a]-7;e++)p[256+r++]=a;for(t=0;t<=u;t++)n[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,n[8]++;for(;e<=255;)h[2*e+1]=9,e++,n[9]++;for(;e<=279;)h[2*e+1]=7,e++,n[7]++;for(;e<=287;)h[2*e+1]=8,e++,n[8]++;for(P(h,287,n),e=0;e<o;e++)g[2*e+1]=5,g[2*e]=k(e,5);m=new I(h,c,257,s,u),y=new I(g,d,0,o,u),E=new I(new Array(0),l,0,19,7)}(),B=!0),e.l_desc=new b(e.dyn_ltree,m),e.d_desc=new b(e.dyn_dtree,y),e.bl_desc=new b(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,S(e)},r._tr_stored_block=M,r._tr_flush_block=function(e,t,r,n){var i,s,o=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<a;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),o=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?M(e,t,r,n):4===e.strategy||s===i?(A(e,2+(n?1:0),3),R(e,h,g)):(A(e,4+(n?1:0),3),function(e,t,r,n){var i;for(A(e,t-257,5),A(e,r-1,5),A(e,n-4,4),i=0;i<n;i++)A(e,e.bl_tree[2*f[i]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),R(e,e.dyn_ltree,e.dyn_dtree)),S(e),n&&U(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_[r]+a+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){A(e,2,3),T(e,256,h),16===(e=e).bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":1}],8:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,(this.strm.avail_out=0)!==(e=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy)))throw new Error(s[e]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){if(t="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(e=n.deflateSetDictionary(this.strm,t)))throw new Error(s[e]);this._dict_set=!0}}function d(e,t){if((t=new c(t)).push(e,!0),t.err)throw t.msg||s[t.err];return t.result}c.prototype.push=function(e,t){var r,s,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(c),o.next_out=0,o.avail_out=c),1!==(r=n.deflate(o,s))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out))),(0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(o.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=c,r.deflate=d,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")}));var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,i,a,s,o,u="",c=0;for(e=n._utf8_encode(e);c<e.length;)i=(o=e.charCodeAt(c++))>>2,a=(3&o)<<4|(t=e.charCodeAt(c++))>>4,s=(15&t)<<2|(r=e.charCodeAt(c++))>>6,o=63&r,isNaN(t)?s=o=64:isNaN(r)&&(o=64),u=u+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(o);return u},isEncode:function(e){if(null===e||""===e||""===e.trim())return!1;try{return btoa(atob(e))==e}catch(e){return!1}},decode:function(e){var t,r,i,a,s,o,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)i=this._keyStr.indexOf(e.charAt(c++)),t=(15&(a=this._keyStr.indexOf(e.charAt(c++))))<<4|(s=this._keyStr.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(o=this._keyStr.indexOf(e.charAt(c++))),u+=String.fromCharCode(i<<2|a>>4),64!=s&&(u+=String.fromCharCode(t)),64!=o&&(u+=String.fromCharCode(r));return u=n._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){var t,r="",n=0;for(c1=c2=0;n<e.length;)(t=e.charCodeAt(n))<128?(r+=String.fromCharCode(t),n++):191<t&&t<224?(c2=e.charCodeAt(n+1),r+=String.fromCharCode((31&t)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),r+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),n+=3);return r}},i={forEach:function(e,t){for(var r=0;r<t.length;++r)e(t[r],r)},format:function(e,t){return 1===t.length&&null!==t[0]&&"object"===r(t[0])&&(t=t[0]),e.replace(/{([^}]*)}/g,(function(e,r){return void 0!==t[r]?t[r]:e}))},generateUUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))},forEachObj:function(e,t){for(var r in t)t.hasOwnProperty(r)&&e(t[r],r);return{}},findObj:function(e,t){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r],r))return t[r];return null},trimmer:function(e){return e=e&&e.toString().trim()},filterObj:function(e,t){var r,n={};for(r in t)t.hasOwnProperty(r)&&e(t[r],r)&&(n[r]=t[r]);return n},parseUrlParams:function(e,t){return e=decodeURIComponent(e),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null===(e=new RegExp("[\\?&=]"+t+"=([^&#]*)").exec(e))||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")}},a={isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNull:function(e){return null===e},isArray:function(e){return!!e&&-1<e.constructor.toString().indexOf("Array")},isObject:function(e){return e===Object(e)&&!a.isArray(e)},isNullOrEmpty:function(e){if(void 0===e)return!0;if("function"==typeof e||"[object Date]"===Object.prototype.toString.call(e))return!1;if(a.isNumber(e)||a.isBoolean(e))return a.isNull(e);if(a.isNull(e)||0===i.trimmer(e).length)return!0;if("object"!==r(e))return!1;for(var t in e)return!1;return!0},isNumber:function(e){return"number"==typeof e},isInteger:function(e){return"number"==typeof e&&parseInt(e)===e},isBoolean:function(e){return"boolean"==typeof e},isArrayEqual:function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},isEqual:function(e,t){if(null===e&&e===t)return!0;if(r(e)===r(t))switch(r(e)){case"number":case"string":case"boolean":return e===t;case"object":if(a.isArray(e)&&a.isArray(t))return a.isArrayEqual(e,t);if(a.isObject(e)&&a.isObject(t))return JSON.stringify(e)===JSON.stringify(t)}return!1}},s={delNotValidChars:function(e){var t;return"string"==typeof e&&(t=new RegExp("\\p{C}","ug"),e=e.replace(t,"")),e},format:function(e,t){return 1===t.length&&null!==t[0]&&"object"===r(t[0])&&(t=t[0]),e.replace(/{([^}]*)}/g,(function(e,r){return void 0!==t[r]?t[r]&&t[r].toString():e}))},languageToISO639_1:function(e){var t=null;return t=!a.isNullOrEmpty(e)&&a.isString(e)?(t=e.split("-"))[0].toLowerCase():t}},o=function(){var e,t=a,n="name",o="version",u=function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},c={rgx:function(e,t){for(var n,i,a,s,o,u=0;u<t.length&&!s;){for(var c=t[u],d=t[u+1],l=n=0;l<c.length&&!s;)if(s=c[l++].exec(e))for(i=0;i<d.length;i++)o=s[++n],"object"===r(a=d[i])&&0<a.length?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,o):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=o?o.replace(a[1],a[2]):void 0:this[a[0]]=o?a[1].call(this,o,a[2]):void 0:4==a.length&&(this[a[0]]=o?a[3].call(this,o.replace(a[1],a[2])):void 0):this[a]=o||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"===r(t[n])&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(u(t[n][i],e))return"?"===n?void 0:n}else if(u(t[n],e))return"?"===n?void 0:n;return e}},d={os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},l={os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[o,c.str,d.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[o,c.str,d.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[n,o],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[n,"Symbian"],o],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],o],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[n,o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],o],[/(sunos)\s?([\w\.\d]*)/i],[[n,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[n,o],[/(haiku)\s(\w+)/i],[n,o],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[o,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[n,o]],bot:["Slurp","nuhk","YandexBot","YandexAccessibilityBot","YandexMobileBot","YandexDirectDyn","yammybot","Openbot","MSNBot","YandexScreenshotBot","YandexImages","YandexVideo","YandexVideoParser","YandexMedia","YandexBlogs","YandexFavicons","YandexWebmaster","YandexPagechecker","YandexImageResizer","YandexAdNet","YandexDirect","YaDirectFetcher","YandexCalendar","YandexSitelinks","YandexMetrika","YandexNews","YandexNewslinks","YandexCatalog","YandexAntivirus","YandexMarket","YandexVertis","YandexForDomain","YandexSpravBot","YandexSearchShop","YandexMedianaBot","YandexOntoDB","YandexOntoDBAPI","Googlebot","Googlebot-Image","Mediapartners-Google","AdsBot-Google","Mail.RU_Bot","bingbot","Accoona","ia_archiver","Ask Jeeves","OmniExplorer_Bot","W3C_Validator","WebAlta","YahooFeedSeeker","Yahoo!","Ezooms","Tourlentabot","MJ12bot","AhrefsBot","SearchBot","SiteStatus","Nigma.ru","Baiduspider","Statsbot","SISTRIX","AcoonBot","findlinks","proximic","OpenindexSpider","statdom.ru","Exabot","Spider","SeznamBot","oBot","C-T bot","Updownerbot","Snoopy","heritrix","Yeti","DomainVader","DCPbot","PaperLiBot"]};function f(){var e={};this._get=function(t){return void 0!==e[t]?e[t]:null},this._set=function(t,r){e[t]=r},function(){try{var t=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",r={name:void 0,version:void 0};c.rgx.call(r,t,l.os),(e={appId:null,base64:!0,osName:r.name||"unknown",osVer:r.version||"unknown",sdkVer:"2.0.5",sdkVerCode:20,agent:t,tzOffset:-60*(new Date).getTimezoneOffset(),lang:s.languageToISO639_1("undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)),resolution:window.screen.width+"x"+window.screen.height,apiUrl:"https://statgw.devtodev.com/",callbackDId:null,isBot:!1,engine:"Native"}).isBot=!!i.findObj((function(e,r){return t.includes(e)}),l.bot)}catch(r){}}()}return f.prototype.setSdkVerCode=function(e){"Native"!==this._get("engine")&&this._set("sdkVerCode",e)},f.prototype.setSdkVer=function(e){"Native"!==this._get("engine")&&this._set("sdkVer",e)},f.prototype.setTestCustomUrl=function(e){this._set("testName",e)},f.prototype.getTestCustomUrl=function(){return this._get("testName")},f.prototype.setApiUrl=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1)),this._set("apiUrl",e)},f.prototype.getApiUrl=function(){return this._get("apiUrl")},f.prototype.setEnv=function(e){if(void 0!==e)for(var t=["engine","base64"],r=t.length-1;0<=r;r--)void 0!==e[t[r]]&&this._set(t[r],e[t[r]])},f.prototype.isBase64=function(){return this._get("base64",!0)},f.prototype.setAppId=function(e){return this._set("appId",e)},f.prototype.getAppId=function(){return this._get("appId")},f.prototype.getSdkVer=function(){return this._get("sdkVer")},f.prototype.getSdkVerCode=function(){return this._get("sdkVerCode")},f.prototype.getUA=function(){return this._get("agent")},f.prototype.getTzOffset=function(){return this._get("tzOffset")},f.prototype.getLanguage=function(){return this._get("lang")},f.prototype.getOsName=function(){return this._get("osName")},f.prototype.getOsVer=function(){return this._get("osVer")},f.prototype.getDisplayResolution=function(){return this._get("resolution")},f.prototype.buildUrl=function(e,r){var n=this._get("testName"),i=this._get("apiUrl");t.isString(n)&&!t.isNullOrEmpty(n)&&e.unshift(n);var a,s="";for(a in r)s+=""!==s?"&":"",s+=a+"="+encodeURIComponent(r[a]);return i+e.join("/")+"?"+s},f.prototype.setCallbackDId=function(e){!t.isFunction(e)&&null!==e||this._set("callbackDId",e)},f.prototype.getCallbackDId=function(){return this._get("callbackDId")},f.prototype.isBot=function(){return this._get("isBot")},f.prototype.useXDR=function(){return!!window.XDomainRequest},f.prototype.getEngine=function(){return this._get("engine")},{getInstance:function(){return e=e||new f}}}(),u=function(){"use strict";function e(e,t,i){if(d&&n[e]<=n[d]){var a,s=(f=(o=new Date).getDate(),h=o.getMonth()+1,g=o.getFullYear(),p=o.getHours(),_=o.getMinutes(),v=o.getSeconds(),s=o.getMilliseconds(),g+"/"+(o=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,r=e.toString().length;return(r<t?"0".repeat(t-r):"")+e})(h)+"/"+o(f)+" "+o(p)+":"+o(_)+":"+o(v)+":"+o(s,3));if(c.isNullOrEmpty(i)||(t=u.format(t,i)),void 0!==r)r(e,t);else{switch(t=s+" [Devtodev "+l.getSdkVer()+"] "+e+" "+t,n[e]){case n.Error:a=console.error;break;case n.Warning:a=console.warn;break;case n.Info:a=console.info;break;case n.Debug:a=console.log}void 0!==a&&a(t)}}var o,f,h,g,p,_,v}function t(){}var r,n={No:0,Error:1,Warning:3,Info:7,Debug:15},i=null,u=s,c=a,d="No",l=o.getInstance();return t.prototype.setLogLevel=function(e){c.isNullOrEmpty(e)||c.isNullOrEmpty(n[e])?this.warning("Invalid log level: {type}. Avaliable levels: [No, Error, Warning, Info, Debug]",{type:e}):d=e},t.prototype.getLogLevel=function(){return d},t.prototype.warning=function(t,r){e("Warning",t,r)},t.prototype.info=function(t,r){e("Info",t,r)},t.prototype.error=function(t,r){e("Error",t,r)},t.prototype.debug=function(t,r){e("Debug",t,r)},t.prototype.setCallback=function(e){r=e},{getInstance:function(){return i=i||new t}}}(),c={DeviceId:"DeviceId",PreviousDeviceId:"PreviousDeviceId",UserId:"UserId",PreviousUserId:"PreviousUserId",DevtodevId:"DevtodevId",CrossPlatformDevtodevId:"CrossPlatformDevtodevId",DevtodevIdTimestamp:"DevtodevIdTimestamp",Encoding:"X-Id-Encoding"},d={DevtodevId:"devtodevId",CrossPlatformDevtodevId:"crossPlatformDevtodevId",DevtodevIdTimestamp:"devtodevIdTimestamp"},l={LogLevel:"logLevel",CurrentLevel:"currentLevel",AppVersion:"applicationVersion",Tracking:"trackingAvailability",UserId:"userId"},f={ExperimentsSettings:{Key:"experiments",Id:"id",Group:"group",Conditions:"conditions",Parameters:"parameters",CompletionDate:"completionDate",IsTesting:"isTesting"},UserProperties:{Key:"userProperties",Country:"country"},Callback:"Callback",ConfigKey:"ConfigKey",Backend:{Country:"country",Level:"level",PayingUser:"payingUser"}},h={Ids:"0",Status:"1",Time:"4"},g={UserId:"2",PrevUserId:"3",TimeSentBalance:"4",DevtodevId:"5",CrossPlatformDevtodevId:"6",RegistrationDate:"7",LastForeground:"8",SessionLength:"9",SessionStarted:"10",TutorialSteps:"11",CurrentLevel:"12",ReferralSatus:"14",CurrencyAccrual:"15",Profile:"16",UpdateProfile:"17",IsPayingUser:"19",UserExperiments:"20",Tracking:"21",IsDefault:"22",BackendAsk:"23",LastActive:"24",DeviceId:"25",UserProperties:"26",Experiments:"27",PrevDeviceId:"28",DefaultConfig:"29",DevtodevIdTimestamp:"31",DeviceCounting:"1"},p={UUID:"0",AppVersion:"1",TransactionIds:"2",Config:"4",IsMigration:"5"},_={PrimaryId:"0",PrimaryUserId:"1",language:"2",appVersion:"3",sdkVersion:"4",sdkCodeVersion:"5",Forced:"6",Params:"7",Code:"8",engine:"9"},v={0:"earned",1:"bought"},m={Tester:"tester",Cheater:"cheater",Age:"age",Name:"name",Email:"email",Phone:"phone",Photo:"photo",Gender:"gender"},y="ending",E={Code:"code",Timestamp:"timestamp",SessionId:"sessionId",InExperiments:"inExperiments",Level:"level"};UTM_TERM="term",UTM_MEDIUM="medium",UTM_SOURCE="source",UTM_CONTENT="content",UTM_CAMPAIGN="campaign",SP_CODE="sp",SP_NET="socialNetwork",SP_REASON="postReason",SC_CODE="sc",SC_NET="socialNetwork",TR_CODE="tr",TR_STEP="step",RP_CODE="rp",RP_PRICE="price",RP_ORDER_ID="orderId",RP_PRODUCT_ID="productId",RP_CURRENCY="currencyCode",VP_CODE="vp",VP_PURCHASE_ID="purchaseId",VP_PURCHASE_TYPE="purchaseType",VP_PURCHASE_PRICE="purchasePrice",VP_PURCHASE_AMOUNT="purchaseAmount",VP_PURCHASE_CURRENCY="purchasePriceCurrency",DI_CODE="di",DI_OS_VER="osVersion",DI_OS="os",DI_UUID="uuid",DI_UA="userAgent",DI_TZ="timeZoneOffset",DI_DISPLAY_RESOLUTION="displayResolution",CE_CODE="ce",CE_NAME="name",CE_PARAMS="parameters",LU_CODE="lu",LU_LEVEL="level",LU_SPENT="spent",LU_EARND="earned",LU_BOUGHT="bought",LU_BALANCE="balance",UE_CODE="ue",UE_LN="length",AL_CODE="al",RF_CODE="rf",SS_CODE="ss",CA_CODE="ca",CA_CURRENCY_NAME="currencyName",CA_CURRENCY_AMOUNT="currencyAmount",CA_TYPE="accrualType",CA_SOURCE="currencySource",PE_CODE="pe",PE_NAME="name",PE_PARAMS="parameters",PE_SPENT="spent",PE_EARND="earned",PE_SOURCE="source",PE_DIFFICULTY="difficulty",PE_SUCCESS="successfulCompletion",PE_DURATION="duration",TS_CODE="ts",TS_ALLOWED="trackingAllowed",PL_CODE="pl",PL_PARAMS="parameters",CB_CODE="cb",Int32Max=2147483647,Int32Min=-2147483647,Int64Max=Number.MAX_SAFE_INTEGER,Int64Min=Number.MIN_SAFE_INTEGER,MT_INIT="Initialize",ADRV_CODE="adrv",ADRV_NETWORK="ad_network",ADRV_UNIT="ad_unit",ADRV_REVENUE="revenue",ADRV_PLACEMENT="placement",MES_PREFIX="In the {method} method error has occurred: ";var C,I,b=function(){"use strict";function e(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],s=!_.isNullOrEmpty(r);t={arg:t,method:e};return s||(e="{arg} is empty!",a.isNull(r)&&(e="{arg} is null!"),(i||n)&&E(e,t,n)),s}function n(e,t,n){var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],a=!0;return _.isBoolean(n)||(a=!1,E(f,{method:e,arg:t,nType:"boolean",cType:r(n)},i)),a}function o(e,t,n,i,a){var s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],o={arg:t,method:e,nType:"number"},u=_.isNumber(n);return u||(u=!1,o.cType=r(n),E(f,o,s)),u=(u=u&&b(e,t,n,s))&&I(e,t,n,i,a,s)}function c(e,t,r,n,i,a){var s={};return y((function(r,o){var u=p.delNotValidChars(o),c="The ["+u+"] key of the "+t;o="The value of the "+t;C(e,c,u,!1)&&(u=w(e,c,u,n),D(e,o,r,i,a,!1)&&(s[u]=r))}),r),s}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Referrer",n=[UTM_SOURCE,UTM_MEDIUM,UTM_CONTENT,UTM_CAMPAIGN,UTM_TERM],i={};a=e,s=t,_.isNullOrEmpty(a)&&E("{method} has empty arguments!",{method:s},!0),_.isObject(a)||E(f,{method:s,arg:"Arguments",nType:"object",cType:r(a)},!0);for(var a,s,o=n.length-1;0<=o;o--){var u,c,d=n[o];void 0!==e[d]&&(u=p.delNotValidChars(e[d]),C(t,c="The value of the utm data dictionary by ["+d+"] key",u,!1)&&(u=w(t,c,u,255),i[d]=u))}return _.isNullOrEmpty(i)&&E("{method} has empty Resources dictionary!",{method:t},!0),i}function l(t,r,n){var i="The order id argument value",a="The price argument value",s="The product id parameter value",u="The currency code parameter value",c=p.delNotValidChars(t[RP_ORDER_ID]),d=t[RP_PRICE],l=p.delNotValidChars(t[RP_PRODUCT_ID]),f=p.delNotValidChars(t[RP_CURRENCY]);if(e(r,a,d)&&o(r,a,d,Int64Min,Int64Max),C(r,i,c)&&(c=w(r,i,c,65),t[RP_ORDER_ID]=c),C(r,s,l)&&(t[RP_PRODUCT_ID]=w(r,s,l,255)),C(r,u,f)&&function(e,t,r,n){r.length!==n&&(!1,E("{arg} Parameter length must be equal to [{size}]!",{arg:t,method:e,size:n},!(4<arguments.length&&void 0!==arguments[4])||arguments[4]))}(r,u,f,3),void 0!==n.trIds&&-1!==n.trIds.indexOf(t[RP_ORDER_ID]))throw g.info("This order({order}) has already been sent. Skipped",{order:c}),null;return t}var f="{arg} is [{cType}], but must be [{nType}]",h=(t(A={},SC_CODE,SC_NET),t(A,SP_CODE,SP_NET),t(A,TR_CODE,TR_STEP),t(A,CE_CODE,CE_NAME),t(A,VP_CODE,VP_PURCHASE_ID),t(A,PE_CODE,PE_NAME),A),g=u.getInstance(),p=s,_=a,y=i.forEachObj,E=function(e,t){if(!(2<arguments.length&&void 0!==arguments[2])||arguments[2])throw new Error(p.format(e,t));g.error(MES_PREFIX+e,t)},C=function(t,n,i){var a=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],s={arg:n,method:t,nType:"string"};return(n=e(t,n,i,a,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]))&&((n=_.isString(i))||(s.cType=r(i),E(f,s,a))),n},I=function(e,t,r,n,i){var a,s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];t={arg:t,method:e};return(e=!0)&&r<n&&(t.val=r,t.min=n,e=!(a="{arg} [{val}] is less than the min [{min}] permitted value!")),e&&i<r&&(t.val=r,t.max=i,e=!(a="{arg} [{val}] is greater than the max [{max}] permitted value!")),e||E(a,t,s),e},b=function(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return(r=!isNaN(r))||E("{arg} is the NaN.",{arg:t,method:e},n),r},D=function(e,t,n,i,a){var s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],o={arg:t,method:e,nType:"integer"},u=_.isInteger(n);return u||(u=!1,o.cType=r(n),E(f,o,s)),u=(u=u&&b(e,t,n,s))&&I(e,t,n,i,a,s)},w=function(e,t,r,n){var i=r.substring(0,n);return i!=r&&g.warning(MES_PREFIX+'{arg}: {value} is longer than it is permitted. The string was truncated to length "{maxLn}"!',{method:e,arg:t,maxLn:n,value:r}),i},A=function(){};return A.prototype.validAppId=function(e,t){var r="The application key argument value";t=p.delNotValidChars(t);return C(e,r,t)?t=w(e,r,t,255):null},A.prototype.validUserId=function(e,t){var r="The user id argument value";t=p.delNotValidChars(t);return C(e,r,t,!1,!1)?w(e,r,t,64):null},A.prototype.validReplaceId=function(e,t,r){var n="The user id argument value";return t=p.delNotValidChars(t),r=p.delNotValidChars(r),_.isNullOrEmpty(t)?t=null:C(e,n,t,!0)&&(t=w(e,n,t,64)),{prevId:t,id:r=C(e,n,r)?w(e,n,r,64):r}},A.prototype.validEvent=function(n,i){var a,s,u,h,v,m,I,b,A,T,k,P,S,U,O,x,R,N,L,V,B,M,z,F,j=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"system",H=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};switch(n){case SC_CODE:return B=i,M=j,z="The social network name argument value",F=p.delNotValidChars(B[SC_NET]),C(M,z,F)&&(B[SC_NET]=w(M,z,F,24)),B;case TR_CODE:return function(e,t,r){var n=e[TR_STEP];if(D(t,"The step argument value",n,Int32Min,Int32Max),n<1&&-1===[0,-1,-2].indexOf(n)&&E("A tutorial step can include only predefined values: 0(Skipped), -1(Start), -2(Finish), and it can also be a positive integer",{method:t}),void 0!==r.steps&&-1!==r.steps.indexOf(n))throw g.info("This tutorial step({step}) has already been sent. Skipped",{step:n}),null;return e}(i,j,H);case SP_CODE:return x=i,R=j,B="The social network name argument value",N=p.delNotValidChars(x[SC_NET]),L="The post reason argument value",V=p.delNotValidChars(x[SP_REASON]),C(R,B,N)&&(x[SC_NET]=w(R,B,N,24)),C(R,L,V)&&(x[SP_REASON]=w(R,L,V,32)),x;case RP_CODE:return l(i,j,H);case VP_CODE:return S=j,N="The purchase identifier",U="The purchase type",R="The purchase amount",L=(P=i)[VP_PURCHASE_AMOUNT],V=p.delNotValidChars(P[VP_PURCHASE_ID]),x=p.delNotValidChars(P[VP_PURCHASE_TYPE]),O=t({},VP_PURCHASE_AMOUNT,L),e(S,R,L)&&D(S,R,L,1,Int32Max),C(S,N,V)&&(O[VP_PURCHASE_ID]=w(S,N,V,32)),C(S,U,x)&&(O[VP_PURCHASE_TYPE]=w(S,U,x,96)),void 0===P.r?(N="The purchase currency value",V=p.delNotValidChars(P.c),U=P.p,x="The purchase price value",C(S,N,V)&&(V=w(S,N,V,24)),e(S,x,U)&&D(S,x,U,1,Int32Max)&&(O[VP_PURCHASE_PRICE]=t({},V,U))):O[VP_PURCHASE_PRICE]=c(S,"resources dictionary",P.r,24,1,Int32Max),_.isNullOrEmpty(O[VP_PURCHASE_PRICE])&&E("resources dictionary is empty!",{method:S},!0),O;case CE_CODE:return a=i,s=j,u=H,h="The custom event name",v=p.delNotValidChars(a[CE_NAME]),m=a[CE_PARAMS],b="The key of the parameters dictionary",T=!(A={}),k=void(I=0)!==u.maxCeParams?u.maxCeParams:10,C(s,h,v)&&(v=w(s,h,v,72),a[CE_NAME]=v),y((function(t,n){var i,a,u;I<k&&(i=p.delNotValidChars(n),a=!1,u=p.format("The value of the parameters dictionary by [{trimKey}] key",{trimKey:i}),n=t,C(s,b,i,!1)&&e(s,u,n,!1)&&(i=w(s,b,i,32),_.isNumber(t)?a=o(s,u,t,Int64Min,Int64Max,!1):_.isBoolean(t)?a=!0:_.isString(t)?(n=p.delNotValidChars(n),(a=C(s,u,n,!1))&&(n=w(s,b,n,255))):E(f,{arg:u,method:s,cType:r(n),nType:"boolean, integer, number, string"},!1),a&&(A[i]=n,T=!0))),I++}),m),delete a[CE_PARAMS],T&&(a[CE_PARAMS]=A,k<I&&g.error("[CustomEventParameters] Limit reached [{amount}] when adding a new parameter",{amount:k})),a;case LU_CODE:return function(e,t){var r,n,i=e[LU_LEVEL],a=[LU_EARND,LU_SPENT,LU_BOUGHT,LU_BALANCE],s={};D(t,"The level argument value",i,1,Int32Max-1),s[LU_LEVEL]=i;for(var o=a.length-1;0<=o;o--)if(!_.isNullOrEmpty(e[r=a[o]])){switch(r){case LU_EARND:s[r]=c(t,n="earn dictionary",e[r],24,1,Int32Max);break;case LU_SPENT:s[r]=c(t,n="spent dictionary",e[r],24,1,Int32Max);break;case LU_BOUGHT:s[r]=c(t,n="bought dictionary",e[r],24,1,Int32Max);break;case LU_BALANCE:s[r]=c(t,n="balances dictionary",e[r],24,Int32Min,Int32Max)}_.isNullOrEmpty(s[r])&&(E("{arg} is empty!",{method:t,arg:n},!1),delete s[r])}return s}(i,j);case RF_CODE:return d(i,j);case ADRV_CODE:return U=i,P=j,S="The network argument value",O="The placement argument value",u="The unit argument value",h=p.delNotValidChars(U[ADRV_NETWORK]),v=U[ADRV_REVENUE],m=p.delNotValidChars(U[ADRV_PLACEMENT]),a=p.delNotValidChars(U[ADRV_UNIT]),U=t({},"source","sdk"),C(P,S,h)&&(U[ADRV_NETWORK]=w(P,S,h,100)),C(P,O,m,!1,!1)&&(U[ADRV_PLACEMENT]=w(P,O,m,100)),C(P,u,a,!1,!1)&&(U[ADRV_UNIT]=w(P,u,a,100)),o(P,"The revenue argument value",v,0,Int64Max)&&(U[ADRV_REVENUE]=v),U;case CB_CODE:return function(e,t){return e=c(t,"balance",e,24,Int64Min,Int64Max),_.isNullOrEmpty(e)&&E("balance is empty!",{method:t},!0),{balance:e}}(i,j);default:return i}},A.prototype.isExcluded=function(e,t,r){var n,i={code:t},a=!1;return void 0!==e[t]&&(0===e[t].length?(a=!0,g.info("Event [{code}] is excluded by project configuration",i)):(_.isNullOrEmpty(h[t])&&(n=h[t]),-1!==e[t].indexOf(r[n])&&(i[arg]=n,g.info("Event [{code}] with {arg} argument is excluded by project configuration",i),a=!0))),a},A.prototype.validCA=function(t,r,n,i,a,s){t="CurrencyAccrual";var o="The currency name",u="The currency amount",c="The source",d={};i=p.delNotValidChars(i),r=p.delNotValidChars(r);return C(t,o,r)&&(d[CA_CURRENCY_NAME]=w(t,o,r,24)),C(t,c,i)&&(d[CA_SOURCE]=w(t,c,i,32)),e(t,u,n)&&D(t,u,n,1,Int32Max)&&(d[CA_CURRENCY_AMOUNT]=n),void 0===v[a]&&E("Accrual type can include only predefined values: 0(earned), 1(bought), and it can also be a positive value",{method:t},!0),void 0!==s[v[a]]&&void 0!==s[v[a]][i]&&void 0!==s[v[a]][i][r]&&s[v[a]][i][r]+n>Int32Max&&E("{amountArg} is overflowed",{amountArg:u,method:t},!0),d[CA_TYPE]=a,d},A.prototype.validLevel=function(e,t){return D(e,"The level argument value",t,1,Int32Max-1)},A.prototype.validTraking=function(e,t){return n(e,"status",t,!0)},A.prototype.validAppVer=function(e,t){var r="The app version argument value";t=p.delNotValidChars(t);return C(e,r,t)?t=w(e,r,t,255):null},A.prototype.validSdkCode=function(e,t){return D(e,"The sdk code argument value",t,1,Int32Max-1)},A.prototype.validStartPe=function(e,t,r){var n="The event name argument value",i="The source parameter value",a=p.delNotValidChars(t);t={};return C(e,n,a)&&(t.name=w(e,n,a,40)),_.isNullOrEmpty(r)||(void 0!==r[PE_SOURCE]&&(a=p.delNotValidChars(r[PE_SOURCE]),C(e,i,a)&&(t[PE_SOURCE]=w(e,i,a,40))),void 0!==r[PE_DIFFICULTY]&&D(e,"The difficulty parameter value",r[PE_DIFFICULTY],Int32Min,Int32Max)&&(t[PE_DIFFICULTY]=r[PE_DIFFICULTY])),t},A.prototype.validStopPe=function(e,r,i){var a,s,o="The event name argument value",u=(r=p.delNotValidChars(r),[PE_SPENT,PE_EARND]),d=t({},PE_SUCCESS,!1);if(C(e,o,r)&&(d.name=w(e,o,r,40)),!_.isNullOrEmpty(i)){void 0!==i[PE_DURATION]&&D(e,"The duration parameter value",i[PE_DURATION],0,Int32Max)&&(d[PE_DURATION]=i[PE_DURATION]),void 0!==i[PE_SUCCESS]&&n(e,"The success parameter value",i[PE_SUCCESS],!0)&&(d[PE_SUCCESS]=i[PE_SUCCESS]);for(var l=u.length-1;0<=l;l--)if(void 0!==i[a=u[l]]){switch(a){case PE_EARND:s="Earn",d[a]=c(e,"earn dictionary",i[a],24,1,Int64Max);break;case PE_SPENT:s="Spent",d[a]=c(e,"spent dictionary",i[a],24,1,Int64Max)}_.isNullOrEmpty(d[a])&&(E("{arg} dictionary is empty !",{method:e,arg:s},!1),delete d[a])}}return d},A.prototype.validPlKey=function(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=p.delNotValidChars(t),i="The key argument";t=m;if(C(e,i,n,r)){switch((n=w(e,i,n,64)).toLowerCase()){case t.Name:case t.Email:case t.Photo:case t.Phone:case t.Age:case t.Cheater:case t.Gender:n=n.toLowerCase()}return n}return null},A.prototype.validPlVal=function(e,t,n){var i=m,s="The value argument",u=null,c={arg:s};switch(a.isNullOrEmpty(n)&&E("{arg} is empty!",c,!0),t){case i.Name:case i.Email:case i.Photo:case i.Phone:_.isString(n)||E("Invalid value! The [{value}] value of the reserved key [{key}] must be String",{key:t,value:n},!0);break;case i.Age:_.isInteger(n)||E("Invalid value! The [{value}] value of the reserved key [{key}] must be Integer",{key:t,value:n},!0),n<=0&&E('Invalid value! The [{value}] value of the reserved key [{key}] is less than the min [0] permitted value!"',{key:t,value:n},!0);break;case i.Tester:case i.Cheater:_.isBoolean(n)||E("Invalid value! The [{value}] value of the reserved key [{key}] must be Boolean",{key:t,value:n},!0);break;case i.Gender:-1===[0,1,2].indexOf(n)&&E("Gender can only be specified with a predefined value: 0 (Unknown), 1 (Male), 2 (Female)",{},!0)}return i=r(n),-1!==["string","number","boolean"].indexOf(i)?_.isNumber(n)?o(e,s,n,Int64Min,Int64Max)&&(u=n):u=_.isBoolean(n)?n:(u=p.delNotValidChars(n),a.isNullOrEmpty(u)&&E("{arg} is empty!",c,!0),w(e,s,n,255)):(c.nType="number, string or boolean",c.cType=r(u),E(f,c,!0)),u},A.prototype.validMigration=function(e,t){var r,n={};for(r in t)_.isNullOrEmpty(t[r])||(n[r]=t[r]);return n},A}(),D=function(){var e=a.isNullOrEmpty,t=u.getInstance();function r(e,t,r){this._xhr=null,this._key=e,this._structure=t,this._callback=r}return r.prototype={run:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{sync:!1,gzip:!0,method:"POST",timeout:3e3};this.abort();var i,a=this._structure.url,s=!!window.XDomainRequest,o=r.method||"GET",u=this._structure.body||{},c=this._structure.headers||{},d=this._structure.toBase64||[],l=!!r.sync,f=this._callback,h={Method:o,URL:a,Headers:{},EncodedHeaders:{},Content:{}};if(void 0!==this._structure.auxiliary){var g=this._structure.auxiliary;for(m in g)g.hasOwnProperty(m)&&(h[m]=g[m])}function p(e,t,r){void 0!==f&&f(e,t,r)}if(s)t.warning("Cannot be sent because XDomainRequest is being used");else{var _=new window.XMLHttpRequest;"GET"!==o&&"HEAD"!==o&&(s="application/json",u=function(t){var r={};for(m in t)t.hasOwnProperty(m)&&!e(t[m])&&(r[m]=t[m]);return r}(u),h.Content=u,r.gzip?(u=iampakopako.deflate(JSON.stringify(u),{gzip:!0,level:9}),s="application/gzip"):u=JSON.stringify(u),c["content-type"]||c["Content-Type"]||(c["Content-Type"]=s));var v,m,y=!1;for(m in _.withCredentials=!0,l||(_.withCredentials=!!r.withCredentials),_.timeout=3e3,_.open(o,a,!l),c)c.hasOwnProperty(m)&&!e(c[m])&&(v=c[m],-1!=d.indexOf(m)&&(i=c[m],v=e(i)?i:n.encode(i),y=!0),h.Headers[m]=c[m],h.EncodedHeaders[m]=v,_.setRequestHeader(m,v));y&&(m="X-Id-Encoding",_.setRequestHeader(m,"base64"),h.Headers[m]="base64",h.EncodedHeaders[m]="base64"),_.onload=function(){var e,t=null,r=1223===_.status?204:_.status;if(0!==r){e=_.response||_.responseText;try{e=JSON.parse(e)}catch(e){}}else t=new Error("Internal XMLHttpRequest Error");p(r,e,t)},_.onerror=function(e){(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,p(e.statusCode,{},e)},_.ontimeout=function(e){(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,p(e.statusCode,{},e)},_.send("function"==typeof ArrayBufferView?u:u.buffer),t.debug(JSON.stringify(h,null,2))}this._xhr=_},abort:function(){e(this._xhr)||this._xhr.abort()}},r}(),w=function(){function e(){function e(e){void 0!==t[e]&&(t[e].abort(),delete t[e])}var t={};this._run=function(r,n,i){e(r),t[r]=new D(r,n,function(t,r){return function(n,i,a){t(n,i,a),e(r)}}.bind(this)(i,r)),t[r].run()},this._stop=function(t){e(t)}}return e.prototype={run:function(e,t,r){this._run(e,t,r)},stop:function(e){this._stop(e)}},e}(),A=function(){function e(){}var t={},r=null,n=u.getInstance();return e.prototype.start=function(e,i){return this.clear(),r=e,t={startTime:Date.now(),startBundle:i},n.info("Progression event '{name}' is started",{name:e}),!0},e.prototype.finish=function(e,i){if(null===r)n.warning("Progression event can't be finished! Doesn't have any started progression events");else{if(r==e){n.info("Progression event '{name}' is finished",{name:e});var a,s={name:e,parameters:{}};return void 0!==t.startBundle[PE_SOURCE]&&(s.parameters[PE_SOURCE]=t.startBundle[PE_SOURCE]),s.parameters.success=i[PE_SUCCESS],void 0===i[PE_DURATION]?0<(a=Math.ceil((Date.now()-t.startTime)/1e3))&&(s.parameters[PE_DURATION]=a):s.parameters[PE_DURATION]=i[PE_DURATION],void 0!==t.startBundle[PE_DIFFICULTY]&&(s.parameters[PE_DIFFICULTY]=t.startBundle[PE_DIFFICULTY]),void 0!==i[PE_EARND]&&(s[PE_EARND]=i[PE_EARND]),void 0!==i[PE_SPENT]&&(s[PE_SPENT]=i[PE_SPENT]),t={},r=null,s}n.warning("Progression event can't be finished!\n\tStarted progression event name is [{currentName}]\n\tCurrent event name is [{name}]",{currentName:r,name:e})}return!1},e.prototype.getLocation=function(){return r},e.prototype.clear=function(){t={},null!==r&&n.info("Info Progression event [{name}] is cleared",{name:r}),r=null},e}(),T=function(){function e(){}var t={};return e.prototype.isAvailable=function(){return void 0!==window.navigator&&void 0!==window.navigator.cookieEnabled?window.navigator.cookieEnabled:(window.document.cookie="testcookie=test; max-age=10000",1!==(t=window.document.cookie).indexOf("testcookie=test")&&(window.document.cookie="testcookie=test; max-age=1",!0))},e.prototype.setItem=function(e,t){var r=new Date;r.setTime(Date.now()+31536e7),window.document.cookie=e+"="+t+"; expires="+r.toGMTString()+"; path=/"},e.prototype.getItem=function(e){var r,n,a,s=null;for(t=window.document.cookie.split(";"),r=0;r<t.length;r++)a=(n=t[r]).indexOf("="),i.trimmer(n.slice(0,a))===e&&(s=n.slice(a+1));return s},e.prototype.removeItem=function(e){window.document.cookie=e+"=; expires='Thu, 01 Jan 1970 00:00:00 GMT'; path=/"},e}(),k=function(){function e(){}return e.prototype.isAvailable=function(){var e=!1;try{"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("test","yes"),window.localStorage.removeItem("test"),e=!0)}catch(t){e=!1}return e},e.prototype.setItem=function(e,t){window.localStorage.setItem(e,t)},e.prototype.getItem=function(e){return e="undefined"===(e=window.localStorage.getItem(e))?null:e},e.prototype.removeItem=function(e){window.localStorage.removeItem(e)},e}(),P=function(e){"use strict";var t,r=i;return(t=function(t,r){function i(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e=e.join("_");return e=t?n.encode(e):e}var a=r,s=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).base64||!1,o=t;this._get=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=i([o,e],!1);return null===a.getItem(r)?(r=i([o,e]),a.getItem(r)):a.removeItem(r),function(e){return null!==e&&(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&n.isEncode(e)&&(e=n.decode(e)),JSON.parse(e)}(a.getItem(r),s)||t},this._set=function(t){var r=i([o,e]);a.setItem(r,function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e=JSON.stringify(e),e=t?n.encode(e):e}(t,s))}}).prototype.getByPrimaryId=function(e){return this._get()[e]},t.prototype.removeByPrimaryId=function(e){var t=this._get();delete t[e],this._set(t)},t.prototype.get=function(){return this._get()},t.prototype.set=function(e){return this._set(e)},t.prototype.findPrimaryIdByCondition=function(e){var t,n=this._get();for(t in n)if(n.hasOwnProperty(t)&&!r.findObj((function(e,r){return n[t][r]!=e}),e))return t;return null},t},S=function(){function e(e){var i={};this._getAttribute=function(e,t){var r=(e=s.isArray(e)?e:[e]).length;if(r){for(var n=i,a=0;a<r&&n;++a){if(void 0===n[e[a]]){n=t;break}n=n[e[a]]}return n}},this._init=function(){i=e.get(),null===this._getAttribute(r.UUID,null)&&(i[r.UUID]=n.generateUUID(),this._setAttrs(i))},this._setAttr=function(e,r){this._setAttrs(t({},e,r))},this._setAttrs=function(t){for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);e.set(i)},this._init()}var r=p,n=i,s=a;return e.prototype={isMigration:function(){return this._getAttribute(r.IsMigration,0)},addTransactionId:function(e){var t=this.getTransactionIds();s.isNullOrEmpty(e)||(t.push(e),this._setAttr(r.TransactionIds,t))},setAppVer:function(e){this._setAttr(r.AppVersion,e)},setConfigSdk:function(e){this._setAttr(r.Config,e)},isAllExcluded:function(){return this._getAttribute(r.Config+".exclude.all",!1)},getEventsExcluded:function(){return this._getAttribute(r.Config+".exclude.events",{})},getAppVer:function(){var e=[r.AppVersion];return this._getAttribute(e)},getMaxEventParams:function(){var e=[r.Config,"eventParamsCount"];return this._getAttribute(e,20)},getTransactionIds:function(){var e=[r.TransactionIds];return this._getAttribute(e,[])},getSessionTimeout:function(){var e=[r.Config,"sessionTimeout"];return this._getAttribute(e,6e5)},getCountForRequest:function(){var e=[r.Config,"countForRequest"];return this._getAttribute(e,10)},getAbTimeout:function(){var e=[r.Config,"abTestStartTimeout"];return this._getAttribute(e,3e4)},getExcludeVer:function(){var e=[r.Config,"exclude","version"];return this._getAttribute(e,null)},sync:function(){this._init()},getTimeForRequest:function(){var e=[r.Config,"timeForRequest"];return this._getAttribute(e,12e4)},getAliveTimeout:function(){var e=[r.Config,"aliveTimeout"];return this._getAttribute(e,3e5)},getCATimeout:function(){var e=[r.Config,"currencyAggregationTimeout"];return this._getAttribute(e,36e4)},getUUID:function(){var e=[r.UUID];return this._getAttribute(e)},setAttrs:function(e){return this._setAttrs(e)}},e}(),U=function(){"use strict";function e(e,r,n){t.call(this,e,r,n)}var t=P("app");return(e.prototype=Object.create(t.prototype)).constructor=e}(),O=function(){function e(){var e={};this._getAttr=function(t){return void 0!==e[t]?e[t]:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null},this._clear=function(){e={}},this._setAttr=function(t,r){e[t]=r},this._get=function(){return e}}var t=h;return e.prototype={time:function(){return this._getAttr(t.Time,0)},isMark:function(){if(this.isActivated()){var e=this.experimentIds()[0].id;return void 0!==_experiments[e]&&!_experiments[e].isTesting}return!1},isActivated:function(){return 3==this._getAttr(t.Status)},isOffer:function(){return 2==this._getAttr(t.Status)},isExist:function(){return 1==this._getAttr(t.Status)},experimentIds:function(){return this._getAttr(t.Ids)},get:function(){return this._get()},getExperiments:function(){return _experiments},setAttrs:function(e){for(var t in _attributes,e)e.hasOwnProperty(t)&&this._setAttr(t,e[t])},getConfig:function(){var e={};if(this.isActivated())for(var t=this.experimentIds(),r=0;r<t.length;r++)if(void 0!==_experiments[t[r].id])for(var n=_experiments[t[r].id].parameters.length-1;0<=n;n--){var i=_experiments[t[r].id].parameters[n].key,a=_experiments[t[r].id].parameters[n].values;e[i]=a[t[r].group]}return e},isTesting:function(){if(this.isActivated())for(var e=this.experimentIds(),t=0;t<e.length;t++)if(void 0!==_experiments[e[t].id]&&_experiments[e[t].id].isTesting)return!0;return!1},setExperiments:function(e){for(var t=e.length-1;0<=t;t--)_experiments[e[t].id]=e[t]},init:function(e){}},e}(),x=function(){function e(e){var i,a={},s=new O;this._getExperiment=function(){return s},this._getAttr=function(e,t){var r="string"==typeof e?[e]:e,n=r.length;if(n){for(var i=a,s=0;s<n&&i;++s){if(void 0===i[r[s]]){i=t;break}i=i[r[s]]}return i}},this._getPrimaryId=function(){return i},this._sync=function(){a=e.getByPrimaryId(i)},this._clearBackendId=function(e){return e[r.DevtodevId]=null,e[r.CrossPlatformDevtodevId]=null,e[r.DevtodevIdTimestamp]=null,e},this._replaceUserId=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=a[r.UserId],i={};n!==e&&null!==e&&(i[r.PrevUserId]=n,i[r.UserId]=e,i[r.PrevDeviceId]=n,i[r.DeviceId]=e,i[r.IsDefault]=t?1:0,i=this._clearBackendId(i)),this._setAttrs(i)},this._create=function(e,s){var o;i=n.generateUUID(),a={},this._setAttrs((t(o={},r.RegistrationDate,Date.now()),t(o,r.UserId,e),t(o,r.IsDefault,s?1:0),t(o,r.DeviceId,e),o)),this._sync()},this._init=function(e){i=e,this._sync(),this._setAttrs(this._clearBackendId({}))},this._setAttr=function(e,r){this._setAttrs(t({},e,r))},this._setAttrs=function(t){for(var n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);a[r.LastActive]=Date.now(),e.setByPrimaryId(i,a)},this._removeAttribute=function(t){delete a[t],e.setByPrimaryId(i,a),this._sync()}}var r=g,n=i,s=a;return e.prototype={sync:function(){this._sync()},replaceUserId:function(e){this._replaceUserId(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},create:function(e,t){this._create(e,t)},init:function(e){this._init(e)},setAttrs:function(e){return this._setAttrs(e)},setDefault:function(e){return this._setAttr(r.IsDefault,e?1:0)},isDefault:function(){return this._getAttr(r.IsDefault,0)},isDeviceCounting:function(){return this._getAttr(r.DeviceCounting,0)},setDeviceCounting:function(e){return this._setAttr(r.DeviceCounting,e?1:0)},getRg:function(){return this._getAttr(r.RegistrationDate,null)},getLevel:function(){return this._getAttr(r.CurrentLevel,1)},setLevel:function(e){this._setAttr(r.CurrentLevel,e)},getPrimaryId:function(){return this._getPrimaryId()},getId:function(){return this._getAttr(r.UserId)},getDeviceId:function(){return this._getAttr(r.DeviceId)||this._getAttr(r.UserId)},getPrevDeviceId:function(){return this._getAttr(r.PrevDeviceId)},getSessionId:function(){return this._getAttr(r.SessionStarted)},resumeSession:function(){var e=Date.now();this._setAttr(r.LastForeground,e)},getSessionLength:function(){return this._getAttr(r.SessionLength,0)},newSession:function(e){var n;this._setAttrs((t(n={},r.SessionStarted,e),t(n,r.LastForeground,e),t(n,r.SessionLength,0),n))},incrementSession:function(){var e,n=Date.now(),i=Math.floor((n-this.getLastForeground())/1e3),a=this.getSessionLength();this._setAttrs((t(e={},r.SessionLength,a+i),t(e,r.LastForeground,n),e))},clearSessionLength:function(){this._setAttr(r.SessionLength,0)},getLastForeground:function(){return this._getAttr(r.LastForeground,0)},getPrevUserId:function(){return this._getAttr(r.PrevUserId)},setAttr:function(e,t){return this._setAttr(r[e],t)},getD2dId:function(){return this._getAttr(r.DevtodevId,null)},getD2dCrossId:function(){return this._getAttr(r.CrossPlatformDevtodevId,null)},getD2dTm:function(){return this._getAttr(r.DevtodevIdTimestamp,null)},clearBackendId:function(){this._setAttrs(this._clearBackendId({}))},haveBackendId:function(){return null!==this._getAttr(r.DevtodevIdTimestamp,null)},setIsUserPay:function(){this._setAttr(r.IsPayingUser,1)},canBalanceSentTime:function(){var e=this._getAttr(r.TimeSentBalance,0);return(new Date).getTime()>=e+144e5},refreshBalanceSentTime:function(){this._setAttr(r.TimeSentBalance,(new Date).getTime())},turnOffRef:function(){this._setAttr(r.ReferralSatus,0)},isTurnOnRef:function(){return this._getAttr(r.ReferralSatus,1)},getTutorialSteps:function(){return this._getAttr(r.TutorialSteps,[])},insertTutorStep:function(e){var t=this._getAttr(r.TutorialSteps,[]);t.push(e),this._setAttr(r.TutorialSteps,t)},setCA:function(e){var t=e[CA_SOURCE],n=v[e[CA_TYPE]],i=e[CA_CURRENCY_AMOUNT],a=e[CA_CURRENCY_NAME];e=this.getCA();s.isNullOrEmpty(e[n])&&(e[n]={}),s.isNullOrEmpty(e[n][t])&&(e[n][t]={}),s.isNullOrEmpty(e[n][t][a])&&(e[n][t][a]=0),e[n][t][a]+=i,this._setAttr(r.CurrencyAccrual,e)},getCA:function(){return this._getAttr(r.CurrencyAccrual,{})},clearCA:function(){this._removeAttribute(r.CurrencyAccrual)},isTracking:function(){return!!this._getAttr(r.Tracking,1)},setTracking:function(e){this._setAttr(r.Tracking,e?1:0)},getCard:function(){return this._getAttr(r.Profile,{})},getCardField:function(e){return this._getAttr([r.Profile,e],null)},clearCard:function(){this._removeAttribute(r.Profile)},clearCardChanges:function(){this._removeAttribute(r.UpdateProfile)},unsetCardField:function(e){var n=this.getCard(),i=this.getCardChanges();delete n[e],i[e]=null,this._setAttrs((t(e={},r.UpdateProfile,i),t(e,r.Profile,n),e))},setCardField:function(e,n){var i=this.getCard(),a=this.getCardChanges();i[e]=n,a[e]=n,this._setAttrs((t(n={},r.UpdateProfile,a),t(n,r.Profile,i),n))},isPayingUser:function(){return this._getAttr(r.IsPayingUser,!1)},getCardChanges:function(){return this._getAttr(r.UpdateProfile,{})},setAbConfig:function(e){var n;this._setAttrs((t(n={},r.Experiments,e.experiments),t(n,r.UserProperties,e.userProperties),n))},getUserPropery:function(){return this._getAttr(r.UserProperties,{})},setExperimentsForUser:function(e){return this._setAttr(r.UserExperiments,e)},removeExperimentsForUser:function(){this._removeAttribute(r.UserExperiments)},experiments:function(){return this._getExperiment()},setDefaultConfig:function(e){return this._setAttr(r.DefaultConfig,e)},getDefaultConfig:function(){return this._getAttr(r.DefaultConfig)},getRemoteConfig:function(){var e,t=this._getAttr(r.DefaultConfig);for(e in abConfig=this._getExperiment().getConfig(),abConfig)abConfig.hasOwnProperty(e)&&(t[e]=abConfig[e]);return t},getRemoteValue:function(e){return this.getRemoteConfig()[e]}},e}(),R=function(){"use strict";function e(e,t){r.call(this,e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}var t=g,r=P("users");return((e.prototype=Object.create(r.prototype)).constructor=e).prototype.setByPrimaryId=function(e,r){var n=this._get();void 0===n[e]&&(n[e]={}),n[e]=r,n[e][t.LastActive]=Date.now(),this._set(n)},e.prototype.lastActive=function(){var e,r=this._get(),n=null,i=0;for(e in r)r.hasOwnProperty(e)&&"pId"!==e&&(null==n&&(n=e),r[e][t.LastActive]>i&&(i=r[n=e][t.LastActive]));return n},e}(),N=function(){"use strict";function e(e,r,n){t.call(this,e,r,n)}var t=P("events"),r=_;return((e.prototype=Object.create(t.prototype)).constructor=e).prototype.get=function(){return this._get([])},e.prototype.add=function(e){var t=this._get([]),n=1;0!==t.length&&(n=t[t.length-1][r.PrimaryId]+1),e[r.PrimaryId]=n,t.push(e),this._set(t)},e.prototype.removeByPrimaryIds=function(e){for(var t=this._get([]),n=[],i=t.length-1;0<=i;i--)void 0===e[t[i][r.PrimaryId]]&&n.unshift(t[i]);this._set(n)},e.prototype.removeByPrimaryUserId=function(e){for(var t=this._get([]),n=[],i=t.length-1;0<=i;i--)t[i][r.PrimaryUserId]!==e&&n.unshift(t[i]);this._set(n)},e.prototype.getCountEventsByUser=function(e){for(var t=this._get([]),n=0,i=t.length-1;0<=i;i--)t[i][r.PrimaryUserId]===e&&n++;return n},e.prototype.getEventsByUser=function(e){for(var t=this._get([]),n=[],i=t.length-1;0<=i;i--)t[i][r.PrimaryUserId]===e&&n.unshift(t[i]);return n},e}(),L=function(){"use strict";function e(){}return e.prototype.setItem=function(e,t){this._driver.setItem(e,t)},e.prototype.getItem=function(e){return this._driver.getItem(e)},e.prototype.setDriver=function(e){this._driver=e},e.prototype.isAvailable=function(){return!!this._driver&&this._driver.isAvailable()},e.prototype.removeItem=function(e){return this._driver.removeItem(e)},e}(),V=function(){function e(e){var t=new L,r={};t.setDriver(e),this._init=function(e,n){r.app=new U(e,t,n),r.user=new R(e,t,n),r.event=new N(e,t)},this._getAdaper=function(e){return r[e]},this._isAvailable=function(){return t.isAvailable()}}return e.prototype.init=function(e){this._init(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})},e.prototype.getApp=function(e){return this._getAdaper("app")},e.prototype.getUser=function(e){return this._getAdaper("user")},e.prototype.getEvent=function(e){return this._getAdaper("event")},e.prototype.isAvailable=function(){return this._isAvailable()},e}();RemoteConfig=function(e,t){C=e,I=t,Object.defineProperty(this,"stringValue",{get:function(){return String(C)}}),Object.defineProperty(this,"doubleValue",{get:function(){return Number(C)}}),Object.defineProperty(this,"longValue",{get:function(){var e=Number(C);return e&&Math.floor(e)}}),Object.defineProperty(this,"booleanValue",{get:function(){return!!C}}),Object.defineProperty(this,"source",{get:function(){return I}})};DTDVerificationCondition=function(){var e="NOT IN",t=">=",n="<=",s=i,o=a;function u(){}return u.prototype.checkConditions=function(i,a){return o.isObject(i)?!s.findObj((function(i,s){switch(s){case"IN":case e:return!function(t,r,n){return!!o.isArray(r)&&(!(!o.isString(n)&&!o.isInteger(n))&&(n=-1<r.indexOf(n),t===e?!n:n))}(s,i,a);case"==":case"!=":return!function(e,t,r){return r=o.isEqual(t,r),"!="===e?!r:r}(s,i,a);case">":case"<":case t:case n:return!function(e,i,a){if(r(i)===r(a))if(o.isInteger(a))switch(e){case t:return i<=a;case">":return i<a;case"<":return a<i;case n:return a<=i}else if(o.isString(a)){var s=a.localeCompare(i);switch(e){case t:case">":return 0<=s;case"<":return s<0;case n:return s<=0}}return!1}(s,i,a);default:return!1}}),i):o.isEqual(i,a)},u}();var B=function(){function e(){var e,t=null,r={},n=[],i=0;function a(){return e.apply(this,arguments)}_clearAllTask=function(){r={},n=[]},_getNextTask=function(){if(0!==n.length&&n[0]<=parseInt(Date.now()/1e3)){var e=n[0];if(void 0!==r[e]){var t=r[e].shift();return 0===r[e].length&&(n.shift(),delete r[e]),t}}return null},_runTimer=(e=function(){clearTimeout(t);for(var e=_getNextTask();e;)e.run(),e=_getNextTask();t=setTimeout(_runTimer,1e3)},a.toString=function(){return e.toString()},a),this._addTask=function(e,t){-1===n.indexOf(e)&&(n.push(e),n.sort((function(e,t){return parseFloat(e)-parseFloat(t)})),r[e]=[]),r[e].push(t)},this._hasTask=function(e){for(var t=n.length-1;0<=t;t--)for(var i=r[n[t]].length-1;0<=i;i--)if(r[n[t]][i].id==e)return!0;return!1},this._removeTaskByKey=function(e){for(var t={},i=[],a=n.length-1;0<=a;a--){t[n[a]]=[];for(var s=r[n[a]].length-1;0<=s;s--)r[n[a]][s].id!=e&&t[n[a]].unshift(r[n[a]][s]);0==t[n[a]].length?delete t[n[a]]:i.unshift(n[a])}n=i,r=t},this._start=function(){0==i&&(i=1,t=setTimeout(_runTimer,0))},this._stop=function(){i=0,clearTimeout(t),_clearAllTask()},this.pause=function(){i=0,clearTimeout(t)}}return e.prototype.start=function(){this._start()},e.prototype.stop=function(){this._stop()},e.prototype.pause=function(){this._pause()},e.prototype.performTimedTask=function(e){this._addTask(e.deadline,e)},e.prototype.addTask=function(e){this._addTask(e.deadline,e)},e.prototype.hasTask=function(e){this._hasTask(e)},e.prototype.removeTaskByKey=function(e){this._removeTaskByKey(e)},e.prototype.ignoreTimer=function(e){},e}(),M=function(){function e(e,t,r){var n=Date.now();n+=t,this.deadline=parseInt(n/1e3),this._callback=e,this.id=r||this.deadline}return e.prototype.run=function(){this._callback()},e}(),z=function(){function e(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function t(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)}function r(){return window.document.fullscreenElement||window.document.mozFullscreenElement||window.document.webkitFullscreenElement}var n=u.getInstance();function i(i,a,s){function o(){n.debug("Event onBlur"),i()}function u(){n.debug("Event onFocus"),a()}function c(r){r?(t(window,"blur",o),t(window,"focus",u),n.debug("Event full screen")):(e(window,"blur",o),e(window,"focus",u),n.debug("Event normal screen")),s(r)}this._start=function(){e(window.document,"fullscreenchange",(function(){c(r())})),e(window.document,"mozfullscreenchange",(function(){c(r())})),e(window.document,"webkitfullscreenchange",(function(){c(r())})),e(window.document,"msfullscreenchange",(function(){c(r())})),e(window,"blur",o),e(window,"focus",u)}}return i.prototype.start=function(){this._start()},i}(),F=function(){"use strict";function e(){return!!q.isAllExcluded()&&(ce.info("All events are excluded by project configuration"),!0)}function r(){var e=(t(e={},DI_OS_VER,ve.getOsVer()),t(e,DI_DISPLAY_RESOLUTION,ve.getDisplayResolution()),t(e,DI_OS,ve.getOsName()),t(e,DI_UUID,q.getUUID()),t(e,DI_UA,ve.getUA()),t(e,DI_TZ,ve.getTzOffset()),e);return be(DI_CODE,e)}function n(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?X.getCard():X.getCardChanges();if(!re.isNullOrEmpty(e))return e=t({},PL_PARAMS,e),X.clearCardChanges(),be(PL_CODE,e)}function s(e){e={timestamp:Date.now(),cheater:e},be("ch",e)}function p(e){e={timestamp:Date.now(),tester:e},be("tstr",e)}function v(){if(X.isTracking()){for(var e in X.incrementSession(),oe.pause(),De(),_e)_e[e].pause();Z.pause(),J.pause(),W.stop()}}function C(e){e&&we()}function I(){X.incrementSession()}function D(){be(AL_CODE)}function P(){ce.debug("Currency accrual timer tick"),me()}function U(){De(),ke()}function O(e,t){de.validLevel(e,t)&&(X.getLevel()!=t?(me(),X.setLevel(t),ce.info('Level "{level}" is set successfully for user {user}',{level:X.getLevel(),user:X.getId()})):ce.info("The current level is equal to the new level [{level}]",{level:t}))}function R(e,t){de.validAppVer(e,t)&&(q.setAppVer(t),ce.info('App version "{version}" is set successfully',{version:q.getAppVer()}))}function N(){for(var e in r(),X.isTurnOnRef()&&(function(){if(X.isTurnOnRef())try{var e,t={utm_source:UTM_SOURCE,utm_medium:UTM_MEDIUM,utm_content:UTM_CONTENT,utm_campaign:UTM_CAMPAIGN,utm_term:UTM_TERM},r=!0,n={},i=window.document.URL;te.forEachObj((function(t,a){e=te.parseUrlParams(i,a),re.isNullOrEmpty(e)||(n[t]=e,r=!1)}),t),r||be(RF_CODE,n)}catch(t){}}(),me()),Pe(),_e)_e[e].reset();Te()}function L(e){if(!ue)throw"The SDK is not initialized yet!";return ue}function F(e){var t=X.isTracking();e!==t&&(t?(oe.start(),J.clear(),J.start(),Z.clear(),Z.start(),Q.start()):oe.stop())}function j(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=X.isTracking(),i="User '{newName}' has been activated";le.clear(),re.isNullOrEmpty(e)?(i="User '{newName}' has been created",t=r?q.getUUID():t,X.create(t,r)):(i="User '{newName}' has been activated",X.init(e)),ce.info(i,{newName:X.getId()}),F(n),X.isTracking()&&N()}function H(){G=new z(v,we,C);var e=new k;e.isAvailable()||(ce.info("Access to local storage not available"),(e=new T).isAvailable()||ce.info("Access to cookies not available")),(Y=new V(e)).isAvailable()||u.getInstance().info("Access to storage not available")}var Y,q,K,G,X,J,W,Z,Q,$=null,ee=E,te=i,re=a,ne=_,ie=l,ae=g,se=new w,oe=new B,ue=!1,ce=u.getInstance(),de=new b,le=new A,fe=function(e,r){function n(n,i,a,s,o,u){function c(e,t,r){if(p=(new Date).getTime(),_isNullOrEmpty(r)&&200===e)h=3,_isFunction(o)&&o(t),_attempt=0;else if(422===e)h=3,_attempt=0;else{var i=f;switch(202===e?(h=5,_retryTimeOutBack=t.retryAfter,i=_retryTimeOutBack,_attempt++):(_attempt=0,h=2),n){case"sdk":_logger.debug("Failed to get analytics configuration, using the default configuration and retrying after "+parseInt(i/1e3)+" seconds");break;case"d2dId":_logger.error("BackendIdentifiers unknown status code "+e)}_(i)}}function d(){var e=function(){var e=(t(e={},_DTDRequestHeader.DeviceId,a.getDeviceId()),t(e,_DTDRequestHeader.PreviousDeviceId,a.getPrevDeviceId()),t(e,_DTDRequestHeader.UserId,a.getId()),t(e,_DTDRequestHeader.PreviousUserId,a.getPrevUserId()),e);a.haveBackendId()&&(null!==a.getD2dCrossId()&&(e[_DTDRequestHeader.CrossPlatformDevtodevId]=a.getD2dCrossId()),e[_DTDRequestHeader.DevtodevId]=a.getD2dId());var r={headers:e,toBase64:[_DTDRequestHeader.DeviceId,_DTDRequestHeader.PreviousDeviceId,_DTDRequestHeader.UserId,_DTDRequestHeader.PreviousUserId]},o=[];switch(n){case"sdk":r.body={sdkVersion:i.getSdkVer(),appVersion:s.getAppVer(),excludeVersion:s.getExcludeVer(),sdkCodeVersion:i.getSdkVerCode()},o=["v2","analytics","config"];break;case"exp":o=["v2","remoteconfig","experiments"];break;case"offer":o=["v2","remoteconfig","offer"];break;case"d2dId":o=["v2","analytics","identification"],r.body={attempt:g}}return r.url=i.buildUrl(o,{appId:i.getAppId()}),r}();h=1,_isFunction(u)&&u(),r.run(n,e,c)}function l(){e.removeTaskByKey(n),r.stop(n)}var f=6e4,h=0,g=1,p=0,_=function(t){t=new M(d,t,n),e.removeTaskByKey(n),e.addTask(t)};this._pause=function(){-1!=[1,2].indexOf(h)&&(l(),h=4)},this._start=function(){var e;-1!=[0,4].indexOf(h)?d():5==h&&(0<(e=p+_retryTimeOutBack-(new Date).getTime())?_(e):d())},this._clear=function(){l(),h=0}}return _DTDRequestHeader=c,_isNullOrEmpty=a.isNullOrEmpty,_isFunction=a.isFunction,_logger=u.getInstance(),n.prototype={start:function(){this._start()},clear:function(){this._clear()},pause:function(){this._pause()}},n}(oe,se),he=function(e,r){var n=["language","sdkCodeVersion","sdkVersion","engine","appVersion"],s=i;function o(n,i,a,o){function u(t,n){e.hasTask(_key)&&(e.removeTaskByKey(_key),r.stop(_key),_logger.info("Report has been abort")),t=new M((function(){n()}),t,_key),e.addTask(t)}this._status=0,this._tempEvents={},this._checkedAbFreez=function(){var e=i.experiments().time()+o.getAbTimeout()-Date.now();0<e?u(e,this._run):this._run()},this._run=function(){if(0===this._status||0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&3!==this._status){var e,c=this._run,d=a.getEventsByUser(i.getPrimaryId()),l={},f=[],h=!0,g=(t(y={},_DTDRequestHeader.DeviceId,i.getDeviceId()),t(y,_DTDRequestHeader.PreviousDeviceId,i.getPrevDeviceId()),t(y,_DTDRequestHeader.UserId,i.getId()),t(y,_DTDRequestHeader.PreviousUserId,i.getPrevUserId()),i.haveBackendId()&&(null!==i.getD2dCrossId()&&(y[_DTDRequestHeader.CrossPlatformDevtodevId]=i.getD2dCrossId()),y[_DTDRequestHeader.DevtodevId]=i.getD2dId(),y[_DTDRequestHeader.DevtodevIdTimestamp]=i.getD2dTm()),{headers:y,auxiliary:{},toBase64:[_DTDRequestHeader.DeviceId,_DTDRequestHeader.PreviousDeviceId,_DTDRequestHeader.UserId,_DTDRequestHeader.PreviousUserId],url:n.buildUrl(["v2","analytics","report"],{appId:n.getAppId()})}),p=i.experiments(),_={},v=this,m=s.generateUUID();for(e in this._status=1,this._tempEvents)d.push(this._tempEvents[e]);this._tempEvents={};for(var y,E=0;E<Math.min(d.length,o.getCountForRequest());E++){var C=d[E],I=_getHash(C),b=C[_DTDEventStorage.PrimaryId],D=void 0!==C[_DTDEventStorage.Code]?C[_DTDEventStorage.Code]:C[_DTDEventStorage.Params][_DTDEventParams.Code],w=C[_DTDEventStorage.Params][_DTDEventParams.Timestamp];if((p.isOffer()||p.isExist())&&w>=p.time()&&p.time()+o.getAbTimeout()<Date.now()){u(p.time()+o.getAbTimeout()-Date.now(),c),this._status=2;break}_isNullOrEmpty(l[I])&&(l[I]=_createPackage(C),f.push(I)),void 0!==b&&(_[b]=b),h=!1,p.isMark()&&w>=p.time()&&-1===[DI_CODE].indexOf(D)&&(C[_DTDEventStorage.Params][_DTDEventParams.InExperiments]=p.experimentIds()),C[_DTDEventStorage.Params][_DTDEventParams.Code]=D,l[I].events.push(C[_DTDEventStorage.Params])}a.removeByPrimaryIds({}),h||(reports=(t(y={},"registrationDate",i.getRg()),t(y,"packages",[]),y),_forEach((function(e,t){reports.packages.push(l[e])}),f),g.body={reports:[reports]},g.auxiliary["Content UUID"]=m,_logger.info("Trying to send a report [{id}]",{id:m}),r.run(_key,g,(function(e,t,r){!function(e,t,r){r={id:r,status:e},_isNullOrEmpty(t)&&200===e?(a.removeByPrimaryIds(_),setTimeout((function(){v._run(!0)}),0),_logger.info("Report [{id}] has been sent successfully",r)):(u(15e3,c),v._status=0,_logger.error("Report [{id}] submission failed. Status code: {status}",r),_logger.debug("The network queue is stopped"))}(e,r,m)}))),2!==this._status&&(this._status=h?0:1)}}}return _forEach=s.forEach,_isNullOrEmpty=a.isNullOrEmpty,_DTDEventStorage=_,_DTDEventParams=E,_key="events",_DTDRequestHeader=c,_logger=u.getInstance(),_getHash=function(e){var t=[];return _forEach((function(r,n){_DTDEventStorage.hasOwnProperty(r)&&t.push(e[_DTDEventStorage[r]])}),n),t.join("_")},_createPackage=function(e){var t={events:[]};return _forEach((function(r,n){var i=_DTDEventStorage[r];_isNullOrEmpty(e[i])||(t[r]=e[i])}),n),t},o.prototype={start:function(){this._status=0},stop:function(){this._tempEvents={},this._status=3},add:function(e,t){this._tempEvents[e]=t},send:function(){0==this._status?this._run():2==this._status&&this._checkedAbFreez()}},o}(oe,se),ge=function(e){function t(t,r,n){this._delay=n,this._callback=r,this._key=t,this._status=0,this._abort=function(){0!==this._status&&e.removeTaskByKey(this._key)},this._run=function(){var t=new M(this._onResponse.bind(this),this._delay,this._key);e.addTask(t),this._status=1},this._onResponse=function(){this._run(),this._callback()}}return t.prototype={start:function(){0==this._status&&this._run()},reset:function(){this._abort(),this._status=0,this.start()},pause:function(){this._abort(),this._status=0},setDelay:function(e){this._delay=e,this.reset()}},t}(oe),pe=function(e,r){function n(e,t,r){if(r&&e===r[_eventKeys.Code]){var n=new DTDVerificationCondition;return!I((function(e,t){return!(t!==PL_PARAMS?n.checkConditions(e,r[t]):A(e,r[PL_PARAMS]))}),t)}}function s(){e.removeTaskByKey("clearAbTest"),g.removeExperimentsForUser()}function o(r){var i,a,o=g.experiments(),u=o.getExperiments(),d=[];if(!o.isActivated()&&!o.isOffer()){for(var l in u)u.hasOwnProperty(l)&&(!(i=null)!==(l=u[l]).isTesting&&(i=I((function(e){var t,i,a,s,o=e.code;return y.isNullOrEmpty(e.type)?o===PL_PARAMS?(a=e,!((s=_userModel.getUserCard())&&!D(a[PL_PARAMS])&&A(a[PL_PARAMS],s))):o===DI_CODE?!n(o,e,_deviceInfo):!n(o,e,r):"backend"===e.type?(e=e,t=new DTDVerificationCondition,i=g.getUserPropery(),!!I((function(e,r){var n=!0;switch(r){case C.Backend.Country:n=t.checkConditions(e,i[C.Backend.Country]);break;case C.Backend.Level:n=t.checkConditions(e,_userModel.getLevel());break;case C.Backend.PayingUser:n=t.checkConditions(e,_userModel.isPayingUser());break;case"type":n=!0;break;default:n=!1}return!n}),e)):void 0}),l.conditions||[])),D(i)&&d.push({id:l.id}));if(0<d.length&&!o.isActivated()&&!o.isOffer())return o.setAttrs((t(a={},E.Ids,d),t(a,E.Status,1),t(a,E.Time,(new Date).getTime()),a)),g.setExperimentsForUser(o.get()),o=new M(s,_.getAbTimeout(),"clearAbTest"),e.addTask(o),c(),1}}function c(){var e,n,i=g.experiments();i.isExist()&&(e=[],n=i.getExpiriments(),b((function(t,r){T(t.id,n)&&e.push(t.id)}),i.experimentIds()),0<e.length?new r("offer",v,g,_,(function(e){var r;e.involvedExperiments&&(i.setAttrs((t(r={},E.Ids,e.involvedExperiments),t(r,E.Status,2),r)),g.setExperimentsForUser(i.get()))}),{suitableExperiments:e}).start():g.removeExperimentsForUser())}function d(){var e,r=g.experiments().getExpiriments(),n=g.experiments().experimentIds(),i=[];D(n)||(e=g.experiments().isActivated(),b((function(e,t){T(e.id,r)&&i.push(e)}),n),0===i.length?g.removeExperimentsForUser():i.length!==n.length&&(userExperiments.setAttrs(t({},E.Ids,i)),g.setExperimentsForUser(userExperiments.get())),e!==g.experiments().isActivated()&&p())}var l,g,p,_,v,m,y=i,E=h,C=f,I=y.findObj,b=y.forEach,D=a.isNullOrEmpty,w=u.getInstance(),A=function(e,t){var r=new DTDVerificationCondition;return!I((function(e,n){var i;return!(i=n!==PL_PARAMS?r.checkConditions(e,t[n]):i)}),e)},T=function(e,t){return!!t[e]&&(t[e].completionDate>Date.now()||t[e].isTesting)};return(m=function(e,t,n){l=new r("exp",v=n,g=e,_=t,(function(e){_remoteManager.setAbConfig(e)}))}).prototype={fetch:function(e){l.clear(),l.start(),p=e},checkingCondition:function(e){o(e)},start:function(){var t;g.experiments().isExist()||g.experiments().isOffer()?(t=(new Date).getTime()-g.experiments().time())>=_.getAbTimeout()?s():(t=new M(s,_.getAbTimeout()-t,"clearAbTest"),e.addTask(t)):g.experiments().isActivated()},activated:function(){var r;d(),g.experiments().isOffer()?(r=g.experiments(),e.removeTaskByKey("clearAbTest"),r.setAttrs(t({},E.Status,3)),g.setExperimentsForUser(r.get()),w.info("Start experiment "+JSON.stringify(_userModel.getExpiriments()))):g.experiments().isActivated()&&w.info("Experiment already started")},setAbConfig:function(e){_userModel.setAbConfig(e),d(),o()}},m}(oe,fe),_e={},ve=o.getInstance(),me=function(){var e=X.getCA();re.isNullOrEmpty(e)||be(CA_CODE,e)},ye=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Date.now();return e===SS_CODE&&(n=X.getSessionId()),r[ee.Timestamp]=n,r[ee.Code]=e,t(n={},ne.PrimaryUserId,X.getPrimaryId()),t(n,ne.language,ve.getLanguage()),t(n,ne.appVersion,q.getAppVer()),t(n,ne.sdkVersion,ve.getSdkVer()),t(n,ne.sdkCodeVersion,ve.getSdkVerCode()),t(n,ne.engine,ve.getEngine()),t(n,ne.Code,e),n=te.filterObj((function(e,t){return!re.isNullOrEmpty(e)}),n),re.isNullOrEmpty(le.getLocation())||-1!==[DI_CODE,PL_CODE,RF_CODE,PE_CODE,AL_CODE,CA_CODE,CB_CODE,"tstr","ch"].indexOf(e)||(r.inProgress=[le.getLocation()]),-1===[DI_CODE,TS_CODE,LU_CODE,AL_CODE,RF_CODE,ADRV_CODE].indexOf(e)&&(r[ee.Level]=X.getLevel()),-1===[DI_CODE,TS_CODE,SS_CODE,AL_CODE].indexOf(e)&&(r[ee.SessionId]=X.getSessionId()),n[ne.Params]=r,n},Ee=function(e,t){switch(e){case DI_CODE:break;case LU_CODE:X.setLevel(t[LU_LEVEL]);break;case TR_CODE:X.insertTutorStep(t[TR_STEP]);break;case RP_CODE:q.addTransactionId(t[RP_ORDER_ID]),X.setIsUserPay(!0);break;case CB_CODE:X.refreshBalanceSentTime()}},Ce=function(e,t){var r=X.isTracking();switch(e){case TS_CODE:t[TS_ALLOWED]||(K.removeByPrimaryUserId(X.getPrimaryId()),X.clearCA(),X.clearBackendId(),De(),n()),X.setTracking(t[TS_ALLOWED]);break;case LU_CODE:r&&me();break;case CA_CODE:r&&X.clearCA();break;case RF_CODE:r&&X.turnOffRef()}},Ie=function(t,r){if(!e())return t!==RF_CODE||X.isTurnOnRef()?t!==CB_CODE||X.canBalanceSentTime()?t===LU_CODE&&X.getLevel()==r[LU_LEVEL]?(ce.info("The current level is equal to the new level [{level}]",{level:r[LU_LEVEL]}),!1):!de.isExcluded(q.getEventsExcluded(),t,r):(ce.info("The CurrentBalance event has already been sent less than 4 hours ago."),!1):(ce.info("Referral data of the current user is already sent"),!1)},be=function(e,t){if(t=de.validEvent(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"system",{steps:X.getTutorialSteps(),trIds:q.getTransactionIds(),maxCeParams:q.getMaxEventParams()}),e!=TS_CODE&&!X.isTracking())return ce.info("Event [{code}] not created. Tracking is Disabled",{code:e}),void Ee(e,t);var r,n=!1;Ie(e,t)&&(Ce(e,t),n=-1!==[RP_CODE,TS_CODE,AL_CODE,LU_CODE,"tstr","ch"].indexOf(e),r=ye(e,t),ce.info("Create new event: "+JSON.stringify(r[ne.Params],null,2)),e===AL_CODE?W.add(e,r):K.add(r),Ee(e,t),(n||Ae()>=q.getCountForRequest())&&ke())},De=function(){var e;0<X.getSessionLength()?(e=t({},UE_LN,X.getSessionLength()),X.clearSessionLength(),be(UE_CODE,e)):ce.debug("The user engagement event was not generated, session length is zero")},we=function(){if(q.sync(),X.sync(),X.isTracking()){for(var e in oe.start(),_e)_e[e].start();Pe(),J.start(),X.haveBackendId()||Z.start()}W.start(),Te()},Ae=function(){var e=K.getCountEventsByUser(X.getPrimaryId()),t=X.getCardChanges();return re.isNullOrEmpty(t)||e++,e},Te=function(){0<Ae()&&ke()},ke=function(){X.isTracking()&&(n(),me()),W.send()},Pe=function(){var e=Date.now();X.getSessionId()&&e-X.getLastForeground()<q.getSessionTimeout()?(X.resumeSession(),ce.debug("Resume session {sessionId} for user {user}",{sessionId:X.getSessionId(),user:X.getId()})):(0<X.getSessionLength()&&De(),X.newSession(e),ce.debug("Start new session {sessionId} for user {user}",{sessionId:X.getSessionId(),user:X.getId()}),be(SS_CODE))};return H.prototype.getStorage=function(){return Y},H.prototype.close=function(){ue=!1},H.prototype.init=function(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return function(i){var a={appId:i=de.validAppId(e,r),ver:ve.getSdkVer()};if(void 0!==n[ie.LogLevel]&&(ce.setLogLevel(n[ie.LogLevel]),delete n[ie.LogLevel]),ue)throw"SDK is already initialized";ve.isBot()||ve.useXDR()?("DTDAnalytics SDK is not initialised with key '{appId}' and version '{ver}'",ve.isBot()||ve.useXDR()||ce.info("DTDAnalytics SDK is not initialised with key '{appId}' and version '{ver}'",a)):(ve.setAppId(i),Y.init(ve.getAppId(),{base64:ve.isBase64()}),q=new S(Y.getApp()),X=new x(Y.getUser()),K=Y.getEvent(),_e.session=new ge("session",I,5e3),_e.alive=new ge("alive",D,q.getAliveTimeout()),_e.queue=new ge("queue",U,q.getTimeForRequest()),_e.ca=new ge("ca",P,q.getCATimeout()),W=new he(ve,X,K,q,5e3),J=new fe("sdk",ve,X,q,(function(e){q.setConfigSdk(e),_e.alive.setDelay(q.getAliveTimeout()),_e.ca.setDelay(q.getCATimeout()),_e.queue.setDelay(q.getTimeForRequest()),ce.debug("The SDK analytics configuration has been received: "+JSON.stringify(e,null,2))}),(function(){ce.debug("Try get analytics configuration from server")})),Z=new fe("d2dId",ve,X,q,(function(e){var t,r=d;for(t in r)r.hasOwnProperty(t)&&void 0!==e[r[t]]&&X.setAttr(t,e[r[t]]);var n=ve.getCallbackDId(),i=X.getD2dId(),a=X.getD2dTm(),s="For user [{userId}] updated backendIdentifiers are: \r\ndevtodevId {devtodevId} \r\ndevtodevIdTimestamp: {d2dTimId}";a={userId:X.getDeviceId(),devtodevId:i,d2dTimId:a};X.getD2dCrossId()&&(s+="\r\ncrossPlatformDevtodevId: {cDevtodevId}",a.cDevtodevId=X.getD2dCrossId()),ce.debug(s,a),null!==n&&n(i)})),Q=new pe(X,q,ve),ce.info("DTDAnalytics SDK is initialised with key '{appId}' and version '{ver}'",a),function(e){var r=null,n="Initialize";void 0!==e[ie.UserId]&&(r=de.validUserId("Initialize",e[ie.UserId]));var i,a=re.isNullOrEmpty(r)?1:0,s=Y.getUser().lastActive();(a=a||r==q.getUUID())&&(r=q.getUUID()),re.isNullOrEmpty(s)?(X.create(r,a),ce.debug("It is clean SDK start")):a?X.init(s):(i=Y.getUser().findPrimaryIdByCondition(t({},ae.UserId,r)),re.isNullOrEmpty(i)?(X.init(s),X.isDefault()||X.isDeviceCounting()?X.replaceUserId(r):X.create(r,a)):X.init(i)),void 0!==e[ie.Tracking]&&(a=e[ie.Tracking],i=X.isTracking(),de.validTraking(n,a)&&(i===a&&!1!==a||be(TS_CODE,t({},TS_ALLOWED,a)))),void 0!==e[ie.CurrentLevel]&&O(n,e[ie.CurrentLevel]),void 0!==e[ie.AppVersion]&&R(n,e[ie.AppVersion])}(n),ue=!0,G.start(),X.isTracking()?(oe.start(),J.start(),Z.start(),Q.start(),N()):ce.info("DTDAnalytics not active! Tracking status is Disable!",a),X.isDeviceCounting()&&X.setDeviceCounting(0))}(r)},H.prototype.setLevel=function(e,t){L()&&O(e,t)},H.prototype.sendEvents=function(){L()&&Te()},H.prototype.addEvent=function(e,t,r){L()&&be(t,r,e)},H.prototype.setTracking=function(e,r){var i;L()&&de.validTraking(e,r)&&(i="Tracking status is already {status}",r!==(e=X.isTracking())&&(be(TS_CODE,t({},TS_ALLOWED,r),!0),F(e),X.isTracking()&&(N(),n(!0)),i="Tracking status is {status}"),ce.info(i,{status:X.isTracking()?"Enable":"Disable"}))},H.prototype.setUserId=function(e,r){if(L()){var n,i,a=de.validUserId(e,r),s=null===a?1:0,o=!1;if(re.isNullOrEmpty(a)&&""!==r?o=!(n="UserId is empty"):s==X.isDefault()&&s?n="It's already default user!":a===X.getId()?n="The current userId is equal to the new userId [{user}]":(i={newUser:s?"":a,oldUser:X.getId()},o=!0,X.isDefault()?(X.replaceUserId(a,!1),ce.info("User '{oldUser}' has been renamed to '{newUser}'",i)):(De(),e=t({},ae.UserId,a),s&&(e=t({},ae.IsDefault,1)),e=Y.getUser().findPrimaryIdByCondition(e),ce.info("The userId '{oldUser}' changed to '{newUser}'",i),j(e,a,s)),X.haveBackendId()||(Z.clear(),Z.start())),!o)throw ce.warning(n,{user:r}),null}},H.prototype.setAppVer=function(e,t){var r;L()&&(r=q.getAppVer(),R(e,t),X.isTracking()&&r!=q.getAppVer()&&(J.clear(),J.start()))},H.prototype.replaceUserId=function(e,n,i){if(L()){var a=de.validReplaceId(e,n,i),s=(n=a.prevId,i=a.id,"The fromUserId is equal to the toUserId [{id}]!"),o=!1,u=t({},ae.UserId,n);if(re.isNullOrEmpty(n)&&(u=t({},ae.IsDefault,1)),(e=Y.getUser().findPrimaryIdByCondition(u))!=(n=Y.getUser().findPrimaryIdByCondition(t({},ae.UserId,i)))&&(s=re.isNullOrEmpty(e)?"The userId: [{prevId}] not found!":(e!=X.getPrimaryId()?n==X.getPrimaryId()?(j(e),X.replaceUserId(i,!1)):((u=new x(Y.getUser())).init(e),u.replaceUserId(i,!1)):(X.replaceUserId(i,!1),r()),re.isNullOrEmpty(n)||(K.removeByPrimaryUserId(n),Y.getUser().removeByPrimaryId(n)),o=!0,"User '{prevId}'renamed to '{id}'")),a={prevId:a.prevId||"",id:a.id},!o)throw ce.warning(s+" Replace not possible!",a),null;ce.info(s,a),X.haveBackendId()||(Z.clear(),Z.start())}},H.prototype.setCA=function(e,t,r,n,i){L()&&X.isTracking()&&(i=de.validCA(e,t,r,n,i,X.getCA()),X.setCA(i),ce.info("Set currency accrual: {data}",{data:JSON.stringify(X.getCA())}))},H.prototype.startPe=function(t,r){L()&&(t=de.validStartPe(t,r,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),r=PE_CODE,e()||de.isExcluded(q.getEventsExcluded(),r,t)||le.start(t.name,t))},H.prototype.stopPe=function(t,r){L()&&(t=de.validStopPe(t,r,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),r=PE_CODE,e()||de.isExcluded(q.getEventsExcluded(),r,t)||!1!==(t=le.finish(t.name,t))&&be(r,t))},H.prototype.setDefaultConfig=function(e){X.setDefaultConfig(e)},H.prototype.getDefaultConfig=function(){return X.getDefaultConfig()},H.prototype.fetchExperiments=function(e){Q.fetch(e)},H.prototype.activateFetchedExperiments=function(){Q.activated()},H.prototype.getAbConfig=function(){return X.experiments().getConfig()},H.prototype.getRemoteConfig=function(){return X.getRemoteConfig()},H.prototype.getRemoteValue=function(e){return e=X.getRemoteValue(e),new RemoteConfig(e,y)},H.prototype.getter=function(e){if(L())switch(e){case"appVer":return q.getAppVer();case"userId":return X.getId();case"level":return X.getLevel();case"tracking":return X.isTracking();case"deviceId":return X.getDeviceId();case"sdkVer":return ve.getSdkVer();default:return null}},H.prototype.getCardField=function(e,t){if(L())return t=de.validPlKey(e,t),X.getCardField(t)},H.prototype.setCardField=function(e,t,r){var n;L()&&(n=de.validPlKey(e,t),e=de.validPlVal(e,n,r),r=X.getCard(),n===m.Cheater?s(e):n===m.Tester?p(e):void 0!==r[t]&&r[t]==e||(X.setCardField(n,e),ce.info("[User Card] Value ["+e+"] for the key ["+n+"] was set successfully")))},H.prototype.unsetCardField=function(e,t){L()&&(t=re.isArray(t)?t:[t],te.forEach((function(t){null!==(t=de.validPlKey(e,t,!1))&&(t===m.Cheater?s(!1):t===m.Tester?p(!1):X.unsetCardField(t))}),t),ce.info("User data has been successfully removed from the user profile",{}))},H.prototype.cleareCard=function(){var e;L()&&(e=PL_CODE,X.clearCard(),X.clearCardChanges(),ce.info("All user data has been cleared successfully",{event:e}),be(e,t({},PL_PARAMS,null)))},H.prototype.setCallbackDId=function(e){var t;ve.setCallbackDId(e),ue&&(t=X.getD2dId(),e=ve.getCallbackDId(),re.isNullOrEmpty(t)||re.isNullOrEmpty(e)||e(t))},H.prototype.setSDKVer=function(e,t){de.validAppVer(e,t)&&(ve.setSdkVer(t),ce.info('SDK version "{val}" is set successfully',{val:ve.getSdkVer()}))},H.prototype.setSDKVerCode=function(e,t){de.validSdkCode(e,t)&&(ve.setSdkVerCode(t),ce.info('SDK version code "{val}" is set successfully',{val:ve.getSdkVerCode()}))},H.prototype.getUser=function(){return X},H.prototype.getApp=function(){return q},{getInstance:function(){return $=$||new H}}}();DTDRemoteConfig=function(){var e;function t(t){e=t,Object.defineProperty(this,"defaults",{get:function(){return{}},set:function(e){}}),Object.defineProperty(this,"remote",{get:function(){return{}}}),Object.defineProperty(this,"abtest",{get:function(){return{}}})}return t.prototype.configValue=function(t){return e.getRemoteValue(t)},t.prototype.fetch=function(e){},t.prototype.activateFetched=function(){e.activateFetchedExperiments(),e.sendEvents()},t}(),DTDUserCard=function(){function e(e,t){null!==e&&(e=MES_PREFIX+e,r.error(e,{method:t})),r.error("Execution of the {method} method was canceled!",{method:t})}var t,r=u.getInstance(),n=m;function i(e){t=e}return i.prototype.getName=function(){var r="getName";try{return t.getCardField(r,n.Name)}catch(t){e(t,r)}},i.prototype.setName=function(r){var i="setName";try{t.setCardField(i,n.Name,r)}catch(r){e(r,i)}},i.prototype.getEmail=function(){var r="getEmail";try{return t.getCardField(r,n.Email)}catch(t){e(t,r)}},i.prototype.setEmail=function(r){var i="setEmail";try{t.setCardField(i,n.Email,r)}catch(r){e(r,i)}},i.prototype.getPhone=function(){var r="getPhone";try{return t.getCardField(r,n.Phone)}catch(t){e(t,r)}},i.prototype.setPhone=function(r){var i="setPhone";try{t.setCardField(i,n.Phone,r)}catch(r){e(r,i)}},i.prototype.getPhoto=function(){var r="getPhoto";try{return t.getCardField(r,n.Photo)}catch(t){e(t,r)}},i.prototype.setPhoto=function(r){var i="setPhoto";try{t.setCardField(i,n.Photo,r)}catch(r){e(r,i)}},i.prototype.getGender=function(){var r="getGender";try{return t.getCardField(r,n.Gender)}catch(t){e(t,r)}},i.prototype.setGender=function(r){var i="setGender";try{t.setCardField(i,n.Gender,r)}catch(r){e(r,i)}},i.prototype.getAge=function(){try{return t.getCardField("getAge",n.Age)}catch(t){e(t,"getAge")}},i.prototype.setAge=function(r){try{t.setCardField("setAge",n.Age,r)}catch(r){e(r,"setAge")}},i.prototype.setTester=function(r){var i="setTester";try{t.setCardField(i,n.Tester,r)}catch(r){e(r,i)}},i.prototype.setCheater=function(r){var i="setCheater";try{t.setCardField(i,n.Cheater,r)}catch(r){e(r,i)}},i.prototype.set=function(r,n){try{t.setCardField("set",r,n)}catch(r){e(r,"set")}},i.prototype.getValue=function(r){var n="getValue";try{return t.getCardField(n,r)}catch(r){e(r,n)}},i.prototype.unset=function(r){try{t.unsetCardField("unset",r)}catch(r){e(r,"unset")}},i.prototype.clearUser=function(){try{t.cleareCard()}catch(t){e(t,"clearUser")}},i}();var j=function(){function e(e,t){null!==e&&(e=MES_PREFIX+e,n.error(e,{method:t})),n.error("Execution of the {method} method was canceled!",{method:t})}var r=o.getInstance(),n=u.getInstance(),i=F.getInstance(),s=new DTDRemoteConfig(i),c=a;function d(e){r.setEnv(e),Object.defineProperty(this,"logLevel",{get:function(){return n.getLogLevel()},set:function(e){n.setLogLevel(e)}}),Object.defineProperty(this,"user",{get:function(){return new DTDUserCard(i)}}),Object.defineProperty(this,"remoteConfig",{get:function(){return s}})}return d.prototype.initialize=function(t,r){var n="Initialize";try{i.init(n,t,r)}catch(t){e(t,n)}},d.prototype.getAppVersion=function(){try{return i.getter("appVer")}catch(t){e(t,"getAppVersion")}},d.prototype.setAppVersion=function(t){var r="setAppVersion";try{i.setAppVer(r,t)}catch(t){e(t,r)}},d.prototype.getUserId=function(){try{return i.getter("userId")}catch(t){e(t,"getUserId")}},d.prototype.setUserId=function(t){var r="SetUserId";try{i.setUserId(r,t)}catch(t){e(t,r)}},d.prototype.getCurrentLevel=function(){try{return i.getter("level")}catch(t){e(t,"getCurrentLevel")}},d.prototype.setCurrentLevel=function(t){var r="SetCurrentLevel";try{i.setLevel(r,t)}catch(t){e(t,r)}},d.prototype.setTrackingAvailability=function(t){var r="SetTrackingAvailability";try{i.setTracking(r,t)}catch(t){e(t,r)}},d.prototype.getTrackingAvailability=function(){try{return i.getter("tracking")}catch(t){e(t,"getTrackingAvailability")}},d.prototype.getDeviceId=function(){try{return i.getter("deviceId")}catch(t){e(t,"getDeviceId")}},d.prototype.getSDKVersion=function(){try{return i.getter("sdkVer")}catch(t){e(t,"getSDKVersion")}},d.prototype.socialNetworkConnect=function(r){var n="SocialNetworkConnect";try{i.addEvent(n,SC_CODE,t({},SC_NET,r))}catch(r){e(r,n)}},d.prototype.socialNetworkPost=function(r,n){var a,s="SocialNetworkPost";try{i.addEvent(s,SP_CODE,(t(a={},SP_NET,r),t(a,SP_REASON,n),a))}catch(r){e(r,s)}},d.prototype.tutorial=function(r){var n="Tutorial";try{i.addEvent(n,TR_CODE,t({},TR_STEP,r))}catch(r){e(r,n)}},d.prototype.realCurrencyPayment=function(r,n,a,s){var o,u="realCurrencyPayment";try{i.addEvent(u,RP_CODE,(t(o={},RP_PRICE,n),t(o,RP_ORDER_ID,r),t(o,RP_PRODUCT_ID,a),t(o,RP_CURRENCY,s),o))}catch(r){e(r,u)}},d.prototype.virtualCurrencyPayment=function(r,n,a){var s="virtualCurrencyPayment",o=arguments.length<=3?0:arguments.length-3,u=(t(u={},VP_PURCHASE_ID,r),t(u,VP_PURCHASE_TYPE,n),t(u,VP_PURCHASE_AMOUNT,a),u);0<o&&(1==o&&c.isObject(arguments.length<=3?void 0:arguments[3])?u.r=arguments.length<=3?void 0:arguments[3]:(u.p=arguments.length<=3?void 0:arguments[3],u.c=arguments.length<=4?void 0:arguments[4]));try{i.addEvent(s,VP_CODE,u)}catch(r){e(r,s)}},d.prototype.customEvent=function(r){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s="customEvent";try{i.addEvent(s,CE_CODE,(t(n={},CE_NAME,r),t(n,CE_PARAMS,a),n))}catch(r){e(r,s)}},d.prototype.levelUp=function(r,n,a,s,o){var u,c="levelUp";try{i.addEvent(c,LU_CODE,(t(u={},LU_LEVEL,r),t(u,LU_BOUGHT,o),t(u,LU_BALANCE,n),t(u,LU_SPENT,a),t(u,LU_EARND,s),u))}catch(r){e(r,c)}},d.prototype.currencyAccrual=function(t,r,n,a){var s="currencyAccrual";try{i.setCA(s,t,r,n,a)}catch(t){e(t,s)}},d.prototype.replaceUserId=function(t,r){var n="replaceUserId";try{i.replaceUserId(n,t,r)}catch(t){e(t,n)}},d.prototype.startProgressionEvent=function(t,r){var n="startProgressionEvent";try{i.startPe(n,t,r)}catch(t){e(t,n)}},d.prototype.finishProgressionEvent=function(t,r){var n="finishProgressionEvent";try{i.stopPe(n,t,r)}catch(t){e(t,n)}},d.prototype.referrer=function(t){var r="Referrer";try{i.addEvent(r,RF_CODE,t)}catch(t){e(t,r)}},d.prototype.sendBufferedEvents=function(){try{i.sendEvents()}catch(t){e(t,"sendBufferedEvents")}},d.prototype.setIdentifiersListener=function(e){i.setCallbackDId(e)},d.prototype.adImpression=function(r,n,a,s){var o,u="adImpression";try{i.addEvent(u,ADRV_CODE,(t(o={},ADRV_NETWORK,r),t(o,ADRV_UNIT,s),t(o,ADRV_REVENUE,n),t(o,ADRV_PLACEMENT,a),o))}catch(r){e(r,u)}},d.prototype.setSDKVersion=function(t){var r="setSDKVersion";try{i.setSDKVer(r,t)}catch(t){e(t,r)}},d.prototype.setSDKVersionCode=function(t){var r="setSDKVersionCode";try{i.setSDKVerCode(r,t)}catch(t){e(t,r)}},d.prototype.onDebugMessage=function(e){n.setCallback(e)},d.prototype.testLogs=function(){n.error("this is error message"),n.warning("this is warning message"),n.info("this is info message"),n.debug("this is debug message")},d.prototype.currentBalance=function(t){var r="currentBalance";try{i.addEvent(r,CB_CODE,t)}catch(t){e(t,r)}},d}(),H=(function(){"use strict";function e(){j.call(this,{base64:!1}),Object.defineProperty(this,"testProxyUrl",{get:function(){return t.getApiUrl()},set:function(e){t.setApiUrl(e)}}),Object.defineProperty(this,"testCustomUrl",{get:function(){return t.getTestCustomUrl()},set:function(e){t.setTestCustomUrl(e)}})}var t=o.getInstance();(e.prototype=Object.create(j.prototype)).constructor=e}(),function(){"use strict";function e(e,t){return void 0===e||""==e||t==e}function r(e){j.call(this,e)}var n=F.getInstance(),i=o.getInstance(),s=g,u=a;return((r.prototype=Object.create(j.prototype)).constructor=r).prototype._migration=function(e,r,a,o,c){i.setAppId(e);var d=n.getStorage(),l=g,f=p;d.init(i.getAppId(),{base64:i.isBase64()});var h=new S(d.getApp());e=new x(d.getUser());if(h.isMigration())_logger.warning("Already migration");else if(d=d.getUser().findPrimaryIdByCondition(t({},s.UserId,r)),u.isNullOrEmpty(d)){e.create(r,a);var _,v=t({},l.DeviceCounting,o),m=t({},f.IsMigration,1);for(_ in c)if(!u.isNullOrEmpty(c[_]))switch(_){case"prevUserId":v[l.PrevUserId]=c[_],v[l.PrevDeviceId]=c[_];break;case"trackingAvailable":v[l.Tracking]=c[_];break;case"level":v[l.CurrentLevel]=c[_];break;case"userCard":v[l.Profile]=c[_];break;case"tutorCompletedSteps":v[l.TutorialSteps]=c[_];break;case"transactionIds":m[f.TransactionIds]=c[_]}e.setAttrs(v),h.setAttrs(m)}else _logger.warning("User not empty")},r.prototype.migrationUser=function(t,r){var n,i;void 0!==t&&void 0!==r&&(void 0!==(r=JSON.parse(r)).deviceId&&(i=r.deviceId),void 0!==r.userId&&(n=r.userId),i=e(n,i),this._migration(t,n,i,0,r))},r.prototype.migrationDevice=function(t,r){var n,i;void 0!==t&&void 0!==r&&(void 0!==(r=JSON.parse(r)).deviceId&&(n=r.deviceId),void 0!==r.userId&&(i=r.userId),i=e(i,n),delete r.prevUserId,this._migration(t,n,i,1,r))},r}());!function(){"use strict";function e(){H.call(this,{engine:"unity"}),Object.defineProperty(this,"testProxyUrl",{get:function(){return t.getApiUrl()},set:function(e){t.setApiUrl(e)}}),Object.defineProperty(this,"testCustomUrl",{get:function(){return t.getTestCustomUrl()},set:function(e){t.setTestCustomUrl(e)}})}var t=o.getInstance(),r=F.getInstance();((e.prototype=Object.create(H.prototype)).constructor=e).prototype.close=function(){r.close()},e.prototype.getClient=function(){return r}}();window.devtodev=new j}();