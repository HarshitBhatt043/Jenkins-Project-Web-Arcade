!function(t){function e(e){for(var s,o,r=e[0],h=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s]);for(c&&c(e);p.length;)p.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var h=i[r];0!==a[h]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},a={main:0},n=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var c=h;n.push([0,"vendors"]),i()}({"./src/scripts/game.ts":
/*!*****************************!*\
!*** ./src/scripts/game.ts ***!
\*****************************/
/*!no static exports found*/function(t,e,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&s(e,t,i);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(i(/*!phaser*/"./node_modules/phaser/dist/phaser.js")),h=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js"),l=o(i(
/*!./scenes/mainScene*/"./src/scripts/scenes/mainScene.js")),c=o(i(
/*!./scenes/preloadScene*/"./src/scripts/scenes/preloadScene.js")),d=o(i(
/*!./scenes/preLoadingScene*/"./src/scripts/scenes/preLoadingScene.js")),p=Object.assign({type:r.WEBGL,transparent:!0,scale:{mode:r.Scale.FIT,autoCenter:r.Scale.CENTER_BOTH,width:1280,height:768},parent:"phaser-canvas",fps:{target:60,forceSetTimeOut:!0},audio:{disableWebAudio:!1},scene:[d.default,c.default,l.default],backgroundColor:"#000000"},h.Canvas());window.addEventListener("load",(()=>{h.enable3d((()=>new r.Game(p))).withPhysics("assets/ammo")}))},"./src/scripts/gameobjects/Blade.js":
/*!******************************************!*\
!*** ./src/scripts/gameobjects/Blade.js ***!
\******************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return c}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js"),a=(i.n(s),"HomeScreen"),n=!1,o=!1,r=!1,h=!1,l=!1;class c{constructor(t){this.scene=t,this.points=[],this.slashes=this.scene.add.graphics(0,0),this.slashes2=this.scene.add.graphics(0,0),this.slashes3=this.scene.add.graphics(0,0),this.slashes4=this.scene.add.graphics(0,0),this.slashes.setDepth(2),this.slashes2.setDepth(2),this.slashes3.setDepth(2),this.slashes4.setDepth(2),this.create(),this.lastTimeStamp=0,this.SliceEffect=i(
/*!./../gameobjects/SliceEffect.js*/"./src/scripts/gameobjects/SliceEffect.js").default,this.poolSliceEffect=[],this.activeSliceEffect=[];for(let t=0;t<10;t++){let t=new this.SliceEffect(this.scene,0,0,"SliceDiamondNeutral");t.deactivate(),this.poolSliceEffect.push(t)}this.SliceCriticalEffect=i(
/*!./../gameobjects/SliceCriticalEffect.js*/"./src/scripts/gameobjects/SliceCriticalEffect.js").default,this.poolSliceCriticalEffect=[],this.activeSliceCriticalEffect=[];for(let t=0;t<10;t++){let t=new this.SliceCriticalEffect(this.scene,0,0);t.deactivate(),this.poolSliceCriticalEffect.push(t)}}async create(){}changeCurrentScreen(t){a=t}getCurrentScreen(){return a}changeClickedHomeClassic(t){n=t}getClickedHomeClassic(){return n}changeClickedHomeSetting(t){o=t}getClickedHomeSetting(){return o}changeClickedSettingBack(t){r=t}getClickedSettingBack(){return r}changeClickedResultQuit(t){h=t}getClickedResultQuit(){return h}changeClickedResultRetry(t){l=t}getClickedResultRetry(){return l}createBlade(t,e,i,s){t.clear();if(e.length>2){t.lineStyle(1,16776960,1),t.beginPath(),t.lineStyle(0,16776960,1),t.moveTo(e[0].x,e[0].y);for(var a=1;a<e.length-2;++a){var n=e[a];this.linearInterpolation(a/(e.length-2),0,i);t.lineStyle(this.linearInterpolation(a/(e.length-2),0,i),s,1),t.lineTo(n.x,n.y)}var o=0;for(a=e.length-2;a<e.length;++a){n=e[a];o+=1;let r=this.linearInterpolation(o/2,i,3);t.lineStyle(r,s,1),t.lineTo(n.x,n.y)}t.strokePath(),t.closePath()}}updateBlade(t){let e=this.points;this.createBlade(this.slashes,this.points,48,4281978),this.createBlade(this.slashes2,this.points,40,8229285),this.createBlade(this.slashes3,this.points,32,13230039),this.createBlade(this.slashes4,this.points,24,16777215);let i=!1;this.lastTimeStamp-=t;for(var s=0;s<e.length;++s){var a=e[s];if(a.first){if(s>0){let t=a.x-e[s-1].x,n=a.y-e[s-1].y;Math.sqrt(t*t+n*n)>50&&!i&&this.lastTimeStamp<=0&&(this.scene.SFXMuted||this.scene.sound.play("BladeRegularSwipe0"+Phaser.Math.Between(1,7)),this.lastTimeStamp=200,i=!0)}a.first=!1}a.time-=.5,a.time<=0&&(e.splice(s,1),s-=1)}for(let t=0;t<this.activeSliceEffect.length;t++)0==this.activeSliceEffect[t].visible&&(this.poolSliceEffect.push(this.activeSliceEffect[t]),this.activeSliceEffect.splice(t,1));for(let t=0;t<this.activeSliceCriticalEffect.length;t++)0==this.activeSliceCriticalEffect[t].visible&&(this.poolSliceCriticalEffect.push(this.activeSliceCriticalEffect[t]),this.activeSliceCriticalEffect.splice(t,1))}checkFruits(t){let e=this.points,i=t.getListFruits(),s=0;for(var a=1;a<e.length;a++){let t=new Phaser.Geom.Line(e[a].x,e[a].y,e[a-1].x,e[a-1].y);i.forEach((i=>{if(i.active){let n=this.scene.third.transform.from3dto2d(i.object.position),o={x:n.x,y:n.y,width:100,height:100};if(this.checkIntersects(o,t)){let t=e[a].y-e[a-1].y,o=e[a].x-e[a-1].x,r=Math.atan2(-t,o)/Math.PI*180,h=this.scene.fruitFactory.slice(i,r);if(-1!=h){let t,e;1==h?(0==this.poolSliceEffect.length?t=new this.SliceEffect(this.scene,n.x,n.y,"SliceDiamondNeutral"):(t=this.poolSliceEffect[0],t.setTexture("SliceDiamondNeutral"),this.poolSliceEffect.splice(0,1)),t.x=n.x,t.y=n.y,this.scene.lastPosX=n.x,this.scene.lastPosY=n.y,t.angle=90-r,t.activate(),t.tint=16777215,this.activeSliceEffect.push(t)):(0==this.poolSliceCriticalEffect.length?t=new this.SliceCriticalEffect(this.scene,n.x,n.y):(t=this.poolSliceCriticalEffect[0],this.poolSliceCriticalEffect.splice(0,1)),t.x=n.x,t.y=n.y,this.scene.lastPosX=n.x,this.scene.lastPosY=n.y,t.angle=90-r,t.activate(),this.activeSliceCriticalEffect.push(t)),i.hasSplash&&(0==this.poolSliceEffect.length?e=new this.SliceEffect(this.scene,n.x,n.y,"FruitSplash"):(e=this.poolSliceEffect[0],e.setTexture("FruitSplash"),this.poolSliceEffect.splice(0,1)),e.x=n.x,e.y=n.y,e.angle=90-r,e.tint=i.splashColor,e.activateSplash(),this.activeSliceEffect.push(e)),"Bomb"!=i.id&&s++}}}}))}return s}checkFruitsUI(t){let e=this.points,i=t.getListFruits(),s="";(n||o||r||h||l)&&(e=[{x:363.08797127468586,y:356.1988919279052},{x:363.08797127468586,y:355.04986324426676}]);for(var c=1;c<e.length;c++){let t=new Phaser.Geom.Line(e[c].x,e[c].y,e[c-1].x,e[c-1].y);i.forEach((i=>{if(i.active&&""==s){let a=this.scene.third.transform.from3dto2d(i.object.position),d={x:a.x,y:a.y,width:100,height:100},p={type:2,x1:a.x,x2:a.x,y1:a.y,y2:a.y,bottom:a.y,left:a.x,right:a.x,top:a.y},u="";if(n&&"WMUI"==i.id?u="classic":o&&"KWUI"==i.id?u="setting":r&&"BUI"==i.id?u="back":h&&"BUI"==i.id?u="quit":l&&"AGUI"==i.id&&(u="retry"),"classic"==u){if(this.checkIntersects(d,p,"WMUI")){let t=e[c].y-e[c-1].y,a=e[c].x-e[c-1].x,n=Math.atan2(-t,a)/Math.PI*180;""==s&&-1!=this.scene.fruitFactory.slice(i,n)&&(s=i.id)}}else if("setting"==u){if(this.checkIntersects(d,p,"KWUI")){let t=e[c].y-e[c-1].y,a=e[c].x-e[c-1].x,n=Math.atan2(-t,a)/Math.PI*180;""==s&&-1!=this.scene.fruitFactory.slice(i,n)&&(s=i.id)}}else if("back"==u){if(this.checkIntersects(d,p,"BUI")){let t=e[c].y-e[c-1].y,a=e[c].x-e[c-1].x,n=Math.atan2(-t,a)/Math.PI*180;""==s&&-1!=this.scene.fruitFactory.slice(i,n)&&(s=i.id)}}else if("quit"==u){if(this.checkIntersects(d,p,"BUI")){let t=e[c].y-e[c-1].y,a=e[c].x-e[c-1].x,n=Math.atan2(-t,a)/Math.PI*180;""==s&&-1!=this.scene.fruitFactory.slice(i,n)&&(s=i.id)}}else if("retry"==u){if(this.checkIntersects(d,p,"AGUI")){let t=e[c].y-e[c-1].y,a=e[c].x-e[c-1].x,n=Math.atan2(-t,a)/Math.PI*180;""==s&&-1!=this.scene.fruitFactory.slice(i,n)&&(s=i.id)}}else if(this.checkIntersects(d,t)){let t=e[c].y-e[c-1].y,a=e[c].x-e[c-1].x,n=Math.atan2(-t,a)/Math.PI*180;""==s&&-1!=this.scene.fruitFactory.slice(i,n)&&(s=i.id)}}}))}return("WMUI"==s||"AGUI"==s)&&(a="GameScreen"),n=!1,o=!1,r=!1,h=!1,l=!1,s}normalizeValue(t,e,i){return(t-e)/(i-e)}linearInterpolation(t,e,i){return(i-e)*t+e}checkIntersects(t,e,i=""){var s=new Phaser.Geom.Line(t.x-t.width/2,t.y-t.height/2,t.x+t.width/2,t.y+t.height/2),a=new Phaser.Geom.Line(t.x-t.width/2,t.y+t.height/2,t.x+t.width/2,t.y-t.height/2);if(a.angle=90,"WMUI"==i||"KWUI"==i||"BUI"==i||"AGUI"==i)return!0;if(Phaser.Geom.Intersects.LineToLine(e,s,!0)||Phaser.Geom.Intersects.LineToLine(e,a,!0)){let e=this.scene.input,i=new Phaser.Math.Vector2(250,0);i.x=e.x,i.y=e.y;Phaser.Math.Distance.BetweenPoints(i,new Phaser.Math.Vector2(t.x,t.y));return!(Phaser.Math.Distance.BetweenPoints(i,new Phaser.Math.Vector2(t.x,t.y))>500)}}pushPoint(t){this.points.push(t)}}},"./src/scripts/gameobjects/ComboText.js":
/*!**********************************************!*\
!*** ./src/scripts/gameobjects/ComboText.js ***!
\**********************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i),t.add.existing(this),this.listTextAtas=[],this.listTextTengah=[],this.listTextBawah=[],this.scene=t,this.textAtas=this.scene.add.text(0,0,"N Fruit",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textAtas.setOrigin(.5,.5),this.textAtas.setStroke("#AA7800",16);let s=this.textAtas.context.createLinearGradient(0,0,0,this.textAtas.height);s.addColorStop(0,"#FEDB3D"),s.addColorStop(.5,"#FDF5C5"),s.addColorStop(.5,"#D69E00"),s.addColorStop(1,"#FEF38D"),this.textAtas.setFill(s),this.listTextAtas.push(this.textAtas),this.textTengah=this.scene.add.text(0,this.textAtas.height/2+30,"Combo",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textTengah.setOrigin(.5,.5),this.textTengah.setStroke("#AA7800",16),s=this.textTengah.context.createLinearGradient(0,0,0,this.textTengah.height),s.addColorStop(0,"#FEDB3D"),s.addColorStop(.55,"#FDF5C5"),s.addColorStop(.55,"#D69E00"),s.addColorStop(1,"#FEF38D"),this.textTengah.setFill(s),this.listTextTengah.push(this.textTengah),this.textBawah=this.scene.add.text(0,this.textTengah.y+this.textAtas.height/2+50,"+ N",{fontFamily:"gangofchinese",fontSize:140,align:"center"}),this.textBawah.setOrigin(.5,.5),this.textBawah.setStroke("#AA7800",16),s=this.textBawah.context.createLinearGradient(0,0,0,this.textBawah.height),s.addColorStop(0,"#FEDB3D"),s.addColorStop(.5,"#FDF5C5"),s.addColorStop(.5,"#D69E00"),s.addColorStop(1,"#FEF38D"),this.textBawah.setFill(s),this.listTextBawah.push(this.textBawah),this.textAtas2=this.scene.add.text(0,0,"N Fruit",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textAtas2.setOrigin(.5,.5),this.textAtas2.setStroke("#B24700",16),s=this.textAtas2.context.createLinearGradient(0,0,0,this.textAtas2.height),s.addColorStop(0,"#FF9936"),s.addColorStop(.5,"#FFE264"),s.addColorStop(.5,"#E17C2F"),s.addColorStop(1,"#FAC96A"),this.textAtas2.setFill(s),this.listTextAtas.push(this.textAtas2),this.textAtas3=this.scene.add.text(0,0,"N Fruit",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textAtas3.setOrigin(.5,.5),this.textAtas3.setStroke("#AA2200",16),s=this.textAtas3.context.createLinearGradient(0,0,0,this.textAtas3.height),s.addColorStop(0,"#FE7838"),s.addColorStop(.5,"#FFBA93"),s.addColorStop(.5,"#EF562F"),s.addColorStop(1,"#FE7130"),this.textAtas3.setFill(s),this.listTextAtas.push(this.textAtas3),this.textTengah2=this.scene.add.text(0,this.textAtas.height/2+30,"Combo",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textTengah2.setOrigin(.5,.5),this.textTengah2.setStroke("#B24700",16),s=this.textTengah2.context.createLinearGradient(0,0,0,this.textTengah2.height),s.addColorStop(0,"#FF9936"),s.addColorStop(.55,"#FFE264"),s.addColorStop(.55,"#E17C2F"),s.addColorStop(1,"#FAC96A"),this.textTengah2.setFill(s),this.listTextTengah.push(this.textTengah2),this.textTengah3=this.scene.add.text(0,this.textAtas.height/2+30,"Combo",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textTengah3.setOrigin(.5,.5),this.textTengah3.setStroke("#AA2200",16),s=this.textTengah3.context.createLinearGradient(0,0,0,this.textTengah3.height),s.addColorStop(0,"#FE7838"),s.addColorStop(.55,"#FFBA93"),s.addColorStop(.55,"#EF562F"),s.addColorStop(1,"#FE7130"),this.textTengah3.setFill(s),this.listTextTengah.push(this.textTengah3),this.textBawah2=this.scene.add.text(0,this.textTengah.y+this.textAtas.height/2+50,"+ N",{fontFamily:"gangofchinese",fontSize:140,align:"center"}),this.textBawah2.setOrigin(.5,.5),this.textBawah2.setStroke("#B24700",16),s=this.textBawah2.context.createLinearGradient(0,0,0,this.textBawah2.height),s.addColorStop(0,"#FF9936"),s.addColorStop(.5,"#FFE264"),s.addColorStop(.5,"#E17C2F"),s.addColorStop(1,"#FAC96A"),this.textBawah2.setFill(s),this.listTextBawah.push(this.textBawah2),this.textBawah3=this.scene.add.text(0,this.textTengah.y+this.textAtas.height/2+50,"+ N",{fontFamily:"gangofchinese",fontSize:140,align:"center"}),this.textBawah3.setOrigin(.5,.5),this.textBawah3.setStroke("#AA2200",16),s=this.textBawah3.context.createLinearGradient(0,0,0,this.textBawah3.height),s.addColorStop(0,"#FE7838"),s.addColorStop(.5,"#FFBA93"),s.addColorStop(.5,"#EF562F"),s.addColorStop(1,"#FE7130"),this.textBawah3.setFill(s),this.listTextBawah.push(this.textBawah3),this.add(this.textAtas),this.add(this.textTengah),this.add(this.textBawah),this.add(this.textAtas2),this.add(this.textTengah2),this.add(this.textBawah2),this.add(this.textAtas3),this.add(this.textTengah3),this.add(this.textBawah3);for(let t=0;t<3;t++)this.listTextAtas[t].visible=!1,this.listTextTengah[t].visible=!1,this.listTextBawah[t].visible=!1;this.deactivate()}activate(t){this.visible=!0,this.scaleY=0,this.scaleX=0;let e=0;t>=8?e=2:t>=5&&(e=1);let i=this.listTextAtas[e],s=this.listTextTengah[e],a=this.listTextBawah[e];i.text=t+" Fruit",a.text="+ "+t,i.visible=!0,s.visible=!0,a.visible=!0,this.scene.tweens.add({targets:this,scale:1.1,duration:200,onComplete:()=>{this.scene.tweens.add({targets:this,scale:1,duration:100,onComplete:()=>{this.scene.tweens.add({targets:this,scale:1.1,duration:100,onComplete:()=>{this.scene.tweens.add({targets:this,scale:0,delay:1e3,duration:100,onComplete:()=>{this.deactivate()}})}})}})}})}deactivate(){this.visible=!1,this.scaleX=0,this.scaleY=0;for(let t=0;t<3;t++)this.listTextAtas[t].visible=!1,this.listTextTengah[t].visible=!1,this.listTextBawah[t].visible=!1}}},"./src/scripts/gameobjects/CriticalText.js":
/*!*************************************************!*\
!*** ./src/scripts/gameobjects/CriticalText.js ***!
\*************************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i),t.add.existing(this),this.scene=t,this.textAtas=this.scene.add.text(0,0,"CRITICAL",{fontFamily:"gangofchinese",fontSize:60,align:"center"}),this.textAtas.setOrigin(.5,.5),this.textAtas.setStroke("#022967",16);let s=this.textAtas.context.createLinearGradient(0,0,0,this.textAtas.height);s.addColorStop(0,"#B2D6F5"),s.addColorStop(1,"#135ECD"),this.textAtas.setFill(s),this.textBawah=this.scene.add.text(0,0,"+10",{fontFamily:"gangofchinese",fontSize:120,align:"center"}),this.textBawah.setOrigin(.5,.5),this.textBawah.setStroke("#022967",16);let a=this.textBawah.context.createLinearGradient(0,0,0,this.textBawah.height);a.addColorStop(0,"#B2D6F5"),a.addColorStop(1,"#135ECD"),this.textBawah.setFill(a),this.textBawah.setPosition(0,this.textAtas.y+this.textAtas.height/2+this.textBawah.height/2-25),this.add(this.textAtas),this.add(this.textBawah),this.deactivate()}activate(){this.visible=!0,this.scaleY=0,this.scaleX=0,this.textAtas.visible=!0,this.textBawah.visible=!0,this.scene.tweens.add({targets:this,scale:1.1,duration:200,onComplete:()=>{this.scene.tweens.add({targets:this,scale:1,duration:100,onComplete:()=>{this.scene.tweens.add({targets:this,scale:1.1,duration:100,onComplete:()=>{this.scene.tweens.add({targets:this,scale:0,delay:1e3,duration:100,onComplete:()=>{this.deactivate()}})}})}})}})}deactivate(){this.visible=!1,this.scaleX=0,this.scaleY=0}}},"./src/scripts/gameobjects/FruitFactory.js":
/*!*************************************************!*\
!*** ./src/scripts/gameobjects/FruitFactory.js ***!
\*************************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a{constructor(e){t.gameData={fruitList:[{id:"Coconut",path:"assets/fruits/Coconut.FBX",scale:1.2413,splashColor:16383999,alpha:179,splashTex:"splash",droplets:"JuiceDragonFruit",impactSFX:"FruitImpactBigHollow",minSplash:2,maxSplash:4},{id:"Pineapple",path:"assets/fruits/Pineapple.FBX",scale:1.1526,splashColor:16772927,alpha:180,splashTex:"splash",droplets:"JuicePineapple",impactSFX:"FruitImpactBigWet0",minSplash:2,maxSplash:3},{id:"Orange",path:"assets/fruits/Orange.FBX",scale:1.034,splashColor:16545796,alpha:180,splashTex:"splash",droplets:"JuiceOrange",impactSFX:"FruitImpactBigWet0",minSplash:3,maxSplash:4},{id:"Kiwifruit",path:"assets/fruits/Kiwifruit.FBX",scale:.8866,splashColor:5549328,alpha:180,splashTex:"splash",droplets:"JuiceGreen",impactSFX:"FruitImpactSmallWet0",minSplash:1,maxSplash:4},{id:"Lemon",path:"assets/fruits/Lemon.FBX",scale:.9753,splashColor:16772927,alpha:180,splashTex:"splash",droplets:"JuicePineapple",impactSFX:"FruitImpactMediumWet0",minSplash:3,maxSplash:4},{id:"Peach",path:"assets/fruits/Peach.FBX",scale:1.0108,splashColor:16762139,alpha:180,splashTex:"splash",droplets:"JuiceMango",impactSFX:"FruitImpactMediumWet0",minSplash:4,maxSplash:4},{id:"AppleGreen",path:"assets/fruits/AppleGreen.FBX",scale:1.064,splashColor:16702517,alpha:179,splashTex:"splash2",droplets:"JuicePineapple",impactSFX:"FruitImpactApple",minSplash:2,maxSplash:2},{id:"Mango",path:"assets/fruits/Mango.FBX",scale:1.1526,splashColor:16758560,alpha:180,splashTex:"splash",droplets:"JuiceMango",impactSFX:"FruitImpactMediumWet0",minSplash:2,maxSplash:4},{id:"Watermelon",path:"assets/fruits/Watermelon.FBX",scale:1.33,splashColor:16459288,alpha:255,splashTex:"splash",droplets:"JuiceRed",impactSFX:"FruitImpactBigWet0",minSplash:3,maxSplash:4},{id:"WMUI",path:"assets/fruits/Watermelon.FBX",scale:1.33,splashColor:16459288,alpha:255,splashTex:"splash",droplets:"JuiceRed",impactSFX:"FruitImpactBigWet0",minSplash:3,maxSplash:4},{id:"KWUI",path:"assets/fruits/Kiwifruit.FBX",scale:.8866,splashColor:5549328,alpha:180,splashTex:"splash",droplets:"JuiceGreen",impactSFX:"FruitImpactSmallWet0",minSplash:1,maxSplash:4},{id:"BUI",path:"assets/fruits/Bomb.fbx",scale:1,splashTex:"none",droplets:"none",impactSFX:"BombExplodeGameOver"},{id:"AGUI",path:"assets/fruits/AppleGreen.FBX",scale:1.064,splashColor:16702517,alpha:179,splashTex:"splash2",droplets:"JuicePineapple",impactSFX:"FruitImpactApple",minSplash:2,maxSplash:2},{id:"Banana",path:"assets/fruits/Banana.FBX",scale:.95,splashTex:"none",droplets:"none",impactSFX:"FruitImpactMediumDry"},{id:"Bomb",path:"assets/fruits/Bomb.fbx",scale:1,splashTex:"none",droplets:"none",impactSFX:"BombExplodeGameOver"}]},this.scene=e,this.listFruits=[],this.fruitToSpawnList=[],this.fruitNeedUpdate=[],this.frustumSizeChanger=192,this.bombHit=!1,this.udahFinish=!1,this.create()}async create(){this.fruitTexture=await this.scene.third.load.texture("fruits_tex"),this.shadowTexture=await this.scene.third.load.texture("fruit_shadow"),this.bombTexture=await this.scene.third.load.texture("bomb_tex"),this.bombRayTexture=await this.scene.third.load.texture("bomb_ray_tex"),this.splashTexture=await this.scene.third.load.texture("splash_tex"),this.splashTexture2=await this.scene.third.load.texture("splash2_tex"),this.splashTexture3=await this.scene.third.load.texture("splash3_tex"),this.splashTexture4=await this.scene.third.load.texture("splash4_tex"),this.splashSliced1=await this.scene.third.load.texture("SplashSlice1"),this.splashSliced2=await this.scene.third.load.texture("SplashSlice2"),this.fruitTrailTex=await this.scene.third.load.texture("FruitTrail"),this.criticalTrailTex=await this.scene.third.load.texture("CriticalTrail"),this.bombTrailTex=await this.scene.third.load.texture("BombTrail"),this.bombSmokeTex=await this.scene.third.load.texture("BombSmoke"),this.helperVec3=new s.THREE.Vector3(0,0,0);let e=t.gameData.fruitList;for(var i=0;i<e.length;i++)this.load(e[i].path,20*i-180,75,0,.7*e[i].scale/this.frustumSizeChanger,e[i].id,e[i]);this.emitterDroplets={},this.emitterDroplets.JuiceDragonFruit=this.createEmitter("JuiceDragonfruit"),this.emitterDroplets.JuiceGreen=this.createEmitter("JuiceGreen"),this.emitterDroplets.JuiceMango=this.createEmitter("JuiceMango"),this.emitterDroplets.JuiceOrange=this.createEmitter("JuiceOrange"),this.emitterDroplets.JuicePineapple=this.createEmitter("JuicePineapple"),this.emitterDroplets.JuiceRed=this.createEmitter("JuiceRed"),this.emitterDroplets.StarCritical=this.createEmitter("StarCritical",1),this.emitterDroplets2={},this.emitterDroplets2.JuiceDragonFruit=this.createEmitter("JuiceDragonfruit",1),this.emitterDroplets2.JuiceGreen=this.createEmitter("JuiceGreen",1),this.emitterDroplets2.JuiceMango=this.createEmitter("JuiceMango",1),this.emitterDroplets2.JuiceOrange=this.createEmitter("JuiceOrange",1),this.emitterDroplets2.JuicePineapple=this.createEmitter("JuicePineapple",1),this.emitterDroplets2.JuiceRed=this.createEmitter("JuiceRed",1),this.bombRay=[],this.bombFuse=this.scene.sound.add("BombFuseLP")}populateRayForBomb(t){let e=30*Phaser.Math.Between(1,12);for(let t=0;t<8;t++)this.scene.third.load.fbx("assets/effects/PomegranateRay.fbx").then((i=>{this.scene.third.add.existing(i),i.position.set(0,0,2),i.rotation.set(-90,e+30*t,0);const a=new s.THREE.MeshPhongMaterial({map:this.bombRayTexture});a.transparent=!0;this.bombRayTexture;i.traverse((function(t){t.isMesh&&(t.material=a)})),i.material=a,a.opacity=Phaser.Math.Between(5,10)/10,i.visible=!1,this.bombRay.push(i)}))}createEmitter(t,e=2){let i,s=this.scene.add.particles(t);if("StarCritical"==t){let t=new Phaser.Geom.Line(0,-100,0,100);i=s.createEmitter({x:384,y:640,emitZone:{type:"random",source:t},alpha:1,scale:{start:e,end:0},speed:{min:300,max:800,step:100},angle:{min:-30,max:30,step:15},lifespan:1e3,gravityX:0,gravityY:500,quantity:15,tint:10482175,on:!1})}else i=2==e?s.createEmitter({x:384,y:640,alpha:1,scale:{start:e,end:0},speed:{min:300,max:600},angle:{min:-15,max:15},lifespan:1e3,gravityX:0,gravityY:1e3,quantity:10,on:!1}):s.createEmitter({x:384,y:640,alpha:1,scale:{start:e,end:0},speedX:{min:-400,max:400},speedY:{min:-350,max:-50},lifespan:750,gravityX:0,gravityY:1e3,quantity:10,on:!1});return i}load(t,e,a,n,o,r,h){let l;l="Bomb"==r||"BUI"==r?this.bombTexture:this.fruitTexture;let c=this,d=this.fruitTrailTex,p=this.criticalTrailTex,u=this.bombTrailTex,g=this.bombSmokeTex;"WMUI"==r?(e=0,a=-64/this.frustumSizeChanger,n=10/this.frustumSizeChanger):"KWUI"==r&&(e=176/this.frustumSizeChanger,a=0/this.frustumSizeChanger,n=10/this.frustumSizeChanger),this.scene.third.load.fbx(t).then((t=>{let m,f,S;t.scale.set(o,o,o),t.position.set(e,a,n),t.traverse((function(t){if(t.isMesh){if(t.name.includes("Outline")||t.name.includes("outline"))if("Bomb"!=r&&"BUI"!=r)t.visible=!1;else{const e=new s.THREE.MeshLambertMaterial({color:16711680});t.material=e}if((t.name.includes("Half")||t.name.includes("half"))&&(t.visible=!1,t.firstLoad=!0,t.name.includes("Half1")||t.name.includes("half1")?m=t.position:f=t.position,c.scene.third.physics.add.existing(t,{shape:"convexMesh"}),t.body.on.update((()=>{if(!t.body)return;if(t.firstLoad)return void(t.firstLoad=!1);t.body.setVelocity(0,0,0),t.body.setAngularVelocity(0,0,0),t.body.setRotation(0,0,0),t.position.set(0,0,10),t.body.setCollisionFlags(4);let e=100;t.critical&&(e=1e3),t.name.includes("Half1")||t.name.includes("half1")?(t.body.applyForce(200/c.frustumSizeChanger,e/c.frustumSizeChanger,-20/c.frustumSizeChanger),t.body.setAngularVelocity(1,0,1)):(t.body.applyForce(-200/c.frustumSizeChanger,-e/c.frustumSizeChanger,-20/c.frustumSizeChanger),t.body.setAngularVelocity(-1,0,-1))})),t.body.needUpdate=!0),"Bomb"!=r&&"BUI"!=r)t.material.map=l;else if(!t.name.includes("Outline")&&!t.name.includes("outline")){t.material.map=l;const e=i(
/*!./../utils/BombTrail.js*/"./src/scripts/utils/BombTrail.js").default;S=new e({parent:c.scene.third.scene,camera:c.scene.third.camera,helper:c.scene,texturePS:u})}}})),this.scene.third.add.existing(t),this.scene.third.physics.add.existing(t,{shape:"convexMesh"}),"Bomb"==r&&this.populateRayForBomb(t),this.shadowTexture.wrapS=s.THREE.RepeatWrapping,this.shadowTexture.wrapT=s.THREE.RepeatWrapping;const y=new s.THREE.MeshPhongMaterial({map:this.shadowTexture});y.transparent=!0;const x=new s.THREE.Mesh(new s.THREE.PlaneGeometry(110*o,110*o),y);x.opacity=.8,x.position.z=-699,x.position.x=e,x.position.y=a,this.scene.third.add.existing(x);let b,w=[],v=!1;if("none"!=h.splashTex){v=!0;let t=this.splashTexture;"splash2"==h.splashTex&&(t=this.splashTexture2),t.wrapS=s.THREE.RepeatWrapping,t.wrapT=s.THREE.RepeatWrapping;for(let i=0;i<4;i++){const i=new s.THREE.MeshPhongMaterial({map:t,color:h.splashColor});i.transparent=!0,i.opacity=h.alpha/255,i.color.alpha=h.alpha/255,i.color.baseAlpha=h.alpha/255;let n=new s.THREE.Mesh(new s.THREE.PlaneGeometry(110*o,110*o),i);n.position.z=-698,n.position.x=e,n.position.y=a,n.visible=!1,this.scene.third.add.existing(n),w.push(n)}t=this.splashTexture3,"splash2"==h.splashTex&&(t=this.splashTexture4),t.wrapS=s.THREE.RepeatWrapping,t.wrapT=s.THREE.RepeatWrapping;for(let i=0;i<2;i++){const i=new s.THREE.MeshPhongMaterial({map:t,color:h.splashColor});i.transparent=!0,i.opacity=h.alpha/255,i.color.alpha=h.alpha/255,i.color.baseAlpha=h.alpha/255;let n=new s.THREE.Mesh(new s.THREE.PlaneGeometry(110*o,110*o),i);n.position.z=-698,n.position.x=e,n.position.y=a,n.visible=!1,this.scene.third.add.existing(n),w.push(n)}if("splash2"!=h.splashTex){t=this.splashSliced1,t.wrapS=s.THREE.RepeatWrapping,t.wrapT=s.THREE.RepeatWrapping;for(let i=0;i<1;i++){const i=new s.THREE.MeshPhongMaterial({map:t,color:h.splashColor});i.transparent=!0,i.opacity=h.alpha/255,i.color.alpha=h.alpha/255,i.color.baseAlpha=h.alpha/255;let n=new s.THREE.Mesh(new s.THREE.PlaneGeometry(110*o,110*o),i);n.position.z=-698,n.position.x=e,n.position.y=a,n.visible=!1,this.scene.third.add.existing(n),w.push(n)}t=this.splashSliced2,t.wrapS=s.THREE.RepeatWrapping,t.wrapT=s.THREE.RepeatWrapping;for(let i=0;i<1;i++){const i=new s.THREE.MeshPhongMaterial({map:t,color:h.splashColor});i.transparent=!0,i.opacity=h.alpha/255,i.color.alpha=h.alpha/255,i.color.baseAlpha=h.alpha/255;let n=new s.THREE.Mesh(new s.THREE.PlaneGeometry(110*o,110*o),i);n.position.z=-698,n.position.x=e,n.position.y=a,n.visible=!1,this.scene.third.add.existing(n),w.push(n)}}}if("Bomb"==r||"BUI"==r){b=new(0,i(
/*!./../utils/BombSmoke.js*/"./src/scripts/utils/BombSmoke.js").default)({parent:this.scene.third.scene,camera:this.scene.third.camera,helper:this.scene,texturePS:g})}else{b=new(0,i(
/*!./../utils/FruitTrail.js*/"./src/scripts/utils/FruitTrail.js").default)({parent:this.scene.third.scene,camera:this.scene.third.camera,helper:this.scene,texturePS:d})}const C=i(
/*!./../utils/CriticalTrail.js*/"./src/scripts/utils/CriticalTrail.js").default;let F=new C({parent:this.scene.third.scene,camera:this.scene.third.camera,helper:this.scene,texturePS:p}),R=new C({parent:this.scene.third.scene,camera:this.scene.third.camera,helper:this.scene,texturePS:p});const T={object:t,active:!0,pastScreen:!1,willActive:!1,count:0,sliced:!1,half1BasePos:m,half2BasePos:f,shadow:x,id:r,splash:w,hasSplash:v,droplets:h.droplets,impactSFX:h.impactSFX,splashColor:h.splashColor,minSplash:h.minSplash,maxSplash:h.maxSplash,fruitTrail:b,theBombTrail:S,criticalTrailHalf1:F,criticalTrailHalf2:R};T.object.body.on.update((()=>{if(T)if(-1==this.scene.gameState||0==this.scene.gameState||3==this.scene.gameState||4==this.scene.gameState)T.object.position.set(T.uiPosX,T.uiPosY,10),this.activate(T),"Bomb"==T.id||"BUI"==T.id?T.fruitTrail.setOn():(T.object.body.setAngularVelocity(.5,.25,.5),T.fruitTrail.setOff()),T.object.body.physics.setGravity(0,0,0),T.object.body.setVelocity(0,0,0);else if(2==this.scene.gameState)if(T.willActive){this.activate(T);let t=2*Math.floor(50*Math.random())+530;"Bomb"==T.id||"BUI"==T.id?(t=2*Math.floor(50*Math.random())+550,T.object.position.x<0?(T.object.body.applyForce(70/this.frustumSizeChanger,t/this.frustumSizeChanger,-250/this.frustumSizeChanger),T.object.body.setAngularVelocity(1,0,1)):(T.object.body.applyForce(-70/this.frustumSizeChanger,t/this.frustumSizeChanger,-250/this.frustumSizeChanger),T.object.body.setAngularVelocity(-1,0,-1))):T.object.position.x<0?(T.object.body.applyForce(100/this.frustumSizeChanger,t/this.frustumSizeChanger,-250/this.frustumSizeChanger),T.object.body.setAngularVelocity(1,0,1)):(T.object.body.applyForce(-100/this.frustumSizeChanger,t/this.frustumSizeChanger,-250/this.frustumSizeChanger),T.object.body.setAngularVelocity(-1,0,-1))}else T.object.body.setCollisionFlags(6),T.object.visible=!1,T.object.body.setVelocity(0,0,0),T.object.body.setAngularVelocity(0,0,0);else this.activate(T)})),this.deactivate(T),this.listFruits.push(T),this.isFinish()&&this.scene.contLoad()}))}isFinish(){return!this.udahFinish&&(15==this.listFruits.length?(this.udahFinish=!0,!0):void 0)}scheduleSpawnFruit(t,e,i,s){this.fruitToSpawnList.push({toSpawn:t,z:e,x:i,delay:s})}spawnFruit(t,e,i){let s,a=[],n="R"==t;if("B"==t&&(t="Bomb"),this.listFruits.forEach((e=>{e.active||e.willActive||(n&&"Bomb"!=e.id&&!e.id.includes("UI")||t==e.id)&&a.push(e)})),a.length>0){let t=Phaser.Math.Between(0,a.length-1);s=a[t]}s&&(s.willActive=!0,s.pastScreen=!1,s.count++,s.object.position.set(i,-1.95,e),s.object.body.needUpdate=!0,this.scene.SFXMuted||("Bomb"!=s.id?this.scene.sound.play("FruitLaunch"):(this.scene.sound.play("BombLaunch"),this.bombFuse.play())))}clearBomb(){let t;this.listFruits.forEach((e=>{"Bomb"==e.id?t=e:e.active&&this.deactivate(e)})),t&&this.deactivate(t);for(let t=0;t<this.bombRay.length;t++)this.bombRay[t].visible=!1;this.bombHit=!1}stopAllFruit(){this.fruitToSpawnList=[],this.listFruits.forEach((t=>{t.object.body.setVelocity(0,0,0)}))}slice(t,e){if(!t.sliced){if(t.preventDeactivate=!1,t.sliced=!0,t.fruitTrail.setOff(),t.shadow.visible=!1,t.object.body.setCollisionFlags(6),"Bomb"==t.id||"BUI"==t.id){if(2!=this.scene.gameState)return this.deactivate(t),this.scene.SFXMuted||this.scene.sound.play("FruitImpactBigHollow"),t.object.body.physics.setGravity(0,-2,0),!0;{t.deactivateTimerSlice=4e3,this.bombHit=!0;let e=this.scene.third.transform.from3dto2d(t.object.position);this.scene.notifyBombHit(e.x,e.y),this.scene.SFXMuted||this.scene.sound.play(t.impactSFX),this.scene.tweens.addCounter({from:0,to:8,duration:1500,onUpdate:e=>{const i=Math.floor(e.getValue());8!=i&&(this.bombRay[i].position.set(t.object.position.x,t.object.position.y,t.object.position.z-2),this.bombRay[i].visible=!0)}}),t.object.body.physics.setGravity(0,0,0),this.stopAllFruit()}}else{if(t.hasSplash){let i=this.scene.third.transform.from3dto2d(t.object.position);if(t.critical=!1,2==this.scene.gameState&&Phaser.Math.Between(1,100)<=12&&(this.scene.showCriticalText(i.x,i.y),t.critical=!0,t.criticalTrailHalf1.setOn(),t.criticalTrailHalf2.setOn()),t.critical){let s=-e;this.emitterDroplets.StarCritical.angle.start=s-15,this.emitterDroplets.StarCritical.angle.end=s+15,this.emitterDroplets.StarCritical.emitParticleAt(i.x,i.y),this.emitterDroplets2[t.droplets].emitParticleAt(i.x,i.y)}else{if("AppleGreen"!=t.id){let s=-e;this.emitterDroplets[t.droplets].angle.start=s-15,this.emitterDroplets[t.droplets].angle.end=s+15,this.emitterDroplets[t.droplets].emitParticleAt(i.x,i.y)}this.emitterDroplets2[t.droplets].emitParticleAt(i.x,i.y)}let s=Phaser.Math.Between(t.minSplash,t.maxSplash);t.critical&&(s=t.splash.length);let a=[];for(let e=0;e<t.splash.length;e++)a.push(e),0!=e&&t.splash[e].position.set(t.splash[0].position.x,t.splash[0].position.y,t.splash[0].position.z),t.critical?t.splash[e].material.color.setHex(1728400):t.splash[e].material.color.setHex(t.splashColor),t.splash[e].material.color.alpha=0;let n=t.impactSFX;if(n.includes("Wet")){n+=""+Phaser.Math.Between(1,3)}this.scene.SFXMuted||this.scene.sound.play(n),2==this.scene.gameState?t.deactivateTimerSlice=4e3:t.deactivateTimerSlice=3e3;for(let i=0;i<s;i++){let i=Phaser.Math.Between(0,a.length-1),s=a[i];a.splice(i,1),t.splash[s].visible=!0,6!=s&&7!=s||t.splash[s].rotation.set(0,0,e*Math.PI/180);let n=t.splash[s].material.color;t.splash[s].material.color.alpha=1,t.splash[s].material.opacity=1,this.scene.tweens.add({targets:n,alpha:0,delay:2e3,onUpdate:()=>{t.splash[s].material.opacity=n.alpha}});let o=t.splash[s].position;if(6==s||7==s){let t=Math.cos(e*Math.PI/180)/2,i=Math.sin(e*Math.PI/180)/2;o.x+=t,o.y+=i}else o.x+=5*Phaser.Math.Between(-2,2)/40,o.y+=5*Phaser.Math.Between(-2,2)/40,this.scene.tweens.add({targets:o,y:"-=0.08",duration:1e3,delay:2e3,onUpdate:()=>{t.splash[s].position.set(o.x,o.y,o.z)}})}}else{2==this.scene.gameState?t.deactivateTimerSlice=4e3:t.deactivateTimerSlice=3e3;let i=this.scene.third.transform.from3dto2d(t.object.position);if(t.critical=!1,2==this.scene.gameState&&Phaser.Math.Between(1,100)<=12&&(this.scene.showCriticalText(i.x,i.y),t.critical=!0,t.criticalTrailHalf1.setOn(),t.criticalTrailHalf2.setOn()),t.critical){let t=-e;this.emitterDroplets.StarCritical.angle.start=t-15,this.emitterDroplets.StarCritical.angle.end=t+15,this.emitterDroplets.StarCritical.emitParticleAt(i.x,i.y)}let s=t.impactSFX;if(s.includes("Wet")){s+=""+Phaser.Math.Between(1,3)}this.scene.SFXMuted||this.scene.sound.play(s)}t.object.rotation.x=0,t.object.rotation.y=0,t.object.rotation.z=e*Math.PI/180,t.object.body.setAngularVelocity(0,0,0),t.object.traverse((function(e){e.isMesh&&((e.name.includes("Whole")||e.name.includes("whole"))&&(e.visible=!1),(e.name.includes("Half")||e.name.includes("half"))&&(e.visible=!0,e.rotation.x=-Math.PI/2,e.rotation.z=0,e.position.set(0,0,10),e.critical=t.critical,e.body.needUpdate=!0))}))}return t.object.body.physics.setGravity(0,-2,0),t.critical?2:1}return-1}activate(t){t.object.body.setVelocity(0,0,0),t.object.body.setAngularVelocity(0,0,0),t.object.body.setRotation(0,0,0),2==this.scene.gameState&&t.object.body.setCollisionFlags(4),t.object.visible=!0,t.shadow.position.x=t.object.position.x-.0825,t.shadow.position.y=t.object.position.y-.125,t.fruitTrail.setPosition(t.object.position.x,t.object.position.y-.08),t.fruitTrail.setOn(),"Bomb"!=t.id&&"BUI"!=t.id||(t.theBombTrail.setPosition(t.object.position.x,t.object.position.y+.08),t.theBombTrail.setOn(),t.fruitTrail.setPosition(t.object.position.x-.065,t.object.position.y+.03)),t.shadow.visible=!0;t.object.traverse((function(t){t.isMesh&&((t.name.includes("Whole")||t.name.includes("whole"))&&(t.visible=!0),(t.name.includes("Half")||t.name.includes("half"))&&(t.visible=!1))})),t.sliced=!1,t.active=!0,t.hasSplash&&(t.splash[0].material.color.alpha=t.splash[0].material.color.baseAlpha,t.splash[0].material.opacity=t.splash[0].material.color.alpha)}deactivate(t){if(t.preventDeactivate)return;if(t.object.body.setCollisionFlags(6),t.object.visible=!1,t.critical=!1,t.shadow.position.x=-100,t.object.body.setVelocity(0,0,0),t.object.body.setAngularVelocity(0,0,0),t.object.position.set(0,-1.95,0),t.active=!1,t.willActive=!1,t.needUpdate=!0,t.hasSplash)for(let e=0;e<t.splash.length;e++)t.splash[e].visible=!1;"Bomb"==t.id||"BUI"==t.id?(this.bombFuse.stop(),t.fruitTrail.setOff(),t.theBombTrail.setOff()):(t.fruitTrail.setOff(),t.criticalTrailHalf1.setOff(),t.criticalTrailHalf2.setOff());if(t.object.traverse((function(t){t.isMesh&&((t.name.includes("Whole")||t.name.includes("whole"))&&(t.visible=!0),(t.name.includes("Half")||t.name.includes("half"))&&(t.visible=!1,t.body&&(t.body.setVelocity(0,0,0),t.body.setAngularVelocity(0,0,0),t.body.setRotation(0,0,0),t.body.setCollisionFlags(6),t.name.includes("Half1")||t.name.includes("half1"),t.position.x=0,t.position.y=0,t.position.z=0,t.rotation.x=0,t.rotation.y=0,t.rotation.z=0)))})),!t.sliced&&"Bomb"!=t.id&&"BUI"!=t.id){let e=this.scene.third.transform.from3dto2d(t.object.position).x;t.pastScreen&&this.scene.loseLife(e),3==this.scene.gameState&&(this.fruitToSpawnList=[])}}update(t){if(2==this.scene.gameState&&!this.scene.hitBomb){for(let e=0;e<this.fruitToSpawnList.length;e++){let i=this.fruitToSpawnList[e];i.delay-=t,i.delay<=0&&this.spawnFruit(i.toSpawn,i.z,i.x)}var e=[];for(let t=0;t<this.fruitToSpawnList.length;t++){let i=this.fruitToSpawnList[t];i.delay>0&&e.push(i)}this.fruitToSpawnList=e}this.listFruits.forEach((e=>{if("Bomb"==e.id||"BUI"==e.id){let i=e.object.rotation.z-Math.PI/2,s=.21*Math.cos(i),a=.21*Math.sin(i);e.theBombTrail.setPosition(e.object.position.x-s,e.object.position.y-a),e.theBombTrail.Step(t/1e3),e.fruitTrail.setPosition(e.object.position.x-s,e.object.position.y-a),e.fruitTrail.Step(t/1e3)}else e.fruitTrail.Step(t/1e3),e.criticalTrailHalf1.Step(t/1e3),e.criticalTrailHalf2.Step(t/1e3);if(e.active){if(-1!=this.scene.gameState&&0!=this.scene.gameState&&3!=this.scene.gameState&&4!=this.scene.gameState||"BUI"!=e.id&&"WMUI"!=e.id&&"KWUI"!=e.id&&"AGUI"!=e.id||e.object.position.set(e.uiPosX,e.uiPosY,0),this.bombHit&&(e.object.body.physics.setGravity(0,0,0),e.object.body.setVelocity(0,0,0)),e.object.position.y>-1.9&&(e.pastScreen=!0),e.sliced){e.deactivateTimerSlice-=t,e.deactivateTimerSlice<=0&&this.deactivate(e)}if(e.object.position.y<-2)e.sliced||this.deactivate(e);else{if(e.fruitTrail.setPosition(e.object.position.x,e.object.position.y-.08),e.sliced){let t=e.object.getObjectByName(e.id+"Half1"),i=e.object.getObjectByName(e.id+"Half2");t&&i&&(t.getWorldPosition(this.helperVec3),e.criticalTrailHalf1.setPosition(this.helperVec3.x,this.helperVec3.y-.08),i.getWorldPosition(this.helperVec3),e.criticalTrailHalf2.setPosition(this.helperVec3.x,this.helperVec3.y-.08))}e.shadow.position.x=e.object.position.x-.0825,e.shadow.position.y=e.object.position.y-.125,e.hasSplash&&!e.splash[0].visible&&(e.splash[0].position.x=e.object.position.x,e.splash[0].position.y=e.object.position.y)}}}))}positionWaterMelonUI(){let t;if(this.listFruits.forEach((e=>{"WMUI"==e.id&&(t=e)})),t){this.deactivate(t),t.object.position.set(0,-64/this.frustumSizeChanger,10/this.frustumSizeChanger),t.splash[0].position.x=t.object.position.x,t.splash[0].position.y=t.object.position.y,t.uiPosX=0,t.uiPosY=-64/this.frustumSizeChanger;let e=0;return t.object.visible=!0,t.object.traverse((function(t){t.isMesh&&((t.name.includes("Whole")||t.name.includes("whole"))&&(t.visible=!0,t.scale.set(e,e,e)),(t.name.includes("Half")||t.name.includes("half"))&&(t.visible=!1,t.scale.set(e,e,e)))})),t.object.body.needUpdate=!0,!0}return!1}forcePositionWaterMelonUI(){let t;this.listFruits.forEach((e=>{"Watermelon"==e.id&&(t=e)})),t&&(t.object.position.set(0,-64/this.frustumSizeChanger,10/this.frustumSizeChanger),t.splash[0].position.x=t.object.position.x,t.splash[0].position.y=t.object.position.y,t.object.visible=!0,t.object.traverse((function(t){t.isMesh&&(t.name.includes("Whole")||t.name.includes("whole"))&&(t.visible=!0)})))}getFruit(t){let e;return this.listFruits.forEach((i=>{i.id==t&&(e=i)})),e}resetWaterMelonUI(t="Watermelon"){let e;if(this.listFruits.forEach((i=>{i.id==t&&(e=i)})),e){e.preventDeactivate=!1;let t=1;e.object.traverse((function(e){e.isMesh&&((e.name.includes("Whole")||e.name.includes("whole"))&&(e.visible=!1,e.scale.set(t,t,t)),(e.name.includes("Half")||e.name.includes("half"))&&(e.visible=!1,e.scale.set(t,t,t)),(e.name.includes("Bomb")||e.name.includes("bomb"))&&e.scale.set(t,t,t))}));e.sliced||this.deactivate(e)}}positionFruitUI(t,e,i,s){let a;if(this.listFruits.forEach((e=>{e.id==t&&(a=e)})),a){this.deactivate(a),a.preventDeactivate=!0,"Bomb"!=t&&"BUI"!=t&&a.fruitTrail.setOff(),a.object.position.set(32*e/this.frustumSizeChanger,32*i/this.frustumSizeChanger,10/this.frustumSizeChanger),"Bomb"!=t&&"BUI"!=t||a.object.rotation.set(0,.523,-.523),a.hasSplash&&(a.splash[0].position.x=a.object.position.x,a.splash[0].position.y=a.object.position.y);let s=0;a.object.visible=!0;let n=this;return a.uiPosX=32*e/this.frustumSizeChanger,a.uiPosY=32*i/this.frustumSizeChanger,a.object.traverse((function(t){t.isMesh&&((t.name.includes("Whole")||t.name.includes("whole"))&&(t.visible=!0,t.scale.set(s,s,s)),(t.name.includes("Half")||t.name.includes("half"))&&(t.visible=!1,t.scale.set(s,s,s)),(t.name.includes("Bomb")||t.name.includes("bomb"))&&(n.scene.tweens.addCounter({from:0,to:360,duration:7e3,loop:-1,onUpdate:e=>{const i=Math.floor(e.getValue());t.rotation.set(0,i/180*Math.PI,0)}}),t.scale.set(s,s,s)))})),a.object.body.needUpdate=!0,!0}return!1}getListFruits(){return this.listFruits}}}.call(this,i(
/*!./../../../node_modules/webpack/buildin/global.js*/"./node_modules/webpack/buildin/global.js"))},"./src/scripts/gameobjects/SliceCriticalEffect.js":
/*!********************************************************!*\
!*** ./src/scripts/gameobjects/SliceCriticalEffect.js ***!
\********************************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i),t.add.existing(this),this.scene=t,this.sliceAtas=this.scene.add.image(0,0,"SliceDiamondCritical"),this.sliceBawah=this.scene.add.image(0,0,"SliceDiamondCritical"),this.sliceAtas.setOrigin(.5,.5),this.sliceBawah.setOrigin(.5,.5),this.add(this.sliceAtas),this.add(this.sliceBawah),this.deactivate()}activate(){this.visible=!0,this.scaleY=1,this.scaleX=1,this.alpha=1,this.scene.tweens.add({targets:this,scaleY:3,duration:100,onComplete:()=>{this.sliceAtas.angle=45,this.sliceBawah.angle=-45,this.scene.tweens.add({targets:this,scaleY:0,scaleX:0,duration:200,onComplete:()=>{this.deactivate()}})}})}deactivate(){this.visible=!1,this.alpha=1}}},"./src/scripts/gameobjects/SliceEffect.js":
/*!************************************************!*\
!*** ./src/scripts/gameobjects/SliceEffect.js ***!
\************************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a extends Phaser.GameObjects.Image{constructor(t,e,i,s,a){super(t,e,i,s,a),t.add.existing(this),this.scene=t,this.deactivate()}activate(){this.visible=!0,this.scaleY=1,this.scaleX=1,this.alpha=1,this.scene.tweens.add({targets:this,scaleY:2,duration:100,onComplete:()=>{this.scene.tweens.add({targets:this,scaleY:0,duration:100,onComplete:()=>{this.deactivate()}})}})}activateSplash(){this.visible=!0,this.scaleY=1,this.scaleX=1,this.alpha=1,this.scene.tweens.add({targets:this,scaleY:1.3,scaleX:2.3,duration:100,onComplete:()=>{this.scene.tweens.add({targets:this,alpha:0,scaleY:1.95,scaleX:3.45,duration:200,onComplete:()=>{this.deactivate()}})}})}deactivate(){this.visible=!1,this.alpha=1}}},"./src/scripts/scenes/mainScene.js":
/*!*****************************************!*\
!*** ./src/scripts/scenes/mainScene.js ***!
\*****************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a extends s.Scene3D{constructor(){super({key:"MainScene"})}init(){this.gameWidth=this.cameras.main.width,this.gameHeight=this.cameras.main.width,this.cameras.main.setBackgroundColor("#000000"),this.frustumSizeChanger=6;const t=12/this.frustumSizeChanger,e=this.cameras.main.width/this.cameras.main.height;this.accessThirdDimension({camera:new s.THREE.OrthographicCamera(t*e/-2,t*e/2,t/2,t/-2,.1,1e3),gravity:{x:0,y:-2,z:0}}),this.timerCombo=0,this.comboCount=0}preload(){this.third.load.preload("dojo_tex","assets/textures/Dojo_Basic.png"),this.third.load.preload("fruits_tex","assets/textures/FruitAtlas.png"),this.third.load.preload("fruit_shadow","assets/textures/Fruit_shadow.png"),this.third.load.preload("bomb_tex","assets/textures/BombRedCross.png"),this.third.load.preload("bomb_ray_tex","assets/effects/BombRay.png"),this.third.load.preload("splash_tex","assets/textures/splat12.png"),this.third.load.preload("splash2_tex","assets/textures/splat14.png"),this.third.load.preload("splash3_tex","assets/textures/splat11.png"),this.third.load.preload("splash4_tex","assets/textures/splat13.png"),this.third.load.preload("FruitTrail","assets/textures/particles/FruitTrail.png"),this.third.load.preload("CriticalTrail","assets/textures/particles/Star.png"),this.third.load.preload("BombTrail","assets/textures/particles/Spark01.png"),this.third.load.preload("BombSmoke","assets/textures/particles/SmokeYellow.png"),this.third.load.preload("SplashSlice1","assets/textures/SplashSlice.png"),this.third.load.preload("SplashSlice2","assets/textures/SplashSlice2.png"),this.third.load.preload("classic_ring_tex","assets/textures/FruitRingClassic.png"),this.third.load.preload("settings_ring_tex","assets/textures/FruitRingPurple.png"),this.third.load.preload("shadow_ring_tex","assets/textures/FruitRingShadow.png"),this.third.load.preload("quit_ring_tex","assets/textures/FruitRingQuit.png"),this.third.load.preload("retry_ring_tex","assets/textures/FruitRingRetry.png"),this.third.load.preload("back_ring_tex","assets/textures/FruitRingBack.png");const t=i(
/*!./../gameobjects/FruitFactory.js*/"./src/scripts/gameobjects/FruitFactory.js").default;this.fruitFactory=new t(this),this.testBlade=this.add.container(0,0),this.gameData={score:0,best:0}}async create(){this.gameState=-2,this.hitBomb=!1,this.startLedakan=!1,this.showCredit=!1,this.holdCheckUI=!1,this.homeAnimation=!1,this.homescreenBgm=this.sound.add("MusicMenu",{loop:1}),this.gameplayBgm=this.sound.add("AmbArenaClassicLP",{loop:1}),this.homescreenBgm.play({loop:1}),this.input.on("pointerdown",this.OnPointerDown,this),this.input.on("pointermove",this.OnPointerMove,this),this.input.on("pointerup",this.OnPointerUp,this),this.third.warpSpeed("light","camera","sky"),this.third.camera.position.set(0,0,200);this.third.lights.hemisphereLight({skyColor:16777215,groundColor:0,intensity:.2}),this.third.lights.ambientLight({color:16777215,intensity:.2});const t=this.third.lights.directionalLight({color:16777215,intensity:.2});t.position.set(0,0,0);t.shadow.camera.top=10,t.shadow.camera.bottom=-10,t.shadow.camera.left=-10,t.shadow.camera.right=10,t.shadow.mapSize.set(1024,1024);const e={directionalLight:t};this.third.lights=e;const a=await this.third.load.texture("dojo_tex");a.wrapS=s.THREE.RepeatWrapping,a.wrapT=s.THREE.RepeatWrapping;const n=new s.THREE.MeshLambertMaterial({map:a}),o=new s.THREE.Mesh(new s.THREE.PlaneGeometry(22/this.frustumSizeChanger,22/this.frustumSizeChanger),n);o.position.z=-700,this.third.add.existing(o);const r=i(
/*!./../gameobjects/Blade.js*/"./src/scripts/gameobjects/Blade.js").default;this.blade=new r(this),this.startTimer=.75}async contLoad(){await this.resumeLoad()}async resumeLoad(){const t=i(
/*!./../utils/Button.js*/"./src/scripts/utils/Button.js").default,e=await this.third.load.texture("classic_ring_tex");e.wrapS=s.THREE.RepeatWrapping,e.wrapT=s.THREE.RepeatWrapping;const a=new s.THREE.MeshPhongMaterial({map:e});a.transparent=!0,this.planeRing=new s.THREE.Mesh(new s.THREE.PlaneGeometry(5.12/this.frustumSizeChanger,5.12/this.frustumSizeChanger),a),this.planeRing.position.z=-499,this.planeRing.position.y=-2/this.frustumSizeChanger,this.third.add.existing(this.planeRing),this.planeRing.angle=0,this.planeRing.scale.x=0,this.planeRing.scale.y=0,this.planeRing.scale.z=0;let n=this.planeRing;this.tweens.add({targets:n,angle:360,loop:-1,duration:2e4,onUpdate:()=>{this.planeRing.rotation.z=n.angle/180*Math.PI}});const o=await this.third.load.texture("shadow_ring_tex");o.wrapS=s.THREE.RepeatWrapping,o.wrapT=s.THREE.RepeatWrapping;const r=new s.THREE.MeshPhongMaterial({map:o});r.transparent=!0,this.planeShadowRing=new s.THREE.Mesh(new s.THREE.PlaneGeometry(5.12/this.frustumSizeChanger,5.12/this.frustumSizeChanger),r),this.planeShadowRing.position.z=-500,this.planeShadowRing.position.x=.2/this.frustumSizeChanger,this.planeShadowRing.position.y=-2.2/this.frustumSizeChanger,this.third.add.existing(this.planeShadowRing),this.planeShadowRing.scale.x=0,this.planeShadowRing.scale.y=0,this.planeShadowRing.scale.z=0;const h=await this.third.load.texture("settings_ring_tex");h.wrapS=s.THREE.RepeatWrapping,h.wrapT=s.THREE.RepeatWrapping;const l=new s.THREE.MeshPhongMaterial({map:h});l.transparent=!0,this.planeRingSettings=new s.THREE.Mesh(new s.THREE.PlaneGeometry(4.12/this.frustumSizeChanger,4.12/this.frustumSizeChanger),l),this.planeRingSettings.position.z=-499,this.planeRingSettings.position.y=0,this.planeRingSettings.position.x=5.5/this.frustumSizeChanger,this.third.add.existing(this.planeRingSettings),this.planeRingSettings.angle=0;let c=this.planeRingSettings;this.tweens.add({targets:c,angle:360,loop:-1,duration:2e4,onUpdate:()=>{this.planeRingSettings.rotation.z=c.angle/180*Math.PI}}),this.planeShadowRingSettings=new s.THREE.Mesh(new s.THREE.PlaneGeometry(4.12/this.frustumSizeChanger,4.12/this.frustumSizeChanger),r),this.planeShadowRingSettings.position.z=-500,this.planeShadowRingSettings.position.x=5.7/this.frustumSizeChanger,this.planeShadowRingSettings.position.y=-.2/this.frustumSizeChanger,this.third.add.existing(this.planeShadowRingSettings),this.planeRingSettings.scale.x=0,this.planeRingSettings.scale.y=0,this.planeRingSettings.scale.z=0,this.planeShadowRingSettings.scale.x=0,this.planeShadowRingSettings.scale.y=0,this.planeShadowRingSettings.scale.z=0;let d=this.add.image(0,0,"blackAreaforTitle");d.alpha=.6,d.setOrigin(0,0);let p=this.add.image(-10,40,"LogoFruit");p.setOrigin(0,0);let u=this.add.image(p.width-20,30+p.height,"LogoNinja");u.setOrigin(0,1),u.setScale(.7,.7),u.angle=0;let g=this.add.container(150,d.height-10),m=this.add.image(0,0,"ScrollLockBoard");m.setScale(.6,.6),m.setOrigin(.5,.5);let f=this.add.text(0,-2,"Tap Fruit\nto begin",{fontFamily:"gangofchinese",fontSize:30,color:"#5E3C0D",align:"center"});f.setOrigin(.5,.5),g.add(m),g.add(f),g.angle=-8,this.buttonClassic=new t(this,641,513,"ButtonClassic"),this.buttonClassic.on("pointerup",(function(){this.blade.changeClickedHomeClassic(!0)}),this),this.buttonClassic.visible=!1,this.buttonSetting=new t(this,992,385,"MediumButton"),this.buttonSetting.on("pointerup",(function(){this.blade.changeClickedHomeSetting(!0)}),this),this.buttonSetting.visible=!1,this.buttonBack=new t(this,1120,607,"SmallButton"),this.buttonBack.on("pointerup",(function(){this.blade.changeClickedSettingBack(!0),this.buttonBack.visible=!1}),this),this.buttonBack.visible=!1,this.buttonQuit=new t(this,832,607,"MediumSmallButton"),this.buttonQuit.on("pointerup",(function(){this.blade.changeClickedResultQuit(!0),this.buttonQuit.visible=!1}),this),this.buttonQuit.visible=!1,this.buttonRetry=new t(this,450,607,"MediumSmallButton"),this.buttonRetry.on("pointerup",(function(){this.blade.changeClickedResultRetry(!0),this.buttonRetry.visible=!1,this.buttonQuit.visible=!1}),this),this.buttonRetry.visible=!1,this.topHomescreen=this.add.container(0,-500),this.topHomescreen.add(d),this.topHomescreen.add(p),this.topHomescreen.add(u),this.topHomescreen.add(g),this.textReady=this.add.text(420,560,"Ready",{fontFamily:"gangofchinese",fontSize:150}),this.textReady.setStroke("#8A4F00",16);let S=this.textReady.context.createLinearGradient(0,0,0,this.textReady.height);S.addColorStop(0,"#FFF210"),S.addColorStop(1,"#DDA011"),this.textReady.setFill(S),this.textReady.alpha=0,this.textGo=this.add.text(490,560,"GO!!",{fontFamily:"gangofchinese",fontSize:150}),this.textGo.setStroke("#183930",16),S=this.textReady.context.createLinearGradient(0,0,0,this.textGo.height),S.addColorStop(0,"#9CE41D"),S.addColorStop(1,"#69CE21"),this.textGo.setFill(S),this.textGo.alpha=0,this.textReady.visible=!1,this.textGo.visible=!1,this.contGameplayUI=this.add.container(0,0),this.iconScore=this.add.image(61,61,"HUDWatermelon"),this.iconScore.setScale(.4,.4),this.iconScore.setOrigin(.5,.5),this.contGameplayUI.add(this.iconScore),this.textScore=this.add.text(110,0,"0",{fontFamily:"gangofchinese",fontSize:105}),this.textScore.setStroke("#633700",8),S=this.textScore.context.createLinearGradient(0,0,0,this.textScore.height),S.addColorStop(0,"#FEF65C"),S.addColorStop(1,"#EB8D11"),this.textScore.setFill(S),this.contGameplayUI.add(this.textScore),this.textBest=this.add.text(25,110,"Best: 0",{fontFamily:"gangofchinese",fontSize:35}),this.textBest.setStroke("#3E1400",8),S=this.textBest.context.createLinearGradient(0,0,0,this.textBest.height),S.addColorStop(0,"#FCA21E"),S.addColorStop(1,"#DF7200"),this.textBest.setFill(S),this.contGameplayUI.add(this.textBest),this.textBestGreen=this.add.text(25,110,"Best: 0",{fontFamily:"gangofchinese",fontSize:35}),this.textBestGreen.setStroke("#1F4201",8),S=this.textBest.context.createLinearGradient(0,0,0,this.textBest.height),S.addColorStop(0,"#15F21D"),S.addColorStop(1,"#17AD0E"),this.textBestGreen.setFill(S),this.contGameplayUI.add(this.textBestGreen),this.cross3=this.add.image(1280,10,"CrossBlue"),this.cross3.setOrigin(1,0),this.cross3.setScale(.8359375,.8359375),this.cross2=this.add.image(1170,10,"CrossBlue"),this.cross2.setOrigin(1,0),this.cross2.setScale(.7109375,.7109375),this.cross1=this.add.image(1076,10,"CrossBlue"),this.cross1.setOrigin(1,0),this.cross1.setScale(.5859375,.5859375),this.contGameplayUI.add(this.cross1),this.contGameplayUI.add(this.cross2),this.contGameplayUI.add(this.cross3),this.contGameplayUI.y=-200,this.crossList=[this.cross1,this.cross2,this.cross3],this.crossFruitPool=[],this.resetGameplay(),this.initResultScreen();const y=await this.third.load.texture("retry_ring_tex");y.wrapS=s.THREE.RepeatWrapping,y.wrapT=s.THREE.RepeatWrapping;const x=new s.THREE.MeshPhongMaterial({map:y});x.transparent=!0,this.planeRingPA=new s.THREE.Mesh(new s.THREE.PlaneGeometry(3.62/this.frustumSizeChanger,3.62/this.frustumSizeChanger),x),this.planeRingPA.position.z=-499,this.planeRingPA.position.y=-3.5/this.frustumSizeChanger,this.planeRingPA.position.x=-3/this.frustumSizeChanger,this.third.add.existing(this.planeRingPA),this.planeRingPA.angle=0,this.planeRingPA.scale.x=0,this.planeRingPA.scale.y=0,this.planeRingPA.scale.z=0;let b=this.planeRingPA;this.tweens.add({targets:b,angle:360,loop:-1,duration:2e4,onUpdate:()=>{this.planeRingPA.rotation.z=b.angle/180*Math.PI}}),this.planeShadowRingPA=new s.THREE.Mesh(new s.THREE.PlaneGeometry(3.62/this.frustumSizeChanger,3.62/this.frustumSizeChanger),r),this.planeShadowRingPA.position.z=-500,this.planeShadowRingPA.position.x=-2.8/this.frustumSizeChanger,this.planeShadowRingPA.position.y=-3.7/this.frustumSizeChanger,this.third.add.existing(this.planeShadowRingPA),this.planeShadowRingPA.scale.x=0,this.planeShadowRingPA.scale.y=0,this.planeShadowRingPA.scale.z=0,this.planeRingPA.visible=!1,this.planeShadowRingPA.visible=!1;const w=await this.third.load.texture("quit_ring_tex");w.wrapS=s.THREE.RepeatWrapping,w.wrapT=s.THREE.RepeatWrapping;const v=new s.THREE.MeshPhongMaterial({map:w});v.transparent=!0,this.planeRingQuit=new s.THREE.Mesh(new s.THREE.PlaneGeometry(3.62/this.frustumSizeChanger,3.62/this.frustumSizeChanger),v),this.planeRingQuit.position.z=-499,this.planeRingQuit.position.y=-3.5/this.frustumSizeChanger,this.planeRingQuit.position.x=3/this.frustumSizeChanger,this.third.add.existing(this.planeRingQuit),this.planeRingQuit.angle=0,this.planeRingQuit.scale.x=0,this.planeRingQuit.scale.y=0,this.planeRingQuit.scale.z=0;let C=this.planeRingQuit;this.tweens.add({targets:C,angle:360,loop:-1,duration:2e4,onUpdate:()=>{this.planeRingQuit.rotation.z=C.angle/180*Math.PI}}),this.planeShadowRingQuit=new s.THREE.Mesh(new s.THREE.PlaneGeometry(3.62/this.frustumSizeChanger,3.62/this.frustumSizeChanger),r),this.planeShadowRingQuit.position.z=-500,this.planeShadowRingQuit.position.x=3.2/this.frustumSizeChanger,this.planeShadowRingQuit.position.y=-3.7/this.frustumSizeChanger,this.third.add.existing(this.planeShadowRingQuit),this.planeShadowRingQuit.scale.x=0,this.planeShadowRingQuit.scale.y=0,this.planeShadowRingQuit.scale.z=0,this.planeRingQuit.visible=!1,this.planeShadowRingQuit.visible=!1,this.textGameover=this.add.image(640,384,"GOText"),this.textGameover.setOrigin(.5,.5),this.textGameover.setScale(0,0),this.textGameover.visible=!1,this.glowLedakan=this.add.image(640,384,"Glow"),this.glowLedakan.visible=!1,this.waveList=[{id:1,minWave:0,chance:90,chanceRegrowth:.33,delay:1,dtScale:.9,dtScaleIncrease:0,fruitChance:[{fruits:["Watermelon"],min:1,max:1,between:0}]},{id:2,minWave:1,chance:90,chanceRegrowth:.33,delay:1,dtScale:.9,dtScaleIncrease:0,fruitChance:[{fruits:["R"],min:1,max:1,between:0}]},{id:3,minWave:2,chance:90,chanceRegrowth:.33,delay:1,dtScale:.9,dtScaleIncrease:0,fruitChance:[{fruits:["R"],min:2,max:3,between:0}]},{id:4,minWave:4,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.9,dtScaleIncrease:0,fruitChance:[{fruits:["Bomb"],min:1,max:2,between:0}]},{id:5,minWave:5,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.9,dtScaleIncrease:0,fruitChance:[{fruits:["Bomb"],min:1,max:1,between:0},{fruits:["R"],min:1,max:2,between:0}]},{id:6,minWave:5,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.9,dtScaleIncrease:0,fruitChance:[{fruits:["R"],min:7,max:7,between:.7}]},{id:7,minWave:9,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.95,dtScaleIncrease:0,fruitChance:[{fruits:["R","R","B"],min:4,max:6,between:.6}]},{id:8,minWave:9,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.95,dtScaleIncrease:0,fruitChance:[{fruits:["R"],min:4,max:6,between:0}]},{id:9,minWave:9,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.95,dtScaleIncrease:0,fruitChance:[{fruits:["R","R","R","B"],min:3,max:4,between:0}]},{id:10,minWave:14,chance:90,chanceRegrowth:.33,delay:.8,dtScale:.95,dtScaleIncrease:0,fruitChance:[{fruits:["Bomb"],min:1,max:2,between:0},{fruits:["R"],min:2,max:3,between:0}]},{id:11,minWave:14,chance:90,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:0,fruitChance:[{fruits:["R","R","B"],min:16,max:16,between:.4}]},{id:12,minWave:14,chance:90,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:0,fruitChance:[{fruits:["R"],min:10,max:10,between:.3}]},{id:13,minWave:19,chance:90,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:0,fruitChance:[{fruits:["R","R","B"],min:8,max:8,between:.5,delayInc:-.2}]},{id:14,minWave:19,chance:90,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:0,fruitChance:[{fruits:["R","R","R","R","R","B"],min:4,max:6,between:0}]},{id:15,minWave:22,chance:67,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:.02,fruitChance:[{fruits:["R","R","R","B"],min:5,max:10,between:.4}]},{id:16,minWave:22,chance:67,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:.02,fruitChance:[{fruits:["R","R","R","B"],min:3,max:5,between:.4}]},{id:17,minWave:22,chance:67,chanceRegrowth:.33,delay:.8,dtScale:.9,dtScaleIncrease:.02,fruitChance:[{fruits:["R"],min:4,max:7,between:.25}]},{id:18,minWave:22,chance:68,chanceRegrowth:.33,delay:.8,dtScale:1,dtScaleIncrease:.02,fruitChance:[{fruits:["R","R","B"],min:5,max:7,between:.4}]}],this.waveCounter=0,this.ring=this.add.image(640,384,"Ring"),this.impact=this.add.image(640,384,"ImpactClassic"),this.ring.visible=!1,this.impact.visible=!1,this.creditsPopup=this.add.container(0,0);let F=this.add.image(490,384,"BackingPaper");F.setScale(1.6,1.25);let R=this.createWoodBorder(340,264,595,475,.5,.5);this.creditsPopup.add(F),this.creditsPopup.add(R);let T=this.createCreditsText();var B=this.make.graphics();B.fillRect(42,75,880,620);var E=new Phaser.Display.Masks.GeometryMask(this,B);T.y=0,T.setMask(E);let M=this.createCreditsText();M.y=5900,M.setMask(E),this.tCrd1=T,this.tCrd2=M,this.conCreditText=this.add.container(0,0),this.conCreditText.add(T),this.conCreditText.add(M),this.conCreditText.setSize(1638,17700),this.holdCredit=!1;let P=this;this.conCreditText.setInteractive().on("drag",(function(t,e,i){P.conCreditText.y=i,P.delayScrollCredit=0,P.holdCredit=!0})),this.conCreditText.setInteractive().on("dragend",(function(t,e,i){P.holdCredit=!1})),this.input.setDraggable(this.conCreditText),this.creditsPopup.add(this.conCreditText),this.creditsPopup.visible=!1;let A=this.add.image(1100,270,"BackingPaper"),_=this.add.image(1100,270,"BorderWood");A.setScale(.6,.5),_.setScale(.744,.62),this.audioPopup=this.add.container(0,0),this.audioPopup.add(A),this.audioPopup.add(_),this.audioPopup.visible=!1;let z=this.add.text(1100,160,"Audio",{fontFamily:"gangofchinese",fontSize:60,color:"#653A11",align:"center"}).setOrigin(.5,0);this.audioPopup.add(z),this.buttonSFX=new t(this,1030,300,"ButtonSFX"),this.buttonBGM=new t(this,1170,300,"ButtonMusic"),this.BGMMuted=!1,this.SFXMuted=!1,this.buttonSFX.on("pointerup",(function(){this.buttonSFX.clicked&&this.toogleSFX(),this.buttonSFX.animateRelease()}),this),this.buttonBGM.on("pointerup",(function(){this.buttonBGM.clicked&&this.toogleMusic(),this.buttonBGM.animateRelease()}),this),this.audioPopup.add(this.buttonSFX),this.audioPopup.add(this.buttonBGM),this.textVersi=this.add.text(450,708,"v1.1.0.8",{fontFamily:"gangofchinese",fontSize:30,color:"#FFFFFF",align:"center"}).setOrigin(.5,0),this.textVersi.setStroke("#464646",8);let I=this.textVersi.context.createLinearGradient(0,0,0,this.textVersi.height);I.addColorStop(0,"#CECFCE"),I.addColorStop(.5,"#FFFFFF"),I.addColorStop(.5,"#CECFCE"),I.addColorStop(1,"#FFFFFF"),this.textVersi.setFill(I),this.textVersi.visible=!1;const G=await this.third.load.texture("back_ring_tex");G.wrapS=s.THREE.RepeatWrapping,G.wrapT=s.THREE.RepeatWrapping;const U=new s.THREE.MeshPhongMaterial({map:G});U.transparent=!0,this.planeRingBack=new s.THREE.Mesh(new s.THREE.PlaneGeometry(3.12/this.frustumSizeChanger,3.12/this.frustumSizeChanger),U),this.planeRingBack.position.z=-499,this.planeRingBack.position.y=-3.5/this.frustumSizeChanger,this.planeRingBack.position.x=7.5/this.frustumSizeChanger,this.third.add.existing(this.planeRingBack),this.planeRingBack.angle=0;let H=this.planeRingBack;this.tweens.add({targets:H,angle:360,loop:-1,duration:2e4,onUpdate:()=>{this.planeRingBack.rotation.z=H.angle/180*Math.PI}}),this.planeShadowRingBack=new s.THREE.Mesh(new s.THREE.PlaneGeometry(3.12/this.frustumSizeChanger,3.12/this.frustumSizeChanger),r),this.planeShadowRingBack.position.z=-500,this.planeShadowRingBack.position.x=7.7/this.frustumSizeChanger,this.planeShadowRingBack.position.y=-3.7/this.frustumSizeChanger,this.third.add.existing(this.planeShadowRingBack),this.planeRingBack.visible=!1,this.planeShadowRingBack.visible=!1,this.CriticalText=i(
/*!./../gameobjects/CriticalText.js*/"./src/scripts/gameobjects/CriticalText.js").default,this.poolCritical=[],this.activeCritical=[];for(let t=0;t<5;t++){let t=new this.CriticalText(this,0,0);t.deactivate(),this.poolCritical.push(t)}this.ComboText=i(
/*!./../gameobjects/ComboText.js*/"./src/scripts/gameobjects/ComboText.js").default,this.poolComboText=[],this.activeComboText=[],this.iconScaleUp=!1;for(let t=0;t<5;t++){let t=new this.ComboText(this,0,0);t.deactivate(),this.poolComboText.push(t)}this.scene.stop("PreloadScene"),this.gameState=-1,this.tweens.add({targets:this.topHomescreen,y:0,duration:250}),this.buttonClassic.visible=!0,this.buttonSetting.visible=!0,PokiSDK.gameLoadingFinished()}showCriticalText(t,e){let i;0==this.poolCritical.length?i=new this.CriticalText(this,0,0):(i=this.poolCritical[0],this.poolCritical.splice(0,1)),i.setPosition(t,e),i.activate(),this.SFXMuted||this.sound.play("UICritical"),this.gameData.score+=10,this.activeCritical.push(i)}createRingFruitTweenDisappear(t,e,i){let s={scale:1};this.tweens.add({targets:s,scale:0,duration:200,onUpdate:()=>{t.scale.x=s.scale,t.scale.y=s.scale,t.scale.z=s.scale,e.scale.x=s.scale,e.scale.y=s.scale,e.scale.z=s.scale,i.object.traverse((function(t){(t.name.includes("Whole")||t.name.includes("whole"))&&(t.scale.x=s.scale,t.scale.y=s.scale,t.scale.z=s.scale),(t.name.includes("Half")||t.name.includes("half"))&&(t.scale.x=s.scale,t.scale.y=s.scale,t.scale.z=s.scale)}))},onComplete:()=>{t.visible=!1,e.visible=!1,this.fruitFactory.deactivate(i)}})}createRingFruitTweenAppear(t,e,i,s){let a={scale:0};this.tweens.add({targets:a,scale:1,duration:200,onUpdate:()=>{t.scale.x=a.scale,t.scale.y=a.scale,t.scale.z=a.scale,e.scale.x=a.scale,e.scale.y=a.scale,e.scale.z=a.scale,i.object.body.setCollisionFlags(4),i.object.traverse((function(t){(t.name.includes("Whole")||t.name.includes("whole"))&&(t.scale.x=a.scale*s,t.scale.y=a.scale*s,t.scale.z=a.scale*s),(t.name.includes("Bomb")||t.name.includes("bomb"))&&(t.scale.x=a.scale*s,t.scale.y=a.scale*s,t.scale.z=a.scale*s),(t.name.includes("Half")||t.name.includes("half"))&&(t.scale.x=a.scale,t.scale.y=a.scale,t.scale.z=a.scale)}))}})}createRingTweenDisappear(t,e){let i={scale:1};this.tweens.add({targets:i,scale:0,duration:200,onUpdate:()=>{t.scale.x=i.scale,t.scale.y=i.scale,t.scale.z=i.scale,e.scale.x=i.scale,e.scale.y=i.scale,e.scale.z=i.scale},onComplete:()=>{t.visible=!1,e.visible=!1}})}createCreditsText(){let t=this.add.container(0,0),e=this.add.text(490,140,"About",{fontFamily:"gangofchinese",fontSize:80,color:"#B74A32",align:"center"}).setOrigin(.5,.5);t.add(e);let i=this.add.text(490,180,"All ninjas hate fruit!\nSwipe the fruit with your finger to end their journey\n\nBe wary of bombs, and make sensei proud",{fontFamily:"gangofchinese",fontSize:33,color:"#6F461E",align:"center"}).setOrigin(.5,0);t.add(i);let s=this.add.text(490,480,"Credits",{fontFamily:"gangofchinese",fontSize:80,color:"#B74A32",align:"center"}).setOrigin(.5,0),a=this.add.text(490,370,"EXCLUSIVE PARTNER:",{fontFamily:"gangofchinese",fontSize:33,color:"#4D2E11",align:"center"}).setOrigin(.5,0),n=this.add.text(490,410,"STORMS",{fontFamily:"gangofchinese",fontSize:28,color:"#693E17",align:"center"}).setOrigin(.5,0);t.add(s),t.add(a),t.add(n);let o=this.add.text(490,630,"Current Team",{fontFamily:"gangofchinese",fontSize:45,color:"#689927",align:"center"}).setOrigin(.5,0);t.add(o);let r="#4C2E12",h="#6F461F";var l=490,c=290,d=690,p=80,u=33,g=710;let m=this.add.text(c,g,"Team Lead",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),f=this.add.text(c,g+m.height+5,"Shainiel Deo",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(m),t.add(f);let S=this.add.text(d,g,"Art",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),y=this.add.text(d,g+S.height+5,"Laura McCabe",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(S),t.add(y),g=f.y+f.height+p;let x=this.add.text(c,g,"Code",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),b=this.add.text(c,g+x.height+5,"Samantha Turner\nVictor Rykov\nKayleb Garrett",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(x),t.add(b);let w=this.add.text(d,g,"Design",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),v=this.add.text(d,g+w.height+5,"Shainiel Deo\nDylan Van Beek",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(w),t.add(v),g=Math.max(b.y+b.height,v.y+v.height)+p;let C=this.add.text(c,g,"QA",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),F=this.add.text(c,g+C.height+5,"Brent Hobson",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(C),t.add(F);let R=this.add.text(d,g,"Customer Support",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),T=this.add.text(d,g+R.height+5,"Madison Annibale\nAkaash Deo\nSam Scarpignato",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(R),t.add(T),g=Math.max(F.y+F.height,T.y+T.height)+p;let B=this.add.text(c,g,"Audio",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),E=this.add.text(c,g+B.height+5,"Cedar Jones\nJamie Campbell\nRicardo Pujol",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(B),t.add(E);let M=this.add.text(d,g,"Marketing",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),P=this.add.text(d,g+M.height+5,"Jason Maundrell\nSalvatore Compagnone\nOlivia Bambury\nParis Ormerod",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(M),t.add(P),g=Math.max(E.y+E.height,P.y+P.height)+p;let A=this.add.text(l,g,"Original Team",{fontFamily:"gangofchinese",fontSize:45,color:"#689927",align:"center"}).setOrigin(.5,0);t.add(A),g=A.y+A.height+p;let _=this.add.text(c,g,"Team Lead / Design",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),z=this.add.text(c,g+_.height+5,"Luke Muscat",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(_),t.add(z);let I=this.add.text(d,g,"Art",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),G=this.add.text(d,g+I.height+5,"Shath",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(I),t.add(G),g=Math.max(z.y+z.height,G.y+G.height)+p;let U=this.add.text(c,g,"Code",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),H=this.add.text(c,g+U.height+5,"Adam Wood\nStephen Last",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(U),t.add(H);let k=this.add.text(d,g,"QA",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),j=this.add.text(d,g+k.height+5,"Brent Hobson\nJason Maundrell",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(k),t.add(j),g=Math.max(H.y+H.height,j.y+j.height)+p;let O=this.add.text(c,g,"Audio",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),D=this.add.text(c,g+O.height+5,"Jesse Higginson\nCedar Jones",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(O),t.add(D);let W=this.add.text(d,g,"Production",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),L=this.add.text(d,g+W.height+5,"Jason Harwood",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(W),t.add(L),g=Math.max(D.y+D.height,L.y+L.height)+p;let X=this.add.text(l,g,"Marketing",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),J=this.add.text(l,g+X.height+5,"Beverley Chen",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(X),t.add(J),g=J.y+J.height+p;let V=this.add.text(l,g,"Additional Development",{fontFamily:"gangofchinese",fontSize:45,color:"#689927",align:"center"}).setOrigin(.5,0);t.add(V),g=V.y+V.height+p;let Q=this.add.text(c,g,"Adam Nichols\nAnthony Hansen\nAlex Butterfield\nAlex Richardson\nAshley Muller\nBen Marrinan\nBen Vale\nBertrand Thomachot\nBrendon Thomas\nCorey Hearder\nCorey Taylor\nDaemon Walters\nDale Williams\nDaniel Baxter\nDaniel Fisher\nDaniel John\nDean Loades\nElliot Courtney\nEmma Koch\nGareth Heavon-Jones\nGemma Refalo\nGuillaume Evrard\nMark Hurst\nHugh Walters\nJames Barnes\nJames Quick\nJared Oats\nJason Robson\nJesse Higginson",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0),Y=this.add.text(d,g,"John Qian\nJohnathon Carr\nJonathan Law\nJordan Comino\nJosh Sanderson\nKate Hynes\nLayton Hawkes\nMatt Millwood\nMatt Ross\nMatthew Knights\nMelanie Devoy\nMichael Dobele\nMichael Szewczyk\nMotze Asher\nMurry Lancashire\nNathan Steenstra\nPaul McNab\nPhil Larsen\nRamine Darabiha\nResa Liputra\nRichard McKinney\nRod Wong\nRyan Langley\nSean Druitt\nSean Ockert\nTerry Greisbach\nWill Goddard\nWren Brier\nZac Congo",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(Q),t.add(Y),g=Math.max(Q.y+Q.height,Y.y+Y.height)+p;let N=this.add.text(c,g,"CEO",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),K=this.add.text(c,g+N.height+5,"Shainiel Deo",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(N),t.add(K);let q=this.add.text(d,g,"CFO",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),Z=this.add.text(d,g+q.height+5,"Rinal Deo",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(q),t.add(Z),g=Math.max(K.y+K.height,Z.y+Z.height)+p;let $=this.add.text(c,g,"Marketing",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),tt=this.add.text(c,g+$.height+5,"Beverley Chen\nBob Jones\nFiona Guo\nJames Schultz\nJustin Bowen\nMichelle Whitehead\nPhoebe Ong\nScheree Reeves\nTerry Greisbach\nToby Meadows",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add($),t.add(tt);let et=this.add.text(d,g,"Engine",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),it=this.add.text(d,g+et.height+5,"Jason Maundrell\nGrant Peters\nZac Congo",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(et),t.add(it),g=Math.max(tt.y+tt.height,it.y+it.height)+p;let st=this.add.text(c,g,"QA",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),at=this.add.text(c,g+$.height+5,"Charles Bussy\nClement Valette\nKirby Scarfe\nSethlans Vayu",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(st),t.add(at);let nt=this.add.text(d,g,"Support",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),ot=this.add.text(d,g+et.height+5,"Brendan Deboy\nChloe Pearson\nChris Edwards\nGenevieve Carter\nGeorgia Shephard\nPaul Howatson\nPing Ma\nSam Gillespie\nSam White\nSethlans Vayu",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(nt),t.add(ot),g=Math.max(at.y+at.height,ot.y+ot.height)+p;let rt=this.add.text(l,g,"Special Thanks",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),ht=this.add.text(l,g+et.height+5,"Char + Emma Wood\nKaaren + Raymond Hawkes\nKate Exley\nKing Dragon Le + Family\nLauren Fryer\nLeah Mostyn\nMadonna + Callum Bryan\nNatalie Clarke\nNell + Calyb Rehua\nShinta Liputra\nStella Kalis",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(rt),t.add(ht),g=ht.y+ht.height+p;let lt=this.add.text(l,g,"© 2010 - 2021 Halfbrick Studios Pty Ltd. FRUIT NINJA®\nGame characters, Halfbrick and logo are trademarks of\nHalfbrick Studios Pty Ltd and are protected by copyright.\nAll rights reserved.",{fontFamily:"gangofchinese",fontSize:28,color:h,align:"center"}).setOrigin(.5,0);t.add(lt),g=lt.y+lt.height+p;let ct=this.add.text(l,g,"Bonus Fruit Fact",{fontFamily:"gangofchinese",fontSize:u,color:r,align:"center"}).setOrigin(.5,0),dt=this.add.text(l,g+ct.height+5,"Sensei loves prunes! :p",{fontFamily:"gangofchinese",fontSize:u,color:h,align:"center"}).setOrigin(.5,0);t.add(ct),t.add(dt),g=dt.y+dt.height+p;let pt=this.add.text(490,g,"Special Thanks:",{fontFamily:"gangofchinese",fontSize:33,color:"#4D2E11",align:"center"}).setOrigin(.5,0),ut=this.add.text(490,g+pt.height+5,"Own Games Indonesia",{fontFamily:"gangofchinese",fontSize:28,color:"#693E17",align:"center"}).setOrigin(.5,0);return t.add(pt),t.add(ut),t}initResultScreen(){this.wholePopupGameover=this.add.container(0,0),this.popupGameover=this.add.image(640,25,"ParchmentBackingLarge"),this.popupGameover.setOrigin(.5,0),this.popupGameover.setScale(1.25,1.25);let t=this.add.image(this.popupGameover.x+this.popupGameover.width/2*1.25-20,this.popupGameover.y+119,"SenseiHead");t.setOrigin(.5,.5),t.setScale(.625,.625),t.angle=-20;let e=this.add.text(640,70,"SCORE",{fontFamily:"gangofchinese",fontSize:85});e.setStroke("#633700",8);let s=e.context.createLinearGradient(0,0,0,e.height);s.addColorStop(0,"#FDF353"),s.addColorStop(1,"#E38D13"),e.setOrigin(.5,0),e.setFill(s),this.textScoreGameover=this.add.text(640,265,"0",{fontFamily:"gangofchinese",fontSize:275}),this.textScoreGameover.setStroke("#633700",16),s=this.textScoreGameover.context.createLinearGradient(0,0,0,this.textScoreGameover.height),s.addColorStop(0,"#FDF353"),s.addColorStop(1,"#E38D13"),this.textScoreGameover.setFill(s),this.textScoreGameover.setOrigin(.5,.5),this.newBestText=this.add.text(640,380,"NEW BEST!",{fontFamily:"gangofchinese",fontSize:55}),this.newBestText.setStroke("#360000",4),s=e.context.createLinearGradient(0,0,0,this.newBestText.height),s.addColorStop(0,"#FF9E26"),s.addColorStop(1,"#B32E0B"),this.newBestText.setOrigin(.5,0),this.newBestText.setFill(s),this.newBestText.visible=!1,this.wholePopupGameover.add(this.popupGameover),this.wholePopupGameover.add(t),this.wholePopupGameover.add(e),this.wholePopupGameover.add(this.textScoreGameover),this.wholePopupGameover.add(this.newBestText),this.wholePopupGameover.visible=!1;const a=i(
/*!./../utils/ScreenShake.js*/"./src/scripts/utils/ScreenShake.js").default;this.screenShake=a()}getCrossFruit(t){let e;0==this.crossFruitPool.length?e=this.createCrossFruit():(e=this.crossFruitPool[0],this.crossFruitPool.splice(0,1)),e.visible=!0,e.setOrigin(.5,.5),e.x=t,e.scale=0,this.tweens.add({targets:e,scale:1,duration:200,onComplete:()=>{this.tweens.add({targets:e,scale:0,duration:200,delay:700,onComplete:()=>{e.visible=!1,this.crossFruitPool.push(e)}})}})}createCrossFruit(){let t=this.add.image(0,720,"CrossRed");return t.visible=!1,t.setOrigin(.5,.5),t}update(t,e){if(this.screenShake&&(this.screenShake.update(this.third.camera),this.startLedakan&&(this.timerStartLedakan-=e,this.timerStartLedakan<=0&&(this.screenShake.shake(this.third.camera,new s.THREE.Vector3(.0625,.0625,0),100),this.timerStartLedakan=100))),-1==this.gameState)this.fruitFactory&&(this.fruitFactory.positionWaterMelonUI(),this.fruitFactory.positionFruitUI("KWUI",5.5,0,.85),this.gameState=0,this.createRingFruitTweenAppear(this.planeRing,this.planeShadowRing,this.fruitFactory.getFruit("WMUI"),.85),this.createRingFruitTweenAppear(this.planeRingSettings,this.planeShadowRingSettings,this.fruitFactory.getFruit("KWUI"),.85));else if(0==this.gameState){if(this.blade&&(this.blade.updateBlade(e),!this.holdCheckUI&&!this.homeAnimation)){let t=this.blade.checkFruitsUI(this.fruitFactory);"WMUI"==t?(this.blade.changeCurrentScreen("GameScreen"),this.moveToGameplay()):"KWUI"==t?(this.blade.changeCurrentScreen("SettingScreen"),this.moveToSettings()):"BUI"==t&&(this.blade.changeCurrentScreen("HomeScreen"),this.exitSettings()),this.fruitFactory&&this.fruitFactory.update(e),this.showCredit&&(this.delayScrollCredit-=e,this.delayScrollCredit<=0&&(this.holdCredit||(this.conCreditText.y-=150*e/1e3),this.conCreditText.y<=-5900?this.conCreditText.y+=5900:this.conCreditText.y>0&&(this.conCreditText.y-=5900)))}}else if(1==this.gameState)this.blade&&(this.blade.updateBlade(e),this.blade.checkFruits(this.fruitFactory)),this.fruitFactory&&this.fruitFactory.update(e);else if(2==this.gameState){if(this.fruitFactory){if(this.startTimer-=e/1e3,this.startTimer<=0&&!this.hitBomb){this.getWave()}if(this.fruitFactory&&this.fruitFactory.update(e),this.blade){this.blade.updateBlade(e);this.gameData.score;let t=this.blade.checkFruits(this.fruitFactory);this.gameData.score+=t,this.timerCombo>0&&(this.timerCombo-=e,this.timerCombo<=0&&(this.timerCombo=0,this.comboCount>=3&&this.showCombo(this.comboCount,this.lastPosX,this.lastPosY),this.comboCount=0)),0!=t&&(0==this.comboCount?(this.timerCombo=300,this.comboCount=t):(this.timerCombo+=100,this.comboCount+=t))}this.updateScore(e);for(let t=0;t<this.activeComboText.length;t++)0==this.activeComboText[t].visible&&(this.poolComboText.push(this.activeComboText[t]),this.activeComboText.splice(t,1));for(let t=0;t<this.activeCritical.length;t++)0==this.activeCritical[t].visible&&(this.poolCritical.push(this.activeCritical[t]),this.activeCritical.splice(t,1))}}else if(3==this.gameState)this.fruitFactory&&this.fruitFactory.update(e),this.blade&&this.blade.updateBlade(e);else if(4==this.gameState){if(this.fruitFactory&&this.fruitFactory.update(e),this.blade){this.blade.updateBlade(e);let t=this.blade.checkFruitsUI(this.fruitFactory);gameMode!=GAMEMODE_TOURNAMENT?"AGUI"==t?(this.blade.changeCurrentScreen("GameScreen"),this.showAds("gameplay"),this.hideResults()):"BUI"==t&&(this.blade.changeCurrentScreen("HomeScreen"),this.showAds("homescreen"),this.hideResults()):"AGUI"==t?this.replayGame():"BUI"==t&&this.moveToHomescreen()}}else 5==this.gameState&&(this.adsShowing||(this.timerAds+=e),this.fruitFactory&&this.fruitFactory.update(e),this.blade&&this.blade.updateBlade(e),this.timerAds>=3e3&&(this.startShowAds=!1,this.timerAds=0,"homescreen"==this.tipeAds?this.moveToHomescreen():"gameplay"==this.tipeAds&&this.moveToGameplay()))}updateScore(t){if(this.gameData.best<this.gameData.score&&(this.gameData.best=this.gameData.score),this.textBest.text="Best: "+this.gameData.best,this.textBestGreen.text="Best: "+this.gameData.best,this.gameData.best==this.gameData.score&&0!=this.gameData.best?(this.textBest.visible=!1,this.textBestGreen.visible=!0):(this.textBest.visible=!0,this.textBestGreen.visible=!1),this.gameData.displayScore!=this.gameData.score){let e=this.gameData.displayScore;this.iconScaleUp||(this.iconScaleUp=!0,this.tweens.add({targets:this.iconScore,scale:.43,duration:100}));let i=this.gameData.displayScore;i+=t/100,i>this.gameData.score&&(i=this.gameData.score),this.gameData.displayScore=i,this.textScore.text=""+this.gameData.displayScore.toFixed(0);let s=this.gameData.displayScore;Math.floor(s/100)>Math.floor(e/100)&&this.TryRestoreLife()}else this.iconScaleUp&&(this.iconScaleUp=!1,this.tweens.add({targets:this.iconScore,scale:.4,duration:100}))}showCombo(t,e,i){let s;0==this.poolComboText.length?s=new this.ComboText(this,0,0):(s=this.poolComboText[0],this.poolComboText.splice(0,1)),t>=10?this.SFXMuted||this.sound.play("Combo10"):this.SFXMuted||this.sound.play("Combo"+t),this.gameData.score+=t,s.x=e,s.y=i,s.activate(t),this.activeComboText.push(s)}getWave(){let t=[],e=0;for(let i=0;i<this.waveList.length;i++)this.waveCounter>=this.waveList[i].minWave&&(e==this.waveList[i].minWave||(e=this.waveList[i].minWave,t=[]),t.push(this.waveList[i]));let i=t[Phaser.Math.Between(0,t.length-1)],s=0,a=0,n=[-1.2,-.6,.6,1.2];for(let t=0;t<i.fruitChance.length;t++){let e=i.fruitChance[t].fruits,o=Phaser.Math.Between(i.fruitChance[t].min,i.fruitChance[t].max),r=i.fruitChance[t].between;for(let t=0;t<o;t++){let i=e[t%e.length],s=t*r*1e3;0==n.length&&(n=[-1.2,-.6,.6,1.2]);let o=Phaser.Math.Between(0,n.length-1),h=n[o];n.splice(o,1),0==s?this.fruitFactory.spawnFruit(i,10-4*a,h):this.fruitFactory.scheduleSpawnFruit(i,10-4*a,h,s),a++}s<o*r&&(s=o*r)}this.startTimer=i.delay+s+2,this.waveCounter++}notifyBombHit(t,e){this.hitBomb=!0,this.glowLedakan.x=t,this.glowLedakan.y=e,this.tweens.add({targets:this.glowLedakan,scale:200,duration:300,delay:1500,onStart:()=>{this.glowLedakan.visible=!0},onComplete:()=>{this.fruitFactory.clearBomb(),this.tweens.add({targets:this.glowLedakan,duration:500,delay:500,alpha:0,onComplete:()=>{this.glowLedakan.visible=!1,this.glowLedakan.scale=0,this.glowLedakan.alpha=1,this.hitBomb=!1,this.showResult()}});let t=this;setTimeout((function(){t.startLedakan=!1,t.third.camera.position.set(0,0,200)}),800)}}),this.startLedakan=!0,this.timerStartLedakan=0}TryRestoreLife(){if(this.loseCount>0){this.loseCount--,this.SFXMuted||this.sound.play("UIExtraLife"),this.crossList[this.loseCount].setTexture("CrossBlue");let t=this.crossList[this.loseCount].x,e=this.crossList[this.loseCount].y,i=this.crossList[this.loseCount];this.ring.visible=!0,this.impact.visible=!0,this.ring.alpha=1,this.impact.alpha=1,this.ring.x=t-this.crossList[this.loseCount].width/4,this.ring.y=e+this.crossList[this.loseCount].height/4,this.impact.x=t-this.crossList[this.loseCount].width/4,this.impact.y=e+this.crossList[this.loseCount].height/4,this.ring.scale=1,this.impact.scale=1,this.tweens.add({targets:[this.ring,this.impact],scale:3,alpha:0,duration:200,onComplete:()=>{this.ring.visible=!1,this.impact.visible=!1}}),this.tweens.timeline({targets:this.crossList[this.loseCount],loop:2,tweens:[{x:t-6,duration:50},{y:e-6,duration:50},{y:e+6,duration:50},{x:t+6,duration:50}],onComplete:()=>{i.x=t,i.y=e}})}}loseLife(t){if(2==this.gameState&&!this.hitBomb){this.getCrossFruit(t),this.SFXMuted||this.sound.play("UIGank"),this.crossList[this.loseCount].setTexture("CrossRed");let e=this.crossList[this.loseCount].x,i=this.crossList[this.loseCount].y,s=this.crossList[this.loseCount];this.tweens.timeline({targets:this.crossList[this.loseCount],loop:2,tweens:[{x:e-6,duration:50},{y:i-6,duration:50},{y:i+6,duration:50},{x:e+6,duration:50}],onComplete:()=>{s.x=e,s.y=i}}),this.loseCount++,3==this.loseCount&&this.showResult()}}showResult(){PokiSDK.gameplayStop(),this.blade.changeCurrentScreen("ResultScreen"),this.gameState=3,this.textGameover.visible=!0,this.textScoreGameover.text=""+this.gameData.score,this.SFXMuted||this.sound.play("UIGameOver"),this.gameplayBgm.stop(),this.tweens.add({targets:this.textGameover,scale:1,ease:"Back",easeParams:[1.5],duration:1e3,onComplete:()=>{this.tweens.add({targets:this.contGameplayUI,y:-200,duration:500,delay:500}),this.tweens.add({targets:this.textGameover,scale:0,delay:500,duration:500,onComplete:()=>{this.wholePopupGameover.visible=!0,this.gameData.best==this.gameData.score?this.newBestText.visible=!0:this.newBestText.visible=!1,this.wholePopupGameover.y=-500,this.tweens.add({targets:this.wholePopupGameover,y:0,duration:250,onComplete:()=>{this.gameState=4,this.planeRingPA.visible=!0,this.planeShadowRingPA.visible=!0,this.planeRingQuit.visible=!0,this.planeShadowRingQuit.visible=!0,this.buttonQuit.visible=!0,this.buttonRetry.visible=!0,this.fruitFactory.positionFruitUI("AGUI",-3,-3.5,.85),this.fruitFactory.positionFruitUI("BUI",3,-3.5,.85),this.createRingFruitTweenAppear(this.planeRingPA,this.planeShadowRingPA,this.fruitFactory.getFruit("AGUI"),.85),this.createRingFruitTweenAppear(this.planeRingQuit,this.planeShadowRingQuit,this.fruitFactory.getFruit("BUI"),.65)}})}})}}),setTimeout((function(){PokiSDK.commercialBreak((()=>{})).then((()=>{}))}),2500)}exitSettings(){this.showCredit=!1,this.createRingTweenDisappear(this.planeRingBack,this.planeShadowRingBack),this.tweens.add({targets:this.audioPopup,x:800,duration:1e3}),this.tweens.add({targets:[this.creditsPopup,this.textVersi],x:-2e3,duration:1e3,onComplete:()=>{this.fruitFactory.resetWaterMelonUI("BUI"),this.creditsPopup.visible=!1,this.audioPopup.visible=!1,this.textVersi.visible=!1,this.moveToHomescreen()}})}moveToHomescreen(){this.resetGameplay(),this.planeRingPA.visible=!1,this.planeShadowRingPA.visible=!1,this.planeRingQuit.visible=!1,this.planeShadowRingQuit.visible=!1,this.homeAnimation=!0,this.fruitFactory.resetWaterMelonUI("AGUI"),this.fruitFactory.resetWaterMelonUI("BUI"),0!=this.gameState&&(this.BGMMuted||(this.homescreenBgm.play(),this.tweens.add({targets:this.homescreenBgm,volume:1,duration:500,onComplete:()=>{}}))),this.tweens.add({targets:this.wholePopupGameover,y:-500,duration:500,onComplete:()=>{this.gameState=-1,this.planeRing.visible=!0,this.planeShadowRing.visible=!0,this.planeRingSettings.visible=!0,this.planeShadowRingSettings.visible=!0,this.tweens.add({targets:this.topHomescreen,y:0,duration:500,onComplete:()=>{this.homeAnimation=!1}}),this.createRingFruitTweenAppear(this.planeRing,this.planeShadowRing,this.fruitFactory.getFruit("WMUI"),.85),this.createRingFruitTweenAppear(this.planeRingSettings,this.planeShadowRingSettings,this.fruitFactory.getFruit("KWUI"),.85)}}),this.buttonClassic.visible=!0,this.buttonSetting.visible=!0,this.buttonBack.visible=!1,this.buttonQuit.visible=!1,this.buttonRetry.visible=!1}moveToSettings(){this.tweens.add({targets:this.topHomescreen,y:-500,duration:250}),this.creditsPopup.visible=!0,this.audioPopup.visible=!0,this.textVersi.visible=!0,this.holdCheckUI=!0,this.buttonClassic.visible=!1,this.buttonSetting.visible=!1,this.createRingFruitTweenDisappear(this.planeRing,this.planeShadowRing,this.fruitFactory.getFruit("WMUI")),this.createRingTweenDisappear(this.planeRingSettings,this.planeShadowRingSettings),this.creditsPopup.x=-2e3,this.textVersi.x=-1550,this.tweens.add({targets:this.textVersi,x:450,duration:500}),this.audioPopup.x=800,this.tweens.add({targets:[this.creditsPopup,this.audioPopup],x:0,duration:500,onComplete:()=>{this.fruitFactory.resetWaterMelonUI("KWUI"),this.fruitFactory.resetWaterMelonUI("WMUI"),this.delayScrollCredit=1e3,this.showCredit=!0,this.holdCheckUI=!1,this.planeRingBack.visible=!0,this.planeShadowRingBack.visible=!0,this.fruitFactory.positionFruitUI("BUI",7.5,-3.5,.65),this.createRingFruitTweenAppear(this.planeRingBack,this.planeShadowRingBack,this.fruitFactory.getFruit("BUI"),.65)}}),this.buttonBack.visible=!0}moveToGameplay(){PokiSDK.gameplayStart(),this.buttonClassic.visible=!1,this.buttonSetting.visible=!1,this.waveCounter=0,this.hitBomb=!1,this.gameState=1,this.holdCheckUI=!0,this.BGMMuted||this.gameplayBgm.play(),this.tweens.add({targets:this.homescreenBgm,volume:0,duration:500,onComplete:()=>{this.homescreenBgm.stop(),this.holdCheckUI=!1,this.SFXMuted||this.sound.play("UIGameStart")}}),this.createRingFruitTweenDisappear(this.planeRingSettings,this.planeShadowRingSettings,this.fruitFactory.getFruit("KWUI")),this.createRingTweenDisappear(this.planeRing,this.planeShadowRing),this.textReady.visible=!0,this.textBest.visible=!0,this.textBestGreen.visible=!1,this.tweens.add({targets:this.topHomescreen,y:-500,duration:250}),this.tweens.add({targets:this.textReady,y:"-=250",alpha:1,duration:500,delay:500,onComplete:()=>{this.tweens.add({targets:this.contGameplayUI,y:0,duration:500}),this.tweens.add({targets:this.textReady,y:"-=250",alpha:0,duration:250,delay:200,onComplete:()=>{this.textGo.visible=!0,this.fruitFactory.resetWaterMelonUI("WMUI"),this.fruitFactory.resetWaterMelonUI("KWUI"),this.tweens.add({targets:this.textGo,y:"-=250",alpha:1,duration:250,onComplete:()=>{this.tweens.add({targets:this.textGo,y:"-=250",alpha:0,duration:250,delay:200,onComplete:()=>{this.gameState=2}})}})}})}})}createWoodBorder(t,e,i,s,a,n){let o=this.add.container(t+i*-a,e+s*-n),r=this.add.image(0,0,"BorderWoodTL");r.setOrigin(0,0);let h=this.add.image(i-70,0,"BorderWoodTR");h.setOrigin(0,0);let l=this.add.image(70,0,"BorderWoodT");l.setOrigin(0,0),l.scaleX=(i-140)/116;let c=this.add.image(0,s-70,"BorderWoodBL");c.setOrigin(0,0);let d=this.add.image(i-70,s-70,"BorderWoodBR");d.setOrigin(0,0);let p=this.add.image(70,s-70,"BorderWoodB");p.setOrigin(0,0),p.scaleX=(i-140)/116;let u=this.add.image(0,70,"BorderWoodL"),g=this.add.image(i-70,70,"BorderWoodR");return u.scaleY=(s-140)/116,g.scaleY=(s-140)/116,u.setOrigin(0,0),g.setOrigin(0,0),o.add(r),o.add(h),o.add(l),o.add(c),o.add(d),o.add(p),o.add(u),o.add(g),o.setScale(1.5),o}resetGameplay(){this.loseCount=0,this.contGameplayUI.y=-200,this.textReady.y=560,this.textGo.y=560,this.crossList[0].setTexture("CrossBlue"),this.crossList[1].setTexture("CrossBlue"),this.crossList[2].setTexture("CrossBlue"),this.gameData.score=0,this.gameData.displayScore=0,this.textScore.text=""+this.gameData.score}hideResults(){this.resetGameplay(),this.gameState=5,"gameplay"==this.tipeAds?(this.createRingTweenDisappear(this.planeRingPA,this.planeShadowRingPA),this.createRingFruitTweenDisappear(this.planeRingQuit,this.planeShadowRingQuit,this.fruitFactory.getFruit("BUI"))):(this.createRingFruitTweenDisappear(this.planeRingPA,this.planeShadowRingPA,this.fruitFactory.getFruit("AGUI")),this.createRingTweenDisappear(this.planeRingQuit,this.planeShadowRingQuit)),this.tweens.add({targets:this.wholePopupGameover,y:-500,duration:250,onComplete:()=>{this.fruitFactory.resetWaterMelonUI("BUI")}})}replayGame(){this.resetGameplay(),this.createRingTweenDisappear(this.planeRingPA,this.planeShadowRingPA),this.createRingFruitTweenDisappear(this.planeRingQuit,this.planeShadowRingQuit,this.fruitFactory.getFruit("BUI")),this.tweens.add({targets:this.wholePopupGameover,y:-500,duration:250,onComplete:()=>{this.fruitFactory.resetWaterMelonUI("BUI")}})}toogleMusic(){this.BGMMuted=!this.BGMMuted,this.BGMMuted?(this.buttonBGM.setTexture("ButtonMusicMute"),this.homescreenBgm.stop()):(this.buttonBGM.setTexture("ButtonMusic"),this.homescreenBgm.play())}toogleSFX(){this.SFXMuted=!this.SFXMuted,this.SFXMuted?this.buttonSFX.setTexture("ButtonSFXMute"):this.buttonSFX.setTexture("ButtonSFX")}OnPointerDown(t){this.startMovingBlade=!0}OnPointerMove(t){!this.startMovingBlade||this.hitBomb||this.holdCredit||this.blade.pushPoint({x:t.x,y:t.y,time:6,first:!0})}OnPointerUp(t){this.startMovingBlade=!1}showAds(t){this.tipeAds=t,this.startShowAds||(this.startShowAds=!0,this.timerAds=0,this.adsShowing=!1,this.startShowAds=!1,"homescreen"==this.tipeAds?this.moveToHomescreen():"gameplay"==this.tipeAds&&this.moveToGameplay())}}},"./src/scripts/scenes/preLoadingScene.js":
/*!***********************************************!*\
!*** ./src/scripts/scenes/preLoadingScene.js ***!
\***********************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"default",(function(){return s}));class s extends Phaser.Scene{constructor(){super({key:"PreloadingScene"})}preload(){this.load.image("splash","assets/splash/splash screen.png"),this.load.image("loadBarIsi","assets/splash/LoadingBar.png"),this.load.image("loadingText","assets/splash/loading text.png"),window.location.href.includes("#tournament")?gameMode=GAMEMODE_TOURNAMENT:gameMode=GAMEMODE_NORMAL}create(){this.scene.start("PreloadScene")}}t.gameMode="normal",t.GAMEMODE_TOURNAMENT="tournament",t.GAMEMODE_NORMAL="normal"}.call(this,i(
/*!./../../../node_modules/webpack/buildin/global.js*/"./node_modules/webpack/buildin/global.js"))},"./src/scripts/scenes/preloadScene.js":
/*!********************************************!*\
!*** ./src/scripts/scenes/preloadScene.js ***!
\********************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return s}));class s extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}init(){this.finishFont=!0,this.finishBar=!1}preload(){this.add.image(640,384,"splash"),this.cameras.main.setBackgroundColor("#000000");var t=this.add.graphics(),e=this.add.graphics(),i=500,s=new Phaser.Geom.Rectangle(390,718,i,40);e=this.add.graphics({fillStyle:{color:3551021,alpha:0}});let a=this.add.image(s.x,s.y+1,"loadBarIsi");a.setOrigin(0,0),e.lineStyle(5,2689543),e.lineBetween(s.x-3,s.y,s.x+s.width+3,s.y),e.lineBetween(s.x,s.y,s.x,s.y+s.height-5),e.lineBetween(s.x-3,s.y+s.height-5,s.x+s.width+3,s.y+s.height-5),e.lineBetween(s.x+s.width,s.y,s.x+s.width,s.y+s.height-5),this.add.image(s.x+250,716,"loadingText").setOrigin(.5,1),this.load.on("loaderror",(function(t){this.registry.destroy(),this.events.off(),this.scene.restart()}),this),this.load.on("progress",(function(e){t.clear(),t.fillStyle(14306304,1),t.fillRect(s.x+2,718,i,16),t.fillStyle(9719040,1),t.fillRect(s.x+2,734,i,16),a.setScale(e*i/32,1)})),this.load.on("complete",(function(){this.finishBar=!0}),this),this.load.audio("AmbArenaClassicLP","assets/sound/AmbArenaClassicLP.mp3"),this.load.audio("MusicMenu","assets/sound/MusicMenu.mp3"),this.load.audio("BladeRegularSwipe01","assets/sound/BladeRegularSwipe01.mp3"),this.load.audio("BladeRegularSwipe02","assets/sound/BladeRegularSwipe02.mp3"),this.load.audio("BladeRegularSwipe03","assets/sound/BladeRegularSwipe03.mp3"),this.load.audio("BladeRegularSwipe04","assets/sound/BladeRegularSwipe04.mp3"),this.load.audio("BladeRegularSwipe05","assets/sound/BladeRegularSwipe05.mp3"),this.load.audio("BladeRegularSwipe06","assets/sound/BladeRegularSwipe06.mp3"),this.load.audio("BladeRegularSwipe07","assets/sound/BladeRegularSwipe07.mp3"),this.load.audio("Combo3","assets/sound/UICombo3Fruit.mp3"),this.load.audio("Combo4","assets/sound/UICombo4Fruit.mp3"),this.load.audio("Combo5","assets/sound/UICombo5Fruit.mp3"),this.load.audio("Combo6","assets/sound/UICombo6Fruit.mp3"),this.load.audio("Combo7","assets/sound/UICombo7Fruit.mp3"),this.load.audio("Combo8","assets/sound/UICombo8Fruit.mp3"),this.load.audio("Combo9","assets/sound/UICombo9Fruit.mp3"),this.load.audio("Combo10","assets/sound/UICombo10FruitPlus.mp3"),this.load.audio("UICritical","assets/sound/UICritical.mp3"),this.load.audio("BombFuseLP","assets/sound/BombFuseLP.mp3"),this.load.audio("BombLaunch","assets/sound/BombLaunch.mp3"),this.load.audio("BombExplodeGameOver","assets/sound/BombExplodeGameOver.mp3"),this.load.audio("FruitImpactApple","assets/sound/FruitImpactApple.mp3"),this.load.audio("FruitImpactBigHollow","assets/sound/FruitImpactBigHollow.mp3"),this.load.audio("FruitImpactBigWet01","assets/sound/FruitImpactBigWet01.mp3"),this.load.audio("FruitImpactBigWet02","assets/sound/FruitImpactBigWet02.mp3"),this.load.audio("FruitImpactBigWet03","assets/sound/FruitImpactBigWet03.mp3"),this.load.audio("FruitImpactMediumDry","assets/sound/FruitImpactMediumDry.mp3"),this.load.audio("FruitImpactMediumWet01","assets/sound/FruitImpactMediumWet01.mp3"),this.load.audio("FruitImpactMediumWet02","assets/sound/FruitImpactMediumWet02.mp3"),this.load.audio("FruitImpactMediumWet03","assets/sound/FruitImpactMediumWet03.mp3"),this.load.audio("FruitImpactSmallWet01","assets/sound/FruitImpactSmallWet01.mp3"),this.load.audio("FruitImpactSmallWet02","assets/sound/FruitImpactSmallWet02.mp3"),this.load.audio("FruitImpactSmallWet03","assets/sound/FruitImpactSmallWet03.mp3"),this.load.audio("FruitLaunch","assets/sound/FruitLaunch.mp3"),this.load.audio("UIGank","assets/sound/UIGank.mp3"),this.load.audio("UIGameOver","assets/sound/UIGameOver.mp3"),this.load.audio("UIGameStart","assets/sound/UIGameStart.mp3"),this.load.audio("UIExtraLife","assets/sound/UIExtraLife.mp3"),this.load.image("JuiceRed","assets/textures/particles/JuiceRed.png"),this.load.image("JuiceGreen","assets/textures/particles/JuiceGreen.png"),this.load.image("JuiceDragonfruit","assets/textures/particles/JuiceDragonfruit.png"),this.load.image("JuiceMango","assets/textures/particles/JuiceMango.png"),this.load.image("JuiceOrange","assets/textures/particles/JuiceOrange.png"),this.load.image("JuicePineapple","assets/textures/particles/JuicePineapple.png"),this.load.image("StarCritical","assets/textures/particles/StarCritical.png"),this.load.image("SliceDiamondNeutral","assets/effects/SliceDiamondNeutral.png"),this.load.image("SliceDiamondCritical","assets/effects/SliceDiamondCritical.png"),this.load.image("FruitSplash","assets/effects/FruitSplash.png"),this.load.image("GOText","assets/UI/gameover text.png"),this.load.image("HUDWatermelon","assets/UI/HUDWatermelon.png"),this.load.image("CrossBlue","assets/UI/CrossBlue.png"),this.load.image("CrossRed","assets/UI/CrossRed.png"),this.load.image("HeaderWood","assets/UI/HeaderWood.png"),this.load.image("blackAreaforTitle","assets/UI/blackAreaforTitle.png"),this.load.image("LogoFruit","assets/UI/LogoFruit.png"),this.load.image("LogoNinja","assets/UI/LogoNinja.png"),this.load.image("ScrollLockBoard","assets/UI/ParchmentBackingSmall.png"),this.load.image("ImpactClassic","assets/effects/ImpactClassic.png"),this.load.image("Ring","assets/effects/Ring01.png"),this.load.image("Glow","assets/effects/Glow.png"),this.load.image("ParchmentBackingLarge","assets/UI/ParchmentBackingLarge.png"),this.load.image("SenseiHead","assets/UI/SenseiHead.png"),this.load.image("BorderWood","assets/UI/BorderWood.png"),this.load.image("BorderWoodTL","assets/UI/BorderWoodTopLeft.png"),this.load.image("BorderWoodT","assets/UI/BorderWoodTop.png"),this.load.image("BorderWoodTR","assets/UI/BorderWoodTopRight.png"),this.load.image("BorderWoodL","assets/UI/BorderWoodLeft.png"),this.load.image("BorderWoodR","assets/UI/BorderWoodRight.png"),this.load.image("BorderWoodBL","assets/UI/BorderWoodBottomLeft.png"),this.load.image("BorderWoodB","assets/UI/BorderWoodBottom.png"),this.load.image("BorderWoodBR","assets/UI/BorderWoodBottomRight.png"),this.load.image("BackingPaper","assets/UI/BackingPaper.png"),this.load.image("ButtonSFX","assets/UI/ButtonSFX.png"),this.load.image("ButtonSFXMute","assets/UI/ButtonSFXMute.png"),this.load.image("ButtonMusic","assets/UI/ButtonMusic.png"),this.load.image("ButtonMusicMute","assets/UI/ButtonMusicMute.png"),this.load.image("ButtonClassic","assets/UI/circle2.png"),this.load.image("MediumButton","assets/UI/medium_button.png"),this.load.image("SmallButton","assets/UI/small_button.png"),this.load.image("MediumSmallButton","assets/UI/medium_small_button.png"),PokiSDK.init().then((()=>{pokiGameLoadingFinished(),setTimeout((function(){pokiRewardBread()}),2500)})).catch((()=>{}))}create(){this.once=!1}update(){this.finishFont&&this.finishBar&&!this.once&&(this.once=!0,this.scene.launch("MainScene"))}}},"./src/scripts/utils/BombSmoke.js":
/*!****************************************!*\
!*** ./src/scripts/utils/BombSmoke.js ***!
\****************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a{constructor(t){const e={diffuseTexture:{value:t.texturePS},pointMultiplier:{value:6}};this._material=new s.THREE.ShaderMaterial({uniforms:e,vertexShader:"\n\tuniform float pointMultiplier;\n\n\tattribute float size;\n\tattribute float angle;\n\tattribute vec4 colour;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n\t  gl_Position = projectionMatrix * mvPosition;\n\t  gl_PointSize = size * pointMultiplier / gl_Position.w;\n\n\t  vAngle = vec2(cos(angle), sin(angle));\n\t  vColour = colour;\n\t}",fragmentShader:"\n\n\tuniform sampler2D diffuseTexture;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n\t  gl_FragColor = texture2D(diffuseTexture, coords) * vColour;\n\t}",blending:s.THREE.NormalBlending,depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),this.curX=0,this.curY=0,this.on=!1,this.emitEvery=.1,this._camera=t.camera,this._particles=[],this._geometry=new s.THREE.BufferGeometry,this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute([],3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute([],1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute([],4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute([],1)),this._points=new s.THREE.Points(this._geometry,this._material),t.parent.add(this._points);const a=i(
/*!./../utils/LinearSpline.js*/"./src/scripts/utils/LinearSpline.js").default;this._alphaSpline=new a(((t,e,i)=>e+t*(i-e))),this._alphaSpline.AddPoint(0,1),this._alphaSpline.AddPoint(1,0),this._colourSpline=new a(((t,e,i)=>e.clone().lerp(i,t))),this._colourSpline.AddPoint(0,new s.THREE.Color(16777215)),this._colourSpline.AddPoint(1,new s.THREE.Color(16777215)),this._sizeSpline=new a(((t,e,i)=>e+t*(i-e))),this._sizeSpline.AddPoint(0,1),this._sizeSpline.AddPoint(1,.5),this._UpdateGeometry()}_AddParticles(t){if(this.gdfsghk||(this.gdfsghk=0),this.gdfsghk+=t,this.gdfsghk>=this.emitEvery){this.gdfsghk=0;const t=.2*Math.random()+.3;this._particles.push({position:new s.THREE.Vector3(this.curX,this.curY,3),size:10,colour:new s.THREE.Color,alpha:1,life:t,maxLife:t,rotation:-Math.PI,velocity:new s.THREE.Vector3(.25,.25,0)})}}_UpdateGeometry(){const t=[],e=[],i=[],a=[];for(let s of this._particles)t.push(s.position.x,s.position.y,s.position.z),i.push(s.colour.r,s.colour.g,s.colour.b,s.alpha),e.push(s.currentSize),a.push(s.rotation);this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute(t,3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute(e,1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute(i,4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute(a,1)),this._geometry.attributes.position.needsUpdate=!0,this._geometry.attributes.size.needsUpdate=!0,this._geometry.attributes.colour.needsUpdate=!0,this._geometry.attributes.angle.needsUpdate=!0}_UpdateParticles(t){for(let e of this._particles)e.life-=t;this._particles=this._particles.filter((t=>t.life>0));for(let e of this._particles){const i=1-e.life/e.maxLife;e.rotation+=.5*t,e.alpha=this._alphaSpline.Get(i),e.currentSize=e.size*this._sizeSpline.Get(i),e.colour.copy(this._colourSpline.Get(i)),e.position.add(e.velocity.clone().multiplyScalar(t));const s=e.velocity.clone();s.multiplyScalar(.1*t),s.x=Math.sign(e.velocity.x)*Math.min(Math.abs(s.x),Math.abs(e.velocity.x)),s.y=Math.sign(e.velocity.y)*Math.min(Math.abs(s.y),Math.abs(e.velocity.y)),s.z=Math.sign(e.velocity.z)*Math.min(Math.abs(s.z),Math.abs(e.velocity.z)),e.velocity.sub(s)}this._particles.sort(((t,e)=>{const i=this._camera.position.distanceTo(t.position),s=this._camera.position.distanceTo(e.position);return i>s?-1:i<s?1:0}))}Step(t){this.on&&this._AddParticles(t),this._UpdateParticles(t),this._UpdateGeometry()}setPosition(t,e){this.curX=t,this.curY=e}setOff(){this.on=!1}setOn(){this.on=!0}}},"./src/scripts/utils/BombTrail.js":
/*!****************************************!*\
!*** ./src/scripts/utils/BombTrail.js ***!
\****************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a{constructor(t){const e={diffuseTexture:{value:t.texturePS},pointMultiplier:{value:6}};this._material=new s.THREE.ShaderMaterial({uniforms:e,vertexShader:"\n\tuniform float pointMultiplier;\n\n\tattribute float size;\n\tattribute float angle;\n\tattribute vec4 colour;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n\t  gl_Position = projectionMatrix * mvPosition;\n\t  gl_PointSize = size * pointMultiplier / gl_Position.w;\n\n\t  vAngle = vec2(cos(angle), sin(angle));\n\t  vColour = colour;\n\t}",fragmentShader:"\n\n\tuniform sampler2D diffuseTexture;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n\t  gl_FragColor = texture2D(diffuseTexture, coords) * vColour;\n\t}",blending:s.THREE.NormalBlending,depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),this.curX=0,this.curY=0,this.on=!1,this._camera=t.camera,this._particles=[],this._geometry=new s.THREE.BufferGeometry,this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute([],3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute([],1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute([],4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute([],1)),this._points=new s.THREE.Points(this._geometry,this._material),t.parent.add(this._points);const a=i(
/*!./../utils/LinearSpline.js*/"./src/scripts/utils/LinearSpline.js").default;this._alphaSpline=new a(((t,e,i)=>e+t*(i-e))),this._alphaSpline.AddPoint(0,1),this._alphaSpline.AddPoint(1,1),this._colourSpline=new a(((t,e,i)=>e.clone().lerp(i,t))),this._colourSpline.AddPoint(0,new s.THREE.Color(16777215)),this._colourSpline.AddPoint(1,new s.THREE.Color(16774181)),this._sizeSpline=new a(((t,e,i)=>e+t*(i-e))),this._sizeSpline.AddPoint(0,0),this._sizeSpline.AddPoint(.5,1),this._sizeSpline.AddPoint(1,0),this._UpdateGeometry()}_AddParticles(t){this.gdfsghk||(this.gdfsghk=0),this.gdfsghk+=t;const e=Math.floor(20*this.gdfsghk);this.gdfsghk-=e/20;for(let t=0;t<e;t++){const t=.2;let e=2*Math.random()*Math.PI,i=1.5*Math.random()+.5;e+=.523,this._particles.push({position:new s.THREE.Vector3(this.curX,this.curY,10),size:6*Math.random()+4.8,colour:new s.THREE.Color,alpha:1,life:t,maxLife:t,rotation:e,velocity:new s.THREE.Vector3(Math.cos(-e)*i,Math.sin(-e)*i,2*Math.random()-1)})}}_UpdateGeometry(){const t=[],e=[],i=[],a=[];for(let s of this._particles)t.push(s.position.x,s.position.y,s.position.z),i.push(s.colour.r,s.colour.g,s.colour.b,s.alpha),e.push(s.currentSize),a.push(s.rotation);this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute(t,3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute(e,1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute(i,4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute(a,1)),this._geometry.attributes.position.needsUpdate=!0,this._geometry.attributes.size.needsUpdate=!0,this._geometry.attributes.colour.needsUpdate=!0,this._geometry.attributes.angle.needsUpdate=!0}_UpdateParticles(t){for(let e of this._particles)e.life-=t;this._particles=this._particles.filter((t=>t.life>0));for(let e of this._particles){const i=1-e.life/e.maxLife;e.alpha=this._alphaSpline.Get(i),e.currentSize=e.size*this._sizeSpline.Get(i),e.colour.copy(this._colourSpline.Get(i)),e.position.add(e.velocity.clone().multiplyScalar(t));const s=e.velocity.clone();s.multiplyScalar(.1*t),s.x=Math.sign(e.velocity.x)*Math.min(Math.abs(s.x),Math.abs(e.velocity.x)),s.y=Math.sign(e.velocity.y)*Math.min(Math.abs(s.y),Math.abs(e.velocity.y)),s.z=Math.sign(e.velocity.z)*Math.min(Math.abs(s.z),Math.abs(e.velocity.z)),e.velocity.sub(s)}this._particles.sort(((t,e)=>{const i=this._camera.position.distanceTo(t.position),s=this._camera.position.distanceTo(e.position);return i>s?-1:i<s?1:0}))}Step(t){this.on&&this._AddParticles(t),this._UpdateParticles(t),this._UpdateGeometry()}setPosition(t,e){this.curX=t,this.curY=e}setOff(){this.on=!1}setOn(){this.on=!0}}},"./src/scripts/utils/Button.js":
/*!*************************************!*\
!*** ./src/scripts/utils/Button.js ***!
\*************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a extends Phaser.GameObjects.Image{constructor(t,e,i,s,a){super(t,e,i,s,a),this.setInteractive(),this.clicked=!1,this.focus=!1,t.add.existing(this),this.name=a,this.on("pointerdown",this.animateClick,this)}animateClick(){null==this.defaultScaleX&&(this.defaultScaleX=this.scaleX,this.defaultScaleY=this.scaleY),this.clicked||(this.clicked=!0,this.scene.tweens.addCounter({from:255,to:204,duration:100,onUpdate:t=>{const e=Math.floor(t.getValue());this.setTint(Phaser.Display.Color.GetColor(e,e,e))}}))}animateRelease(){this.clicked&&(this.clicked=!1,this.scene.tweens.addCounter({from:204,to:255,duration:100,onUpdate:t=>{const e=Math.floor(t.getValue());this.setTint(Phaser.Display.Color.GetColor(e,e,e))}}))}setChild(t){this.child=t}setFocus(t){this.focus=t;var e=this.name;t&&(e=this.name+"_sel"),this.setTexture("game_assets",e)}pointerout(){var t=this.texture.key;"_sel"==t.substring(t.length-4,t.length)&&(t=(t=this.texture.key).substring(0,t.length-4),this.setTexture("game_assets",t),this.animateRelease())}pointerover(){var t=this.texture.key;"_sel"!=t.substring(t.length-4,t.length)&&this.setTexture("game_assets",this.texture.key+"_sel")}}},"./src/scripts/utils/CriticalTrail.js":
/*!********************************************!*\
!*** ./src/scripts/utils/CriticalTrail.js ***!
\********************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a{constructor(t){const e={diffuseTexture:{value:t.texturePS},pointMultiplier:{value:6}};this._material=new s.THREE.ShaderMaterial({uniforms:e,vertexShader:"\n\tuniform float pointMultiplier;\n\n\tattribute float size;\n\tattribute float angle;\n\tattribute vec4 colour;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n\t  gl_Position = projectionMatrix * mvPosition;\n\t  gl_PointSize = size * pointMultiplier / gl_Position.w;\n\n\t  vAngle = vec2(cos(angle), sin(angle));\n\t  vColour = colour;\n\t}",fragmentShader:"\n\n\tuniform sampler2D diffuseTexture;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n\t  gl_FragColor = texture2D(diffuseTexture, coords) * vColour;\n\t}",blending:s.THREE.NormalBlending,depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),this.curX=0,this.curY=0,this.on=!1,this.emitEvery=.01,this._camera=t.camera,this._particles=[],this._geometry=new s.THREE.BufferGeometry,this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute([],3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute([],1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute([],4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute([],1)),this._points=new s.THREE.Points(this._geometry,this._material),t.parent.add(this._points);const a=i(
/*!./../utils/LinearSpline.js*/"./src/scripts/utils/LinearSpline.js").default;this._alphaSpline=new a(((t,e,i)=>e+t*(i-e))),this._alphaSpline.AddPoint(0,1),this._alphaSpline.AddPoint(1,1),this._colourSpline=new a(((t,e,i)=>e.clone().lerp(i,t))),this._colourSpline.AddPoint(0,new s.THREE.Color(10482175)),this._colourSpline.AddPoint(1,new s.THREE.Color(16777215)),this._sizeSpline=new a(((t,e,i)=>e+t*(i-e))),this._sizeSpline.AddPoint(0,.7),this._sizeSpline.AddPoint(.5,.7),this._sizeSpline.AddPoint(1,0),this._UpdateGeometry()}_AddParticles(t){if(this.gdfsghk||(this.gdfsghk=0),this.gdfsghk+=t,this.gdfsghk>=this.emitEvery){this.gdfsghk=0;const t=1;this._particles.push({position:new s.THREE.Vector3(this.curX+.05*(2*Math.random()-1),this.curY+.05*(2*Math.random()-1),-30),size:15,colour:new s.THREE.Color,alpha:1,life:t,maxLife:t,rotation:2*Math.random()*Math.PI,velocity:new s.THREE.Vector3(0,0,0)})}}_UpdateGeometry(){const t=[],e=[],i=[],a=[];for(let s of this._particles)t.push(s.position.x,s.position.y,s.position.z),i.push(s.colour.r,s.colour.g,s.colour.b,s.alpha),e.push(s.currentSize),a.push(s.rotation);this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute(t,3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute(e,1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute(i,4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute(a,1)),this._geometry.attributes.position.needsUpdate=!0,this._geometry.attributes.size.needsUpdate=!0,this._geometry.attributes.colour.needsUpdate=!0,this._geometry.attributes.angle.needsUpdate=!0}_UpdateParticles(t){for(let e of this._particles)e.life-=t;this._particles=this._particles.filter((t=>t.life>0));for(let e of this._particles){const i=1-e.life/e.maxLife;e.rotation+=.5*t,e.alpha=this._alphaSpline.Get(i),e.currentSize=e.size*this._sizeSpline.Get(i),e.colour.copy(this._colourSpline.Get(i)),e.position.add(e.velocity.clone().multiplyScalar(t));const s=e.velocity.clone();s.multiplyScalar(.1*t),s.x=Math.sign(e.velocity.x)*Math.min(Math.abs(s.x),Math.abs(e.velocity.x)),s.y=Math.sign(e.velocity.y)*Math.min(Math.abs(s.y),Math.abs(e.velocity.y)),s.z=Math.sign(e.velocity.z)*Math.min(Math.abs(s.z),Math.abs(e.velocity.z)),e.velocity.sub(s)}this._particles.sort(((t,e)=>{const i=this._camera.position.distanceTo(t.position),s=this._camera.position.distanceTo(e.position);return i>s?-1:i<s?1:0}))}Step(t){this.on&&this._AddParticles(t),this._UpdateParticles(t),this._UpdateGeometry()}setPosition(t,e){this.curX=t,this.curY=e}setOff(){this.on=!1}setOn(){this.on=!0}}},"./src/scripts/utils/FruitTrail.js":
/*!*****************************************!*\
!*** ./src/scripts/utils/FruitTrail.js ***!
\*****************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a{constructor(t){const e={diffuseTexture:{value:t.texturePS},pointMultiplier:{value:6}};this._material=new s.THREE.ShaderMaterial({uniforms:e,vertexShader:"\n\tuniform float pointMultiplier;\n\n\tattribute float size;\n\tattribute float angle;\n\tattribute vec4 colour;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n\t  gl_Position = projectionMatrix * mvPosition;\n\t  gl_PointSize = size * pointMultiplier / gl_Position.w;\n\n\t  vAngle = vec2(cos(angle), sin(angle));\n\t  vColour = colour;\n\t}",fragmentShader:"\n\n\tuniform sampler2D diffuseTexture;\n\n\tvarying vec4 vColour;\n\tvarying vec2 vAngle;\n\n\tvoid main() {\n\t  vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n\t  gl_FragColor = texture2D(diffuseTexture, coords) * vColour;\n\t}",blending:s.THREE.NormalBlending,depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),this.curX=0,this.curY=0,this.on=!1,this.emitEvery=.05,this._camera=t.camera,this._particles=[],this._geometry=new s.THREE.BufferGeometry,this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute([],3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute([],1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute([],4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute([],1)),this._points=new s.THREE.Points(this._geometry,this._material),t.parent.add(this._points);const a=i(
/*!./../utils/LinearSpline.js*/"./src/scripts/utils/LinearSpline.js").default;this._alphaSpline=new a(((t,e,i)=>e+t*(i-e))),this._alphaSpline.AddPoint(0,.05),this._alphaSpline.AddPoint(1,0),this._colourSpline=new a(((t,e,i)=>e.clone().lerp(i,t))),this._colourSpline.AddPoint(0,new s.THREE.Color(12368262)),this._colourSpline.AddPoint(1,new s.THREE.Color(12368262)),this._sizeSpline=new a(((t,e,i)=>e+t*(i-e))),this._sizeSpline.AddPoint(0,1),this._sizeSpline.AddPoint(1,.5),this._UpdateGeometry()}_AddParticles(t){if(this.gdfsghk||(this.gdfsghk=0),this.gdfsghk+=t,this.gdfsghk>=this.emitEvery){this.gdfsghk=0;const t=.5;this._particles.push({position:new s.THREE.Vector3(this.curX,this.curY,-30),size:20,colour:new s.THREE.Color,alpha:1,life:t,maxLife:t,rotation:2*Math.random()*Math.PI,velocity:new s.THREE.Vector3(0,0,0)})}}_UpdateGeometry(){const t=[],e=[],i=[],a=[];for(let s of this._particles)t.push(s.position.x,s.position.y,s.position.z),i.push(s.colour.r,s.colour.g,s.colour.b,s.alpha),e.push(s.currentSize),a.push(s.rotation);this._geometry.setAttribute("position",new s.THREE.Float32BufferAttribute(t,3)),this._geometry.setAttribute("size",new s.THREE.Float32BufferAttribute(e,1)),this._geometry.setAttribute("colour",new s.THREE.Float32BufferAttribute(i,4)),this._geometry.setAttribute("angle",new s.THREE.Float32BufferAttribute(a,1)),this._geometry.attributes.position.needsUpdate=!0,this._geometry.attributes.size.needsUpdate=!0,this._geometry.attributes.colour.needsUpdate=!0,this._geometry.attributes.angle.needsUpdate=!0}_UpdateParticles(t){for(let e of this._particles)e.life-=t;this._particles=this._particles.filter((t=>t.life>0));for(let e of this._particles){const i=1-e.life/e.maxLife;e.rotation+=.5*t,e.alpha=this._alphaSpline.Get(i),e.currentSize=e.size*this._sizeSpline.Get(i),e.colour.copy(this._colourSpline.Get(i)),e.position.add(e.velocity.clone().multiplyScalar(t));const s=e.velocity.clone();s.multiplyScalar(.1*t),s.x=Math.sign(e.velocity.x)*Math.min(Math.abs(s.x),Math.abs(e.velocity.x)),s.y=Math.sign(e.velocity.y)*Math.min(Math.abs(s.y),Math.abs(e.velocity.y)),s.z=Math.sign(e.velocity.z)*Math.min(Math.abs(s.z),Math.abs(e.velocity.z)),e.velocity.sub(s)}this._particles.sort(((t,e)=>{const i=this._camera.position.distanceTo(t.position),s=this._camera.position.distanceTo(e.position);return i>s?-1:i<s?1:0}))}Step(t){this.on&&this._AddParticles(t),this._UpdateParticles(t),this._UpdateGeometry()}setPosition(t,e){this.curX=t,this.curY=e}setOff(){this.on=!1}setOn(){this.on=!0}}},"./src/scripts/utils/LinearSpline.js":
/*!*******************************************!*\
!*** ./src/scripts/utils/LinearSpline.js ***!
\*******************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);class a{constructor(t){this._points=[],this._lerp=t}AddPoint(t,e){this._points.push([t,e])}Get(t){let e=0;for(let i=0;i<this._points.length&&!(this._points[i][0]>=t);i++)e=i;const i=Math.min(this._points.length-1,e+1);return e==i?this._points[e][1]:this._lerp((t-this._points[e][0])/(this._points[i][0]-this._points[e][0]),this._points[e][1],this._points[i][1])}}},"./src/scripts/utils/ScreenShake.js":
/*!******************************************!*\
!*** ./src/scripts/utils/ScreenShake.js ***!
\******************************************/
/*!exports provided: default*/function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(
/*!@enable3d/phaser-extension*/"./node_modules/@enable3d/phaser-extension/dist/index.js");i.n(s);function a(){return{enabled:!1,_timestampStart:void 0,_timestampEnd:void 0,_startPoint:void 0,_endPoint:void 0,update:function(t){if(1==this.enabled){const e=Date.now();if(this._timestampEnd>e){let e=(Date.now()-this._timestampStart)/(this._timestampEnd-this._timestampStart);this.computePosition(t,e)}else t.position.copy(this._startPoint),this.enabled=!1}},shake:function(t,e,i){this.enabled=!0,this._timestampStart=Date.now(),this._timestampEnd=this._timestampStart+i,this._startPoint=(new s.THREE.Vector3).copy(t.position),this._endPoint=(new s.THREE.Vector3).addVectors(t.position,e)},computePosition:function(t,e){if(e<.4)var i=this.getQuadra(e/.4);else if(e<.7)i=-.6*this.getQuadra((e-.4)/.3);else if(e<.9)i=.3*this.getQuadra((e-.7)/.2);else i=-.1*this.getQuadra((e-.9)/.1);t.position.lerpVectors(this._startPoint,this._endPoint,i)},getQuadra:function(t){return 9436896e-22+4*t-t*t*4}}}},"./webpack/credits.js":
/*!****************************!*\
!*** ./webpack/credits.js ***!
\****************************/
/*!no static exports found*/function(t,e){},0:
/*!********************************************************!*\
!*** multi ./src/scripts/game.ts ./webpack/credits.js ***!
\********************************************************/
/*!no static exports found*/function(t,e,i){i(/*!./src/scripts/game.ts*/"./src/scripts/game.ts"),t.exports=i(
/*!./webpack/credits.js*/"./webpack/credits.js")}});