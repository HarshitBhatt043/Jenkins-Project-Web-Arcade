var TutorialMessages={1:{msg:"We're going to fill the grid.<br>Tap the tile to make it red.",tiles:[[0,0,1]]},2:{msg:"Excellent!<br>Tap twice to turn a tile blue.",tiles:[[0,1,2]]},3:{msg:"Three red tiles next to each other in a row isn't allowed.",tiles:[[2,0,2]]},4:{msg:"Never have three blue tiles together in a row either.",tiles:[[1,1,1]]},5:{msg:"Three red or blue tiles below each other is invalid too!",tiles:[[1,2,2],[2,2,1]]},6:{msg:"A full row must have as many red tiles as it has blue ones.",tiles:[[3,1,1]],rows:[1]},7:{msg:"Colums have an equal number of each color too.",tiles:[[1,3,2]],cols:[1]},8:{msg:"You should be able to know what colors these are...",tiles:[[2,3,1],[0,3,1]]},9:{msg:"One more thing...<br>No two rows are the same.",tiles:[[0,2,2],[3,2,1]],rows:[2,3]},10:{msg:"If you get stuck, tap the eye to peek.",tiles:[[3,0,2]],wiggle:!0}},Tutorial=new function(){var e=0,t=!1,i=!1,s=[];function a(){if(e>=Utils.count(TutorialMessages))return r(),t=!1,void setTimeout((function(){Game.checkForLevelComplete()}),1e3);e++;var i=TutorialMessages[e];msg=i.msg,n(msg),s=[],Game.grid.unmark(),$(i.tiles).each((function(){s.push(Game.grid.tile(this[0],this[1]))})),setTimeout((function(){o()}),0),i.wiggle&&$('#bar [data-action="help"]').addClass("wiggle")}function o(){var t=TutorialMessages[e];t.rows?$(t.rows).each((function(){Game.grid.markRow(this)})):t.cols?$(t.cols).each((function(){Game.grid.markCol(this)})):$(t.tiles).each((function(){Game.grid.mark(this[0],this[1])}))}function n(e){$("#hintMsg").html("<span>"+e+"</span>"),$("html").addClass("showHint"),i=!0}function r(){$("html").removeClass("showHint"),i=!1}this.start=function(){e=0,t=!0,$('#bar [data-action="next"]').hide(),Game.startGame({size:4,empty:[0,1,0,0,0,0,2,0,0,0,0,0,0,0,0,2],full:[1,1,2,2,2,1,2,1,2,2,1,1,1,2,1,2],isTutorial:!0}),a()},this.end=function(){$('#bar [data-action="help"]').removeClass("hidden wiggle"),t=!1},this.next=a,this.show=n,this.hide=r,this.tapTile=function(t){var i=!1;$(s).each((function(){t.x==this.x&&t.y==this.y&&(i=!0)})),i&&(t.isEmpty?t.value=1:1==t.value?t.value=2:t.clear(),setTimeout(o,0),function(){var t=!0;if($(TutorialMessages[e].tiles).each((function(){var e=this[0],i=this[1],s=Game.grid.tile(e,i),a=this[2];s.value!=a&&(t=!1)})),!t)return;$(s).each((function(){this.system=!0})),a()}())},this.hintAllowed=function(){return e>=9},this.__defineGetter__("active",(function(){return t})),this.__defineSetter__("active",(function(e){t=e})),this.__defineGetter__("visible",(function(){return i})),this.__defineGetter__("step",(function(){return e}))};