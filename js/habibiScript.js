document.addEventListener("DOMContentLoaded",(function(){}));var adminCPItems=document.querySelector(".admin-cp-items"),adminCPBtn=document.querySelector(".admin-cp-button");adminCPBtn.addEventListener("click",(function(){adminCPItems.classList.toggle("hidden")}),!1);var pageSplash=document.querySelector("#pageSplash"),splashScreenTxt=document.querySelector("#splashScreenTxt"),splashScreenLogo=document.querySelector("#splashScreenLogo"),pagePlayDelay=document.querySelector("#pagePlayDelay"),palyDelayCont=document.querySelector("#palyDelayCont"),playDelayNum=document.querySelector("#playDelayNum"),pagePlayArea=document.querySelector("#pagePlayArea"),gmStatsTimeProgress=document.querySelector("#gmStatsTimeProgress"),gmStatsPauseBtn=document.querySelector("#gmStatsPauseBtn"),gmStatsScore=document.querySelector("#gmStatsScore"),gmStatsLvlNumb=document.querySelector("#gmStatsLvlNumb"),gameSpace=document.querySelector("#gameSpace"),gmStatsCurrentTapCount=document.querySelector("#gmStatsCurrentTapCount"),gmStatsTotalTapCount=document.querySelector("#gmStatsTotalTapCount"),pageGameMenu=document.querySelector("#pageGameMenu"),newGameBtn=document.querySelector("#newGameBtn"),highScoresBtn=document.querySelector("#highScoresBtn"),pageTutorial=document.querySelector("#pageTutorial"),tutPgStartGameBtn=document.querySelector("#tutPgStartGameBtn"),pagePauseMenu=document.querySelector("#pagePauseMenu"),lvlPausedScore=document.querySelector("#lvlPausedScore"),pmRstrtLvlBtn=document.querySelector("#pmRstrtLvlBtn"),pmCntnuGmBtn=document.querySelector("#pmCntnuGmBtn"),pageLevelPassed=document.querySelector("#pageLevelPassed"),lvlPssdTitle=document.querySelector("#lvlPssdTtl"),lvlPssdScore=document.querySelector("#lvlPssdScore"),lvlPssdBonusScore=document.querySelector("#lvlPssdBonusScore"),lvlPssdContinueNextLvlBtn=document.querySelector("#lvlPssdContinueNextLvlBtn"),pageYouLost=document.querySelector("#pageYouLost"),lvlLostScore=document.querySelector("#lvlLostScore"),lvlLostBestScore=document.querySelector("#lvlLostBestScore"),lvlLostTtl=document.querySelector("#lvlLostTtl"),lvlLostTryAgainBtn=document.querySelector("#lvlLostTryAgainBtn"),lvlLostIcon=document.querySelector("#lvlLostIcon"),pageHighScore=document.querySelector("#pageHighScore"),lvlLostNewHighScore=document.querySelector("#lvlLostNewHighScore"),playDelayPageToggle=document.getElementById("playDelayPageToggle"),playAreaPageToggle=document.getElementById("playAreaPageToggle"),gameMenuPageToggle=document.getElementById("gameMenuPageToggle"),tutorialPageToggle=document.getElementById("tutorialPageToggle"),pauseMenuPageToggle=document.getElementById("pauseMenuPageToggle"),levelPassedPageToggle=document.getElementById("levelPassedPageToggle"),youLostPageToggle=document.getElementById("youLostPageToggle"),highScorePageToggle=document.getElementById("highScorePageToggle"),splashPageToggle=document.getElementById("splashPageToggle"),pagesTogglesArray=[playAreaPageToggle,gameMenuPageToggle,tutorialPageToggle,playDelayPageToggle,pauseMenuPageToggle,levelPassedPageToggle,youLostPageToggle,highScorePageToggle,splashPageToggle],pagesArray=[pagePlayArea,pageGameMenu,pageTutorial,pagePlayDelay,pagePauseMenu,pageLevelPassed,pageYouLost,pageHighScore,pageSplash];togglePage=function(e,o){e.checked?toolsBox.showPage(o):toolsBox.hidePage(o)};for(var i=0;i<pagesTogglesArray.length;i++)pagesTogglesArray[i].addEventListener("click",(function(){for(var e=0;e<pagesTogglesArray.length;e++)togglePage(pagesTogglesArray[e],pagesArray[e])}),!1);toolsBox={delay:function(e,o){setTimeout(e,o)},gnrtRndmNum:function(e,o){return Math.floor(Math.random()*(o-e+1))+e},showPage:function(e){e.style.display="block"},hidePage:function(e){e.style.display="none"},hideSplashScreen:function(){splashScreenTxt.classList.add("fadeOut-animation"),splashScreenLogo.classList.add("fadeOut-animation"),toolsBox.delay((function(){toolsBox.showPage(pageGameMenu),toolsBox.hidePage(pageSplash)}),1500)},onClickNTouchstart:function(e,o){e.addEventListener("click",o,!1),e.addEventListener("touchstart",o,!1)},toggleAnimation:function(e,o){e.classList.add(o),e.addEventListener("animationend",(function(){e.classList.remove(o)}),!1)},windowSize:{width:window.innerWidth||document.body.clientWidth,height:window.innerHeight||document.body.clientHeight},pagePlayDelay:{updateNumber:function(){toolsBox.toggleAnimation(playDelayNum,"grow-animation"),playDelayNum.innerHTML=parseInt(playDelayNum.innerHTML,10)-1},start:function(){toolsBox.toggleAnimation(playDelayNum,"grow-animation");var e=setInterval((function(){playDelayNum.innerHTML>1?(audioPool.playSound(delayCount),toolsBox.pagePlayDelay.updateNumber()):(clearInterval(e),toolsBox.hidePage(pagePlayDelay),playDelayNum.innerHTML=3)}),500)}}};var timeEngine={progressTimer:"",timeLeft:0,levelTime:0,progressValue:100,endingSound:!1,start:function(e){timeEngine.timeLeft=e,timeEngine.progressTimer=setInterval((function(){timeEngine.updateTimeProgress(e)}),100)},stop:function(){clearInterval(timeEngine.progressTimer),gmStatsTimeProgress.classList.remove("switchColors-animation"),timeEngine.endingSound&&(timeEngine.endingSound=!1,audioPool.stopSound(timeAlmostUp))},resume:function(){timeEngine.start(timeEngine.timeLeft)},reset:function(){timeEngine.stop(),timeEngine.timeLeft=0,timeEngine.progressValue=100,timeEngine.progressValue=timeEngine.progressValue,gmStatsTimeProgress.style.width=timeEngine.progressValue+"%"},updateTimeProgress:function(e){timeEngine.timeLeft=timeEngine.timeLeft-.1,timeEngine.progressValue=100*timeEngine.timeLeft/gameEngine.levelTime,gmStatsTimeProgress.style.width=timeEngine.progressValue+"%",timeEngine.checkTime()},checkTime:function(){timeEngine.timeLeft<=0&&(timeEngine.stop(),gameEngine.timesUp(),timeEngine.endingSound=!1,audioPool.stopSound(timeAlmostUp)),timeEngine.timeLeft<4&&timeEngine.timeLeft>0&&(gmStatsTimeProgress.classList.add("switchColors-animation"),timeEngine.endingSound||(timeEngine.endingSound=!0,audioPool.playSound(timeAlmostUp)))}},circlesEngine={create:function(e,o){var n=document.createElement("div");switch(e.toLowerCase()){case".evil-circle":return n.setAttribute("class","tpbl-circle c-red evil-circle"),gameSpace.appendChild(n),toolsBox.onClickNTouchstart(n,(function(){circlesEngine.evilCircleTap()})),n;break;case".good-circle":return n.setAttribute("class","tpbl-circle c-blue good-circle"),gameSpace.appendChild(n),toolsBox.onClickNTouchstart(n,(function(){circlesEngine.goodCircleTap(e,o)})),n;break;default:}},destroy:function(e){Array.from(e).forEach((function(e){e.parentNode.removeChild(e)}))},randomPosition:function(e){gameSpcWidth=gameSpace.offsetWidth,gmSpcHeight=gameSpace.offsetHeight,tpblCircleWidth=e.offsetWidth,tpblCircleHeight=e.offsetHeight,e.style.left=toolsBox.gnrtRndmNum(tpblCircleWidth,gameSpcWidth-tpblCircleWidth)+"px",e.style.top=toolsBox.gnrtRndmNum(tpblCircleHeight,gmSpcHeight-tpblCircleHeight)+"px"},add:function(e,o){if(document.querySelectorAll(e).length>0&&(circle=document.querySelectorAll(e),circlesEngine.destroy(circle)),o)for(var n=0;n<o;n++)circle=circlesEngine.create(e,o),circlesEngine.randomPosition(circle),circlesEngine.addWithDelay(n,circle,e);else circle=circlesEngine.create(e,o),circlesEngine.randomPosition(circle)},addWithDelay:function(e,o,n){setTimeout((function(){o.classList.add("grow-animation"),audioPool.playSound(circleAppear)}),50*e)},goodCircleTap:function(e,o){gameEngine.goodCircleTap(),circlesEngine.add(e,o),evilCircles=document.querySelectorAll(".evil-circle"),evilCircles.length>0&&circlesEngine.add(".evil-circle",evilCircles.length)},evilCircleTap:function(){gameEngine.evilCircleTap()},goodCirclesTapCount:0,redCirclesTapCount:0},gameEngine={levelNum:1,levelTime:10,tapNum:0,tapsGoal:10,tapValue:13,score:0,goodCirclesCount:1,evilCirclesCount:4,highestScore:0,bonusScore:0,updateScore:function(e){gameEngine.score=e,gmStatsScore.innerHTML=gameEngine.score},updateLevel:function(e){gameEngine.levelNum=e,gmStatsLvlNumb.innerHTML="Level "+gameEngine.levelNum},updateTapCount:function(e,o){gameEngine.tapNum=e,gmStatsCurrentTapCount.innerHTML=gameEngine.tapNum,gameEngine.tapsGoal=o,gmStatsTotalTapCount.innerHTML="/"+gameEngine.tapsGoal},updateLevelTime:function(e){gameEngine.levelTime=e},updateBonusScore:function(e){gameEngine.bonusScore=e},reset:function(){levelsEngine.resetLevels(),gameEngine.updateScore(0),gameEngine.updateLevel(levelsEngine.levels[0].levelNum),gameEngine.updateLevelTime(levelsEngine.levels[0].time),gameEngine.updateTapCount(0,levelsEngine.levels[0].tapsGoal),gameEngine.tapValue=levelsEngine.levels[0].tapValue,gameEngine.goodCirclesCount=levelsEngine.levels[0].goodCirclesCount,gameEngine.evilCirclesCount=levelsEngine.levels[0].evilCirclesCount},start:function(e,o,n,t,l,a,i){gameEngine.updateScore(e),gameEngine.updateLevel(o),gameEngine.updateLevelTime(n),gameEngine.updateTapCount(0,t),gameEngine.tapValue=l,gameEngine.goodCirclesCount=a,gameEngine.evilCirclesCount=i,circlesEngine.add(".good-circle",a),circlesEngine.add(".evil-circle",i),timeEngine.reset(),timeEngine.start(n)},startLevel:function(){gameEngine.start(gameEngine.score,levelsEngine.levels[gameEngine.levelNum-1].levelNum,levelsEngine.levels[gameEngine.levelNum-1].time,levelsEngine.levels[gameEngine.levelNum-1].tapsGoal,levelsEngine.levels[gameEngine.levelNum-1].tapValue,levelsEngine.levels[gameEngine.levelNum-1].goodCirclesCount,levelsEngine.levels[gameEngine.levelNum-1].evilCirclesCount)},checkTapsCount:function(){gameEngine.tapNum>=gameEngine.tapsGoal&&(timeEngine.timeLeft>0&&gameEngine.showBonusScore(),gameEngine.levelPassed())},goodCircleTap:function(){gameEngine.tapNum=gameEngine.tapNum+1,gameEngine.updateScore(gameEngine.score+gameEngine.tapValue),gameEngine.updateTapCount(gameEngine.tapNum,gameEngine.tapsGoal),gameEngine.checkTapsCount(),toolsBox.toggleAnimation(gmStatsCurrentTapCount,"burst-animation"),audioPool.playSound(touchBlue)},evilCircleTap:function(){gameEngine.deadlyTap(),audioPool.playSound(touchRed)},pause:function(){timeEngine.stop()},resume:function(){timeEngine.resume()},stop:function(){timeEngine.stop(),gameEngine.reset()},gameLost:function(){audioPool.playSound(levelLost),lvlLostScore.innerHTML=gameEngine.score,toolsBox.hidePage(pagePlayArea),toolsBox.showPage(pageYouLost),gameEngine.stop()},deadlyTap:function(){lvlLostTtl.innerHTML="You Lost",lvlLostIcon.classList.contains("times-up-icon")&&(lvlLostIcon.classList.remove("times-up-icon"),lvlLostIcon.classList.add("you-lost-icon")),gameEngine.gameLost()},timesUp:function(){lvlLostTtl.innerHTML="Time's Up",lvlLostIcon.classList.contains("you-lost-icon")&&(lvlLostIcon.classList.remove("you-lost-icon"),lvlLostIcon.classList.add("times-up-icon")),gameEngine.gameLost()},levelPassed:function(){audioPool.playSound(levelPassed),timeEngine.stop(),lvlPssdTtl.innerHTML="Level "+gameEngine.levelNum,gameEngine.bonusScore>0?lvlPssdScore.innerHTML=gameEngine.score-gameEngine.bonusScore:lvlPssdScore.innerHTML=gameEngine.score,gameEngine.updateLevel(gameEngine.levelNum+1),levelsEngine.addNewLevel(gameEngine.levelNum,gameEngine.levelTime+1,gameEngine.tapValue+2,gameEngine.tapsGoal+1,1,gameEngine.evilCirclesCount+1),toolsBox.hidePage(pagePlayArea),toolsBox.showPage(pageLevelPassed)},showBonusScore:function(){gameEngine.updateBonusScore(10*Math.round(timeEngine.timeLeft,10)),gameEngine.bonusScore>0&&(lvlPssdBonusScore.innerHTML="Bonus +"+gameEngine.bonusScore),gameEngine.score+=gameEngine.bonusScore}};levelsEngine={levels:[{levelNum:1,time:7,tapValue:3,tapsGoal:5,goodCirclesCount:1,evilCirclesCount:4}],addNewLevel:function(e,o,n,t,l,a){levelsEngine.levels.push({levelNum:e,time:o,tapValue:n,tapsGoal:t,goodCirclesCount:l,evilCirclesCount:a})},resetLevels:function(){levelsEngine.levels=[],levelsEngine.addNewLevel(1,7,3,5,1,4)}};var audioPool={sounds:[circleAppear={sound:"circleAppear",preaload:!0,volume:1,loop:!1},touchBlue={sound:"touchBlue",preaload:!0,volume:.5,loop:!1},touchRed={sound:"touchRed",preaload:!0,volume:1,loop:!1},levelPassed={sound:"levelPassed",preload:!0,volume:1,loop:!1},levelLost={sound:"levelLost",preload:!0,volume:1,loop:!1},buttonTap={sound:"buttonTap",preload:!0,volume:1,loop:!1},delayCount={sound:"delayCount",preload:!0,volume:1,loop:!1},timeAlmostUp={sound:"timeAlmostUp",preload:!0,volume:.5,loop:!0}],createAudioPlayer:function(e){e.audioPlayer=document.createElement("audio"),mp3Source=document.createElement("source"),oggSource=document.createElement("source"),mp3Link="sounds/mp3/"+e.sound+".mp3",oggLink="sounds/ogg/"+e.sound+".ogg",mp3Source.setAttribute("type","audio/mpeg"),oggSource.setAttribute("type","audio/ogg"),mp3Source.setAttribute("src",mp3Link),oggSource.setAttribute("src",oggLink),e.audioPlayer.appendChild(mp3Source),e.audioPlayer.appendChild(oggSource),document.body.appendChild(e.audioPlayer),e.audioPlayer.volume=e.volume,e.preload&&e.audioPlayer.load(),e.loop&&(e.audioPlayer.loop=!0)},addSounds:function(){for(var e=0;e<audioPool.sounds.length;e++)audioPool.createAudioPlayer(audioPool.sounds[e])},playSound:function(e){e.audioPlayer.currentTime=0,e.audioPlayer.play()},stopSound:function(e){e.audioPlayer.pause(),e.audioPlayer.currentTime=0}};audioPool.addSounds(),document.ontouchmove=function(e){e.preventDefault()},toolsBox.onClickNTouchstart(tutPgStartGameBtn,(function(){audioPool.playSound(buttonTap),gameEngine.stop(),toolsBox.hidePage(pageTutorial),toolsBox.showPage(pagePlayDelay),toolsBox.pagePlayDelay.start(),toolsBox.delay((function(){toolsBox.showPage(pagePlayArea)}),1500),toolsBox.delay(gameEngine.startLevel,1500)})),toolsBox.onClickNTouchstart(lvlPssdContinueNextLvlBtn,(function(){audioPool.playSound(buttonTap),toolsBox.hidePage(pageLevelPassed),toolsBox.showPage(pagePlayDelay),toolsBox.pagePlayDelay.start(),toolsBox.delay((function(){toolsBox.showPage(pagePlayArea)}),1500),toolsBox.delay(gameEngine.startLevel,1500)})),lvlLostTryAgainBtn.addEventListener("click",(function(){audioPool.playSound(buttonTap),toolsBox.hidePage(pageYouLost),toolsBox.showPage(pageGameMenu),gameEngine.stop()}),!1),toolsBox.onClickNTouchstart(gmStatsPauseBtn,(function(){audioPool.playSound(buttonTap),gameEngine.pause(),toolsBox.showPage(pagePauseMenu),toolsBox.hidePage(pagePlayArea),lvlPausedScore.innerHTML=gameEngine.score})),toolsBox.onClickNTouchstart(pmRstrtLvlBtn,(function(){audioPool.playSound(buttonTap),toolsBox.showPage(pageGameMenu),toolsBox.hidePage(pagePauseMenu),gameEngine.stop()})),toolsBox.onClickNTouchstart(pmCntnuGmBtn,(function(){audioPool.playSound(buttonTap),toolsBox.showPage(pagePlayArea),toolsBox.hidePage(pagePauseMenu),gameEngine.resume()})),newGameBtn.addEventListener("click",(function(){audioPool.playSound(buttonTap),toolsBox.showPage(pageTutorial),toolsBox.hidePage(pageGameMenu)}),!1),toolsBox.hideSplashScreen();