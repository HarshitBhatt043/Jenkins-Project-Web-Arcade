var hextris_lite_version="2.1.2",pausable=!0,spd=1;function Hex(e){this.playThrough=0,this.fillColor=[44,62,80],this.tempColor=[44,62,80],this.angularVelocity=0,this.position=0,this.dy=0,this.dt=1,this.sides=6,this.blocks=[],this.angle=180/this.sides,this.targetAngle=this.angle,this.shakes=[],this.sideLength=e,this.strokeColor="blue",this.x=trueCanvas.width/2,this.y=trueCanvas.height/2,this.ct=0,this.lastCombo=this.ct-settings.comboTime,this.lastColorScored="#000",this.comboTime=1,this.texts=[],this.lastRotate=Date.now();for(var t=0;t<this.sides;t++)this.blocks.push([]);this.shake=function(e){var t=30+60*e.lane;t*=Math.PI/180;var i=Math.cos(t)*e.magnitude,s=Math.sin(t)*e.magnitude;if(gdx-=i,gdy+=s,e.magnitude/=2*this.dt,e.magnitude<1)for(var a=0;a<this.shakes.length;a++)this.shakes[a]==e&&this.shakes.splice(a,1)},this.addBlock=function(e){if(1==gameState||0===gameState){e.settled=1,e.tint=.6;var t=this.sides-e.fallingLane;this.shakes.push({lane:e.fallingLane,magnitude:4.5*(window.devicePixelRatio?window.devicePixelRatio:1)*settings.scale}),t=((t+=this.position)+this.sides)%this.sides,e.distFromHex=MainHex.sideLength/2*Math.sqrt(3)+e.height*this.blocks[t].length,this.blocks[t].push(e),e.attachedLane=t,e.checked=1}},this.doesBlockCollide=function(e,t,i){if(!e.settled)if(void 0!==t)a=i,t<=0?e.distFromHex-e.iter*this.dt*settings.scale-this.sideLength/2*Math.sqrt(3)<=0?(e.distFromHex=this.sideLength/2*Math.sqrt(3),e.settled=1,e.checked=1):(e.settled=0,e.iter=1.5+waveone.difficulty/15*3):a[t-1].settled&&e.distFromHex-e.iter*this.dt*settings.scale-a[t-1].distFromHex-a[t-1].height<=0?(e.distFromHex=a[t-1].distFromHex+a[t-1].height,e.settled=1,e.checked=1):(e.settled=0,e.iter=1.5+waveone.difficulty/15*3);else{var s=this.sides-e.fallingLane;s=((s+=this.position)+this.sides)%this.sides;var a=this.blocks[s];a.length>0?e.distFromHex+e.iter*this.dt*settings.scale-a[a.length-1].distFromHex-a[a.length-1].height<=0&&(e.distFromHex=a[a.length-1].distFromHex+a[a.length-1].height,this.addBlock(e)):e.distFromHex+e.iter*this.dt*settings.scale-this.sideLength/2*Math.sqrt(3)<=0&&(e.distFromHex=this.sideLength/2*Math.sqrt(3),this.addBlock(e))}},this.rotate=function(e){if((!(Date.now()-this.lastRotate<75)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))&&(1===gameState||0===gameState)){for(this.position+=e,history[this.ct]||(history[this.ct]={}),history[this.ct].rotate?history[this.ct].rotate+=e:history[this.ct].rotate=e;this.position<0;)this.position+=6;this.position=this.position%this.sides,this.blocks.forEach((function(t){t.forEach((function(t){t.targetAngle=t.targetAngle-60*e}))})),this.targetAngle=this.targetAngle-60*e,this.lastRotate=Date.now()}},this.draw=function(){this.x=trueCanvas.width/2,-2!=gameState&&(this.y=trueCanvas.height/2),this.sideLength=settings.hexWidth,gdx=0,gdy=0;for(var e=0;e<this.shakes.length;e++)this.shake(this.shakes[e]);this.angle>this.targetAngle?this.angularVelocity-=angularVelocityConst*this.dt:this.angle<this.targetAngle&&(this.angularVelocity+=angularVelocityConst*this.dt),Math.abs(this.angle-this.targetAngle+this.angularVelocity)<=Math.abs(this.angularVelocity)?(this.angle=this.targetAngle,this.angularVelocity=0):this.angle+=this.angularVelocity,drawPolygon(this.x+gdx,this.y+gdy+this.dy,this.sides,this.sideLength,this.angle,arrayToColor(this.fillColor),0,"rgba(0,0,0,0)")}}function arrayToColor(e){return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function scaleCanvas(){if(canvas.width=$(window).width(),canvas.height=$(window).height(),canvas.height>canvas.width?settings.scale=canvas.width/800*settings.baseScale:settings.scale=canvas.height/800*settings.baseScale,trueCanvas={width:canvas.width,height:canvas.height},window.devicePixelRatio){var e=$("#canvas").attr("width"),t=$("#canvas").attr("height");$("#canvas").attr("width",e*window.devicePixelRatio),$("#canvas").attr("height",t*window.devicePixelRatio),$("#canvas").css("width",e),$("#canvas").css("height",t),trueCanvas={width:e,height:t},ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setBottomContainer(),set_score_pos()}function setBottomContainer(){var e=$("#buttonCont").offset().top-(trueCanvas.height/2+100*settings.scale)-29;e<0&&$("#bottomContainer").css("margin-bottom","-"+Math.abs(e)+"px")}function set_score_pos(){$("#container").css("margin-top","0");var e=$("#container").height()/2+$("#container").offset().top,t=$("#buttonCont").offset().top,i=$("#highScoreInGameText"),s=(t+(i.offset().top+i[0].offsetHeight))/2-e;$("#container").css("margin-top",s+"px")}function toggleDevTools(){$("#devtools").toggle()}function resumeGame(){gameState=1,hideUIElements(),$("#pauseBtn").show(),$("#restartBtn").hide(),importing=0,startTime=Date.now(),setTimeout((function(){1!=gameState&&2!=gameState||$("#helpScreen").is(":visible")||$("#openSideBar").fadeOut(150,"linear")}),7e3),checkVisualElements(0)}function checkVisualElements(e){e&&$("#openSideBar").is(":visible")&&$("#openSideBar").fadeOut(150,"linear"),$("#pauseBtn").is(":visible")||$("#pauseBtn").fadeIn(150,"linear"),$("#fork-ribbon").fadeOut(150),$("#restartBtn").is(":visible")||$("#restartBtn").fadeOut(150,"linear"),$("#buttonCont").is(":visible")&&$("#buttonCont").fadeOut(150,"linear")}function hideUIElements(){$("#pauseBtn").hide(),$("#restartBtn").hide(),$("#startBtn").hide()}function init(e){if(!settings.ending_block||1!=e){e&&($("#pauseBtn").attr("src","./images/btn_pause.svg"),$("#helpScreen").is(":visible")&&$("#helpScreen").fadeOut(150,"linear"),setTimeout((function(){1==gameState&&$("#openSideBar").fadeOut(150,"linear"),infobuttonfading=!1}),7e3),clearSaveState(),checkVisualElements(1)),0===highscores.length?$("#currentHighScore").text(0):$("#currentHighScore").text(highscores[0]),infobuttonfading=!0,$("#pauseBtn").attr("src","./images/btn_pause.svg"),hideUIElements();var t,i,s=localStorage.getItem("saveState")||"{}";if(s=JSONfn.parse(s),document.getElementById("canvas").className="",history={},importedHistory=void 0,importing=0,score=s.score||0,prevScore=0,spawnLane=0,op=0,tweetblock=!1,scoreOpacity=0,gameState=1,$("#restartBtn").hide(),$("#pauseBtn").show(),void 0!==s.hex&&(gameState=1),settings.blockHeight=settings.baseBlockHeight*settings.scale,settings.hexWidth=settings.baseHexWidth*settings.scale,MainHex=s.hex||new Hex(settings.hexWidth),s.hex&&(MainHex.playThrough+=1),MainHex.sideLength=settings.hexWidth,s.blocks)for(s.blocks.map((function(e){rgbToHex[e.color]&&(e.color=rgbToHex[e.color])})),t=0;t<s.blocks.length;t++)i=s.blocks[t],blocks.push(i);else blocks=[];for(gdx=s.gdx||0,gdy=s.gdy||0,comboTime=s.comboTime||0,t=0;t<MainHex.blocks.length;t++)for(var a=0;a<MainHex.blocks[t].length;a++)MainHex.blocks[t][a].height=settings.blockHeight,MainHex.blocks[t][a].settled=0;MainHex.blocks.map((function(e){e.map((function(e){rgbToHex[e.color]&&(e.color=rgbToHex[e.color])}))})),MainHex.y=-100,startTime=Date.now(),waveone=s.wavegen||new waveGen(MainHex),MainHex.texts=[],MainHex.delay=15,hideText()}}function addNewBlock(e,t,i,s,a){i*=settings.speedModifier,history[MainHex.ct]||(history[MainHex.ct]={}),history[MainHex.ct].block={blocklane:e,color:t,iter:i},s&&(history[MainHex.ct].distFromHex=s),a&&(blockHist[MainHex.ct].settled=a),blocks.push(new Block(e,t,i,s,a))}function exportHistory(){$("#devtoolsText").html(JSON.stringify(history)),toggleDevTools()}function setStartScreen(){$("#startBtn").show(),init(),isStateSaved()?importing=0:importing=1,$("#pauseBtn").hide(),$("#restartBtn").hide(),$("#startBtn").show(),gameState=0,requestAnimFrame(animLoop)}function animLoop(){switch(gameState){case 1:requestAnimFrame(animLoop),render();var e=((i=Date.now())-lastTime)/16.666*rush;if(spd>1&&(e*=spd),1==gameState&&(MainHex.delay?MainHex.delay--:update(e)),lastTime=i,checkGameOver()&&!importing){var t=localStorage.getItem("saveState")||"{}";t=JSONfn.parse(t),gameState=2,setTimeout((function(){enableRestart()}),150),$("#helpScreen").is(":visible")&&$("#helpScreen").fadeOut(150,"linear"),$("#pauseBtn").is(":visible")&&$("#pauseBtn").fadeOut(150,"linear"),$("#restartBtn").is(":visible")&&$("#restartBtn").fadeOut(150,"linear"),$("#openSideBar").is(":visible")&&$(".openSideBar").fadeOut(150,"linear"),canRestart=0,clearSaveState()}break;case 0:requestAnimFrame(animLoop),render();break;case-1:requestAnimFrame(animLoop),render();break;case 2:var i;e=((i=Date.now())-lastTime)/16.666*rush;requestAnimFrame(animLoop),update(e),render(),lastTime=i;break;case 3:requestAnimFrame(animLoop),fadeOutObjectsOnScreen(),render();break;case 4:return setTimeout((function(){initialize(1)}),1),void render();default:initialize(),setStartScreen();break}1!=gameState&&2!=gameState&&(lastTime=Date.now())}function enableRestart(){canRestart=1}function isInfringing(e){for(var t=0;t<e.sides;t++){for(var i=0,s=0;s<e.blocks[t].length;s++)i+=e.blocks[t][s].deleted;if(e.blocks[t].length-i>settings.rows)return!0}return!1}function checkGameOver(){for(var e=0;e<MainHex.sides;e++)if(isInfringing(MainHex))return-1==highscores.indexOf(score)&&highscores.push(score),writeHighScores(),gameOverDisplay(),!0;return!1}function showHelp(){0==gameState&&$("#startBtn").toggle(),"./images/btn_back.svg"==$("#openSideBar").attr("src")?($("#openSideBar").attr("src","./images/btn_help.svg"),0!=gameState&&-1!=gameState&&2!=gameState&&$("#fork-ribbon").fadeOut(150,"linear")):($("#openSideBar").attr("src","./images/btn_back.svg"),0==gameState&&-1==gameState&&2==gameState&&$("#fork-ribbon").fadeIn(150,"linear")),$("#inst_main_body").html("<div id = 'instructions_head'>HOW TO PLAY</div><p>The goal of Hextris is to stop blocks from leaving the inside of the outer gray hexagon.</p><p>"+("mobile"!=settings.platform?"Press the right and left arrow keys":"Tap the left and right sides of the screen")+" to rotate the Hexagon."+("mobile"!=settings.platform?" Press the down arrow to speed up the block falling":"")+"</p><p>Clear blocks and get points by making 3 or more blocks of the same color touch.</p><p>Time left before your combo streak disappears is indicated by <span style='color:#f1c40f;'>the</span> <span style='color:#e74c3c'>colored</span> <span style='color:#3498db'>lines</span> <span style='color:#2ecc71'>on</span> the outer hexagon</p>"),1==gameState&&pause(),("./images/btn_pause.svg"!=$("#pauseBtn").attr("src")||0==gameState||infobuttonfading)&&($("#openSideBar").fadeIn(150,"linear"),$("#helpScreen").fadeToggle(150,"linear"))}function blockDestroyed(){waveone.nextGen>1350?waveone.nextGen-=30*settings.creationSpeedModifier:waveone.nextGen>600?waveone.nextGen-=8*settings.creationSpeedModifier:waveone.nextGen=600,waveone.difficulty<35?waveone.difficulty+=.085*settings.speedModifier:waveone.difficulty=35}function waveGen(e){this.lastGen=0,this.last=0,this.nextGen=2700,this.start=0,this.colors=colors,this.ct=0,this.hex=e,this.difficulty=1,this.dt=0,this.update=function(){this.currentFunction(),this.dt=("mobile"==settings.platform?14:16.6667)*MainHex.ct,this.computeDifficulty(),(this.dt-this.lastGen)*settings.creationSpeedModifier>this.nextGen&&this.nextGen>600&&(this.nextGen-=this.nextGen/1300*11*settings.creationSpeedModifier)},this.randomGeneration=function(){if(this.dt-this.lastGen>this.nextGen){this.ct++,this.lastGen=this.dt,addNewBlock(randInt(0,MainHex.sides),colors[randInt(0,colors.length)],1.6+this.difficulty/15*3);if(this.ct>5){var e=randInt(0,24);e>15?(this.ct=0,this.currentFunction=this.doubleGeneration):e>10?(this.ct=0,this.currentFunction=this.crosswiseGeneration):e>7?(this.ct=0,this.currentFunction=this.spiralGeneration):e>4?(this.ct=0,this.currentFunction=this.circleGeneration):e>1&&(this.ct=0,this.currentFunction=this.halfCircleGeneration)}}},this.computeDifficulty=function(){var e;this.difficulty<35&&(e=this.difficulty<8?(this.dt-this.last)/5166667*settings.speedModifier:this.difficulty<15?(this.dt-this.last)/72333333*settings.speedModifier:(this.dt-this.last)/9e7*settings.speedModifier,this.difficulty+=.5*e)},this.circleGeneration=function(){if(this.dt-this.lastGen>this.nextGen+500){var e=randInt(1,4);3==e&&(e=randInt(1,4));var t=[];e:for(var i=0;i<e;i++){var s=randInt(0,colors.length);for(var a in t)if(t[a]==colors[s]){i--;continue e}t.push(colors[s])}for(i=0;i<MainHex.sides;i++)addNewBlock(i,t[i%e],1.5+this.difficulty/15*3);this.ct+=15,this.lastGen=this.dt,this.shouldChangePattern(1)}},this.halfCircleGeneration=function(){if(this.dt-this.lastGen>(this.nextGen+500)/2){var e=randInt(1,3),t=colors[randInt(0,colors.length)],i=[t,t,t];2==e&&(i=[t,colors[randInt(0,colors.length)],t]);for(var s=randInt(0,6),a=0;a<3;a++)addNewBlock((s+a)%6,i[a],1.5+this.difficulty/15*3);this.ct+=8,this.lastGen=this.dt,this.shouldChangePattern()}},this.crosswiseGeneration=function(){if(this.dt-this.lastGen>this.nextGen){var e=randInt(0,colors.length),t=randInt(0,colors.length);addNewBlock(t,colors[e],.6+this.difficulty/15*3),addNewBlock((t+3)%MainHex.sides,colors[e],.6+this.difficulty/15*3),this.ct+=1.5,this.lastGen=this.dt,this.shouldChangePattern()}},this.spiralGeneration=function(){var e=randInt(0,2);this.dt-this.lastGen>this.nextGen*(2/3)&&(addNewBlock(e?5-this.ct%MainHex.sides:this.ct%MainHex.sides,colors[randInt(0,colors.length)],1.5+this.difficulty/15*1.5),this.ct+=1,this.lastGen=this.dt,this.shouldChangePattern())},this.doubleGeneration=function(){if(this.dt-this.lastGen>this.nextGen){var e=randInt(0,colors.length);addNewBlock(e,colors[randInt(0,colors.length)],1.5+this.difficulty/15*3),addNewBlock((e+1)%MainHex.sides,colors[randInt(0,colors.length)],1.5+this.difficulty/15*3),this.ct+=2,this.lastGen=this.dt,this.shouldChangePattern()}},this.setRandom=function(){this.ct=0,this.currentFunction=this.randomGeneration},this.shouldChangePattern=function(e){if(e){var t=randInt(0,4);switch(this.ct=0,t){case 0:this.currentFunction=this.doubleGeneration;break;case 1:this.currentFunction=this.spiralGeneration;break;case 2:this.currentFunction=this.crosswiseGeneration;break}}else if(this.ct>8&&0===randInt(0,2))return this.setRandom(),1;return 0},this.currentFunction=this.randomGeneration}function easeOutCubic(e,t,i,s){return i*((e=e/s-1)*e*e+1)+t}function renderText(e,t,i,s,a,n){if(ctx.save(),!n)n="20px Exo";i*=settings.scale,ctx.font=i+n,ctx.textAlign="center",ctx.fillStyle=s,ctx.fillText(a,e,t+i/2-9*settings.scale),ctx.restore()}function drawScoreboard(){scoreOpacity<1&&(scoreOpacity+=.01,textOpacity+=.01),ctx.globalAlpha=textOpacity;var e=50,t=String(score);6==t.length?e=43:7==t.length?e=35:8==t.length?e=31:9==t.length&&(e=27);var i="rgb(236, 240, 241)",s="mobile"==settings.platform?35:30,a=trueCanvas.height/2+gdy+100*settings.scale;0===gameState?(renderText(trueCanvas.width/2+gdx+6*settings.scale,trueCanvas.height/2+gdy,60,"rgb(236, 240, 241)",String.fromCharCode("0xf04b"),"px FontAwesome"),renderText(trueCanvas.width/2+gdx+6*settings.scale,trueCanvas.height/2.1+gdy-155*settings.scale,142,"#2c3e50","Hextris"),renderText(trueCanvas.width/2+gdx+242*settings.scale,trueCanvas.height/2.1+gdy-190*settings.scale,38,"#2c3e50","Lite"),renderText(trueCanvas.width/2+gdx+5*settings.scale,a+10,s,"rgb(44,62,80)","Play!")):0!=gameState&&textOpacity>0?(textOpacity-=.05,renderText(trueCanvas.width/2+gdx+6*settings.scale,trueCanvas.height/2+gdy,60,"rgb(236, 240, 241)",String.fromCharCode("0xf04b"),"px FontAwesome"),renderText(trueCanvas.width/2+gdx+6*settings.scale,trueCanvas.height/2.1+gdy-155*settings.scale,142,"#2c3e50","Hextris"),renderText(trueCanvas.width/2+gdx+242*settings.scale,trueCanvas.height/2.1+gdy-190*settings.scale,38,"#2c3e50","Lite"),renderText(trueCanvas.width/2+gdx+5*settings.scale,a,s,"rgb(44,62,80)","Play!"),ctx.globalAlpha=scoreOpacity,renderText(trueCanvas.width/2+gdx,trueCanvas.height/2+gdy,e,i,score)):(ctx.globalAlpha=scoreOpacity,renderText(trueCanvas.width/2+gdx,trueCanvas.height/2+gdy,e,i,score)),ctx.globalAlpha=1}function clearGameBoard(){drawPolygon(trueCanvas.width/2,trueCanvas.height/2,6,trueCanvas.width/2,30,hexagonBackgroundColor,0,"rgba(0,0,0,0)")}function drawPolygon(e,t,i,s,a,n,o,r){ctx.fillStyle=n,ctx.lineWidth=o,ctx.strokeStyle=r,ctx.beginPath();var c=rotatePoint(0,s,a);ctx.moveTo(c.x+e,c.y+t);for(var l=c.x,h=c.y,d=0;d<i;d++)c=rotatePoint(l,h,360/i),ctx.lineTo(c.x+e,c.y+t),l=c.x,h=c.y;ctx.closePath(),ctx.fill(),ctx.stroke(),ctx.strokeStyle="rgba(0,0,0,0)"}function toggleClass(e,t){$(e).hasClass(t)?$(e).removeClass(t):$(e).addClass(t)}function showText(e){"paused"==e&&("android"==settings.os?e="pausedAndroid":"ios"==settings.os?e="pausediOS":"nonmobile"==settings.platform&&(e="pausedOther")),"gameover"==e&&$("#gameoverscreen").fadeIn(),$(".overlay").html({paused:"<div class='centeredHeader unselectable'>Game Paused</div>",pausedAndroid:"<div class='centeredHeader unselectable'>Game Paused</div>",pausediOS:"<div class='centeredHeader unselectable'>Game Paused</div>",pausedOther:"<div class='centeredHeader unselectable'>Game Paused</div>",start:"<div class='centeredHeader unselectable' style='line-height:80px;'>Press enter to start</div>"}[e]),$(".overlay").fadeIn("1000","swing")}function setMainMenu(){gameState=4,canRestart=!1,setTimeout((function(){canRestart="s"}),500),$("#restartBtn").hide(),"btn_pause.svg"==$("#pauseBtn").replace(/^.*[\\\/]/,"")?$("#pauseBtn").attr("src","./images/btn_resume.svg"):$("#pauseBtn").attr("src","./images/btn_pause.svg")}function hideText(){$(".overlay").fadeOut(150,(function(){$(".overlay").html("")}))}function gameOverDisplay(){settings.ending_block=!1,Cookies.set("visited",!0),document.getElementById("canvas").className="blur",updateHighScores(),0===highscores.length?$("#currentHighScore").text(0):$("#currentHighScore").text(highscores[0]),$("#gameoverscreen").fadeIn(),$("#buttonCont").fadeIn(),$("#container").fadeIn(),$("#socialShare").fadeIn(),$("#restart").fadeIn(),set_score_pos()}function updateHighScores(){$("#cScore").text(score),$("#1place").text(highscores[0]),$("#2place").text(highscores[1]),$("#3place").text(highscores[2])}function pause(e){if(0!=gameState&&2!=gameState&&pausable){var t;pausable=!1,writeHighScores(),t=e?"":"paused";document.getElementById("canvas");-1==gameState?($("#fork-ribbon").fadeOut(300,"linear"),$("#restartBtn").fadeOut(300,"linear"),$("#buttonCont").fadeOut(300,"linear"),$("#helpScreen").is(":visible")&&$("#helpScreen").fadeOut(300,"linear"),$("#pauseBtn").attr("src","./images/btn_pause.svg"),$(".helpText").fadeOut(300,"linear"),$("#overlay").fadeOut(300,"linear"),hideText(),setTimeout((function(){gameState=prevGameState,pausable=!0}),400)):-2!=gameState&&0!==gameState&&2!==gameState&&($("#restartBtn").fadeIn(300,"linear"),$("#buttonCont").fadeIn(300,"linear"),$(".helpText").fadeIn(300,"linear"),"paused"==t&&showText(t),$("#fork-ribbon").fadeIn(300,"linear"),$("#pauseBtn").attr("src","./images/btn_resume.svg"),$("#overlay").fadeIn(300,"linear"),prevGameState=gameState,setTimeout((function(){pausable=!0}),400),gameState=-1)}}function rotatePoint(e,t,i){var s=i*(Math.PI/180);return{x:Math.cos(s)*e-Math.sin(s)*t,y:Math.sin(s)*e+Math.cos(s)*t}}function randInt(e,t){return Math.floor(Math.random()*t+e)}function exportSaveState(){var e={};if(1==gameState||-1==gameState||0===gameState&&void 0!==localStorage.getItem("saveState")){(e={hex:$.extend(!0,{},MainHex),blocks:$.extend(!0,[],blocks),score:score,wavegen:waveone,gdx:gdx,gdy:gdy,comboTime:settings.comboTime}).hex.blocks.map((function(e){for(var t=0;t<e.length;t++)e[t]=$.extend(!0,{},e[t]);e.map(descaleBlock)}));for(var t=0;t<e.blocks.length;t++)e.blocks[t]=$.extend(!0,{},e.blocks[t]);e.blocks.map(descaleBlock)}return localStorage.setItem("highscores",JSON.stringify(highscores)),JSONfn.stringify(e)}function descaleBlock(e){e.distFromHex/=settings.scale}function writeHighScores(){highscores.sort((function(e,t){return(e=parseInt(e,10))<(t=parseInt(t,10))?1:e>t?-1:0})),highscores=highscores.slice(0,3),localStorage.setItem("highscores",JSON.stringify(highscores))}function clearSaveState(){localStorage.setItem("saveState","{}")}function isStateSaved(){return"{}"!=localStorage.getItem("saveState")&&null!=localStorage.getItem("saveState")}function Text(e,t,i,s,a,n){this.x=e,this.y=t,this.font=s,this.color=a,this.opacity=1,this.text=i,this.alive=1,this.draw=function(){return this.alive>0&&(ctx.globalAlpha=this.opacity,renderText(this.x+gdx,this.y+gdy,50,this.color,this.text),ctx.globalAlpha=1,n(this),!0)}}function fadeUpAndOut(e){e.opacity-=MainHex.dt*Math.pow(Math.pow(1-e.opacity,1/3)+1,3)/100,e.alive=e.opacity,e.y-=3*MainHex.dt}function search(e,t){for(var i=0;i<e.length;i++)if(e[i][0]==t[0]&&e[i][1]==t[1])return!0;return!1}function floodFill(e,t,i,s){if(void 0!==e.blocks[t]&&void 0!==e.blocks[t][i])for(var a=e.blocks[t][i].color,n=-1;n<2;n++)for(var o=-1;o<2;o++)if(Math.abs(n)!=Math.abs(o)){var r=(t+n+e.sides)%e.sides,c=i+o;void 0!==e.blocks[r]&&void 0!==e.blocks[r][c]&&e.blocks[r][c].color==a&&!1===search(s,[r,c])&&0===e.blocks[r][c].deleted&&(s.push([r,c]),floodFill(e,r,c,s))}}function consolidateBlocks(e,t,i){var s=[],a=[],n=[];if(a.push([t,i]),floodFill(e,t,i,a),!(a.length<3)){var o;for(o=0;o<a.length;o++){var r=a[o];void 0!==r&&2==r.length&&(-1==s.indexOf(r[0])&&s.push(r[0]),e.blocks[r[0]][r[1]].deleted=1,n.push(e.blocks[r[0]][r[1]]))}var c=MainHex.ct;if(c-e.lastCombo<settings.comboTime){settings.comboTime=1/settings.creationSpeedModifier*(waveone.nextGen/16.666667)*3,e.comboMultiplier+=1,e.lastCombo=c;var l=findCenterOfBlocks(n);e.texts.push(new Text(l.x,l.y,"x "+e.comboMultiplier.toString(),"bold Q","#fff",fadeUpAndOut))}else settings.comboTime=240,e.lastCombo=c,e.comboMultiplier=1;var h=a.length*a.length*e.comboMultiplier;e.texts.push(new Text(e.x,e.y,"+ "+h.toString(),"bold Q ",n[0].color,fadeUpAndOut)),e.lastColorScored=n[0].color,score+=h}}function drawTimer(){if(1==gameState){var e=[],t=[];if(MainHex.ct-MainHex.lastCombo<settings.comboTime)for(var i=0;i<6;i++){var s=MainHex.ct-MainHex.lastCombo;if(!(s<settings.comboTime*(5-i)*(1/6))){e.push(calcSide(i,i+1,1-6*s/settings.comboTime%1,1)),t.push(calcSide(12-i,11-i,1-6*s/settings.comboTime%1,1));break}e.push(calcSide(i,i+1,1,1)),t.push(calcSide(12-i,11-i,1,1))}0!==t.length&&drawSide(t),0!==e.length&&drawSide(e)}}function calcSide(e,t,i,s){e=(e+s)%12,t=(t+s)%12,ctx.globalAlpha=1,ctx.beginPath(),ctx.lineCap="round";var a=settings.rows*settings.blockHeight*(2/Math.sqrt(3))+settings.hexWidth,n=a/2,o=a*(Math.sqrt(3)/2),r=[[3*n/2,o/2],[a,0],[3*n/2,-o/2],[n,-o],[0,-o],[-n,-o],[-3*n/2,-o/2],[-a,0],[-3*n/2,o/2],[-n,o],[0,o],[n,o]].reverse(),c=trueCanvas.width/2+r[e][0],l=trueCanvas.height/2+r[e][1];return[[c,l],[(trueCanvas.width/2+r[t][0]-c)*i+c,(trueCanvas.height/2+r[t][1]-l)*i+l]]}function drawSide(e){0===gameState?ctx.strokeStyle=hexColorsToTintedColors[MainHex.lastColorScored]:ctx.strokeStyle=MainHex.lastColorScored,ctx.lineWidth=4*settings.scale,ctx.moveTo(e[0][0][0],e[0][0][1]),ctx.lineTo(e[0][1][0],e[0][1][1]);for(var t=1;t<e.length;t++)ctx.lineTo(e[t][1][0],e[t][1][1]),ctx.moveTo(e[t][1][0],e[t][1][1]);ctx.closePath(),ctx.fill(),ctx.stroke()}function Block(e,t,i,s,a){this.settled=void 0===a?0:1,this.height=settings.blockHeight,this.fallingLane=e,this.checked=0,this.angle=90-(30+60*e),this.angularVelocity=0,this.targetAngle=this.angle,this.color=t,this.deleted=0,this.removed=0,this.tint=0,this.opacity=1,this.initializing=1,this.ict=MainHex.ct,this.iter=i,this.initLen=settings.creationDt,this.attachedLane=0,this.distFromHex=s||settings.startDist*settings.scale,this.incrementOpacity=function(){if(this.deleted){if(this.opacity>=.925){var e=this.attachedLane-MainHex.position;for(e=MainHex.sides-e;e<0;)e+=MainHex.sides;e%=MainHex.sides,MainHex.shakes.push({lane:e,magnitude:3*(window.devicePixelRatio?window.devicePixelRatio:1)*settings.scale})}this.opacity=this.opacity-.075*MainHex.dt,this.opacity<=0&&(this.opacity=0,this.deleted=2,1!=gameState&&0!=gameState||localStorage.setItem("saveState",exportSaveState()))}},this.getIndex=function(){for(var e=MainHex.blocks[this.attachedLane],t=0;t<e.length;t++)if(e[t]==this)return t},this.draw=function(e,t){var i,s,a,n;if(this.height=settings.blockHeight,Math.abs(settings.scale-settings.prevScale)>1e-9&&(this.distFromHex*=settings.scale/settings.prevScale),this.incrementOpacity(),void 0===e&&(e=!1),this.angle>this.targetAngle?this.angularVelocity-=angularVelocityConst*MainHex.dt:this.angle<this.targetAngle&&(this.angularVelocity+=angularVelocityConst*MainHex.dt),Math.abs(this.angle-this.targetAngle+this.angularVelocity)<=Math.abs(this.angularVelocity)?(this.angle=this.targetAngle,this.angularVelocity=0):this.angle+=this.angularVelocity,this.width=2*this.distFromHex/Math.sqrt(3),this.widthWide=2*(this.distFromHex+this.height)/Math.sqrt(3),this.initializing){var o=(MainHex.ct-this.ict)/this.initLen;o>1&&(o=1),i=rotatePoint(-this.width/2*o,this.height/2,this.angle),s=rotatePoint(this.width/2*o,this.height/2,this.angle),a=rotatePoint(this.widthWide/2*o,-this.height/2,this.angle),n=rotatePoint(-this.widthWide/2*o,-this.height/2,this.angle),MainHex.ct-this.ict>=this.initLen&&(this.initializing=0)}else i=rotatePoint(-this.width/2,this.height/2,this.angle),s=rotatePoint(this.width/2,this.height/2,this.angle),a=rotatePoint(this.widthWide/2,-this.height/2,this.angle),n=rotatePoint(-this.widthWide/2,-this.height/2,this.angle);this.deleted?ctx.fillStyle="#FFF":0===gameState?"r"==this.color.charAt(0)?ctx.fillStyle=rgbColorsToTintedColors[this.color]:ctx.fillStyle=hexColorsToTintedColors[this.color]:ctx.fillStyle=this.color,ctx.globalAlpha=this.opacity;var r=trueCanvas.width/2+Math.sin(this.angle*(Math.PI/180))*(this.distFromHex+this.height/2)+gdx,c=trueCanvas.height/2-Math.cos(this.angle*(Math.PI/180))*(this.distFromHex+this.height/2)+gdy;ctx.beginPath(),ctx.moveTo(r+i.x,c+i.y),ctx.lineTo(r+s.x,c+s.y),ctx.lineTo(r+a.x,c+a.y),ctx.lineTo(r+n.x,c+n.y),ctx.closePath(),ctx.fill(),this.tint&&(this.opacity<1&&(1!=gameState&&0!=gameState||localStorage.setItem("saveState",exportSaveState()),this.iter=2.25,this.tint=0),ctx.fillStyle="#FFF",ctx.globalAlpha=this.tint,ctx.beginPath(),ctx.moveTo(r+i.x,c+i.y),ctx.lineTo(r+s.x,c+s.y),ctx.lineTo(r+a.x,c+a.y),ctx.lineTo(r+n.x,c+n.y),ctx.lineTo(r+i.x,c+i.y),ctx.closePath(),ctx.fill(),this.tint-=.02*MainHex.dt,this.tint<0&&(this.tint=0)),ctx.globalAlpha=1}}function findCenterOfBlocks(e){for(var t=0,i=0,s=0;s<e.length;s++){t+=e[s].distFromHex;for(var a=e[s].angle;a<0;)a+=360;i+=a%360}return t/=e.length,i/=e.length,{x:trueCanvas.width/2+Math.cos(i*(Math.PI/180))*t,y:trueCanvas.height/2+Math.sin(i*(Math.PI/180))*t}}function update(e){MainHex.dt=e,1==gameState&&(waveone.update(),MainHex.ct-waveone.prevTimeScored>1e3&&(waveone.prevTimeScored=MainHex.ct));var t,i,s,a=99;for(t=0;t<blocks.length;t++)MainHex.doesBlockCollide(blocks[t]),blocks[t].settled?blocks[t].removed||(blocks[t].removed=1):blocks[t].initializing||(blocks[t].distFromHex-=blocks[t].iter*e*settings.scale);for(t=0;t<MainHex.blocks.length;t++)for(i=0;i<MainHex.blocks[t].length;i++)1==MainHex.blocks[t][i].checked&&(consolidateBlocks(MainHex,MainHex.blocks[t][i].attachedLane,MainHex.blocks[t][i].getIndex()),MainHex.blocks[t][i].checked=0);for(t=0;t<MainHex.blocks.length;t++){for(a=99,i=0;i<MainHex.blocks[t].length;i++)2==(s=MainHex.blocks[t][i]).deleted&&(MainHex.blocks[t].splice(i,1),blockDestroyed(),i<a&&(a=i),i--);if(a<MainHex.blocks[t].length)for(i=a;i<MainHex.blocks[t].length;i++)MainHex.blocks[t][i].settled=0}for(t=0;t<MainHex.blocks.length;t++)for(i=0;i<MainHex.blocks[t].length;i++)s=MainHex.blocks[t][i],MainHex.doesBlockCollide(s,i,MainHex.blocks[t]),MainHex.blocks[t][i].settled||(MainHex.blocks[t][i].distFromHex-=s.iter*e*settings.scale);for(t=0;t<blocks.length;t++)1==blocks[t].removed&&(blocks.splice(t,1),t--);MainHex.ct+=e}function render(){var e,t="#bdc3c7";for(0===gameState&&(t="rgb(220, 223, 225)"),ctx.clearRect(0,0,trueCanvas.width,trueCanvas.height),clearGameBoard(),1!==gameState&&2!==gameState&&-1!==gameState&&0!==gameState||(op<1&&(op+=.01),ctx.globalAlpha=op,drawPolygon(trueCanvas.width/2,trueCanvas.height/2,6,settings.rows*settings.blockHeight*(2/Math.sqrt(3))+settings.hexWidth,30,t,!1,6),drawTimer(),ctx.globalAlpha=1),e=0;e<MainHex.blocks.length;e++)for(var i=0;i<MainHex.blocks[e].length;i++){MainHex.blocks[e][i].draw(!0,i)}for(e=0;e<blocks.length;e++)blocks[e].draw();for(MainHex.draw(),1!=gameState&&-1!=gameState&&0!==gameState||drawScoreboard(),e=0;e<MainHex.texts.length;e++){MainHex.texts[e].draw()||(MainHex.texts.splice(e,1),e--)}MainHex.ct<650&&0!==gameState&&!MainHex.playThrough&&(MainHex.ct>600&&(ctx.globalAlpha=(50-(MainHex.ct-600))/50),MainHex.ct<50&&(ctx.globalAlpha=MainHex.ct/50),renderBeginningText(),ctx.globalAlpha=1),-1==gameState&&(ctx.globalAlpha=.9,ctx.fillStyle="rgb(236,240,241)",ctx.fillRect(0,0,trueCanvas.width,trueCanvas.height),ctx.globalAlpha=1),settings.prevScale=settings.scale,settings.hexWidth=settings.baseHexWidth*settings.scale,settings.blockHeight=settings.baseBlockHeight*settings.scale}function renderBeginningText(){var e,t,i=trueCanvas.height/2-settings.rows*settings.blockHeight*(2/Math.sqrt(3))*(5/6),s=trueCanvas.height/2+settings.rows*settings.blockHeight*(2/Math.sqrt(3))*(11/16);/mobile|Mobile|iOS|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(e=!0,input_text="Tap the screen's left and right",action_text="sides to rotate the hexagon",score_text="Match 3+ blocks to score",t=35):(e=!1,input_text="Use the right and left arrow keys",action_text="to rotate the hexagon",score_text="Match 3+ blocks to score!",t=27),renderText(trueCanvas.width/2+2*settings.scale,i-0*settings.scale,t,"#2c3e50",input_text),renderText(trueCanvas.width/2+2*settings.scale,i+33*settings.scale,t,"#2c3e50",action_text),e||drawKey("",trueCanvas.width/2+2*settings.scale-2.5,i+38*settings.scale),renderText(trueCanvas.width/2+2*settings.scale,s,t,"#2c3e50",score_text)}function drawKey(e,t,i){switch(ctx.save(),e){case"left":ctx.translate(t,i+13*settings.scale),ctx.rotate(3.14159),ctx.font="20px Fontawesome",ctx.scale(settings.scale,settings.scale),ctx.fillText(String.fromCharCode("0xf04b"),0,0);break;case"right":ctx.font="20px Fontawesome",ctx.translate(t,i+27.5*settings.scale),ctx.scale(settings.scale,settings.scale),ctx.fillText(String.fromCharCode("0xf04b"),0,0);break;default:drawKey("left",t-5,i),drawKey("right",t+5,i)}ctx.restore()}function addKeyListeners(){keypress.register_combo({keys:"left",on_keydown:function(){MainHex&&0!==gameState&&MainHex.rotate(1)}}),keypress.register_combo({keys:"right",on_keydown:function(){MainHex&&0!==gameState&&MainHex.rotate(-1)}}),keypress.register_combo({keys:"down",on_keydown:function(){settings.speedModifier;MainHex&&0!==gameState&&0==settings.speedUpKeyHeld&&(settings.speedUpKeyHeld=!0,window.rush*=4)},on_keyup:function(){MainHex&&0!==gameState&&(window.rush/=4,settings.speedUpKeyHeld=!1)}}),keypress.register_combo({keys:"a",on_keydown:function(){MainHex&&0!==gameState&&MainHex.rotate(1)}}),keypress.register_combo({keys:"d",on_keydown:function(){MainHex&&0!==gameState&&MainHex.rotate(-1)}}),keypress.register_combo({keys:"s",on_keydown:function(){settings.speedModifier;MainHex&&0!==gameState&&0==settings.speedUpKeyHeld&&(settings.speedUpKeyHeld=!0,window.rush*=4)},on_keyup:function(){MainHex&&0!==gameState&&(window.rush/=4,settings.speedUpKeyHeld=!1)}}),keypress.register_combo({keys:"p",on_keydown:function(){pause()}}),keypress.register_combo({keys:"space",on_keydown:function(){pause()}}),keypress.register_combo({keys:"q",on_keydown:function(){devMode&&toggleDevTools()}}),keypress.register_combo({keys:"enter",on_keydown:function(){1!=gameState&&1!=importing||init(1),2==gameState&&(init(),$("#gameoverscreen").fadeOut()),0===gameState&&resumeGame()}}),$("#pauseBtn").on("touchstart mousedown",(function(){if(1==gameState||-1==gameState)return $("#helpScreen").is(":visible")&&$("#helpScreen").fadeOut(150,"linear"),pause(),!1})),$("#colorBlindBtn").on("touchstart mousedown",(function(){window.colors=["#8e44ad","#f1c40f","#3498db","#d35400"],window.hexColorsToTintedColors={"#8e44ad":"rgb(229,152,102)","#f1c40f":"rgb(246,223,133)","#3498db":"rgb(151,201,235)","#d35400":"rgb(210,180,222)"},window.rgbToHex={"rgb(142,68,173)":"#8e44ad","rgb(241,196,15)":"#f1c40f","rgb(52,152,219)":"#3498db","rgb(211,84,0)":"#d35400"},window.rgbColorsToTintedColors={"rgb(142,68,173)":"rgb(229,152,102)","rgb(241,196,15)":"rgb(246,223,133)","rgb(52,152,219)":"rgb(151,201,235)","rgb(46,204,113)":"rgb(210,180,222)"}})),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$("#restart").on("touchstart",(function(){init(),canRestart=!1,$("#gameoverscreen").fadeOut()})):$("#restart").on("mousedown",(function(){init(),canRestart=!1,$("#gameoverscreen").fadeOut()})),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$("#restartBtn").on("touchstart",(function(){init(1),canRestart=!1,$("#gameoverscreen").fadeOut()})):$("#restartBtn").on("mousedown",(function(){init(1),canRestart=!1,$("#gameoverscreen").fadeOut()}))}function inside(e,t){for(var i=e[0],s=e[1],a=!1,n=0,o=t.length-1;n<t.length;o=n++){var r=t[n][0],c=t[n][1],l=t[o][0],h=t[o][1];c>s!=h>s&&i<(l-r)*(s-c)/(h-c)+r&&(a=!a)}return a}function handleClickTap(e,t){if(e<120&&t<83&&$(".helpText").is(":visible"))showHelp();else{var i=settings.hexWidth,s=i/2,a=i*(Math.sqrt(3)/2),n=[[i,0],[s,-a],[-s,-a],[-i,0],[-s,a],[s,a]];n=n.map((function(e){return[e[0]+trueCanvas.width/2,e[1]+trueCanvas.height/2]})),MainHex&&0!==gameState&&-1!=gameState&&(e<window.innerWidth/2&&MainHex.rotate(1),e>window.innerWidth/2&&MainHex.rotate(-1))}}function initialize(e){if(window.rush=1,window.lastTime=Date.now(),window.iframHasLoaded=!1,window.colors=["#e74c3c","#f1c40f","#3498db","#2ecc71"],window.hexColorsToTintedColors={"#e74c3c":"rgb(241,163,155)","#f1c40f":"rgb(246,223,133)","#3498db":"rgb(151,201,235)","#2ecc71":"rgb(150,227,183)"},window.rgbToHex={"rgb(231,76,60)":"#e74c3c","rgb(241,196,15)":"#f1c40f","rgb(52,152,219)":"#3498db","rgb(46,204,113)":"#2ecc71"},window.rgbColorsToTintedColors={"rgb(231,76,60)":"rgb(241,163,155)","rgb(241,196,15)":"rgb(246,223,133)","rgb(52,152,219)":"rgb(151,201,235)","rgb(46,204,113)":"rgb(150,227,183)"},window.hexagonBackgroundColor="rgb(236, 240, 241)",window.hexagonBackgroundColorClear="rgba(236, 240, 241, 0.5)",window.centerBlue="rgb(44,62,80)",window.angularVelocityConst=4,window.scoreOpacity=0,window.textOpacity=0,window.prevGameState=void 0,window.op=0,window.saveState=localStorage.getItem("saveState")||"{}","{}"!==saveState&&(op=1),window.textShown=!1,window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/framerate)},$("#clickToExit").bind("click",toggleDevTools),window.settings,/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?($(".rrssb-email").remove(),settings={os:"other",platform:"mobile",startDist:227,creationDt:60,baseScale:1.4,scale:1,prevScale:1,baseHexWidth:87,hexWidth:87,baseBlockHeight:20,blockHeight:20,rows:7,speedModifier:.73,speedUpKeyHeld:!1,creationSpeedModifier:.73,comboTime:310}):settings={os:"other",platform:"nonmobile",baseScale:1,startDist:340,creationDt:9,scale:1,prevScale:1,hexWidth:65,baseHexWidth:87,baseBlockHeight:20,blockHeight:15,rows:8,speedModifier:.65,speedUpKeyHeld:!1,creationSpeedModifier:.65,comboTime:310},/Android/i.test(navigator.userAgent)&&(settings.os="android"),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))&&(settings.os="ios"),window.canvas=document.getElementById("canvas"),window.ctx=canvas.getContext("2d"),window.trueCanvas={width:canvas.width,height:canvas.height},scaleCanvas(),window.framerate=60,window.history={},window.score=0,window.scoreAdditionCoeff=1,window.prevScore=0,window.numHighScores=3,highscores=[],localStorage.getItem("highscores"))try{highscores=JSON.parse(localStorage.getItem("highscores"))}catch(e){highscores=[]}window.blocks=[],window.MainHex,window.gdx=0,window.gdy=0,window.devMode=0,window.lastGen=void 0,window.prevTimeScored=void 0,window.nextGen=void 0,window.spawnLane=0,window.importing=0,window.importedHistory=void 0,window.startTime=void 0,window.gameState,setStartScreen(),1!=e&&(window.canRestart=1,window.onblur=function(e){1==gameState&&pause()},$("#startBtn").off(),"mobile"==settings.platform?$("#startBtn").on("touchstart",startBtnHandler):$("#startBtn").on("mousedown",startBtnHandler),document.addEventListener("touchmove",(function(e){e.preventDefault()}),!1),$(window).resize(scaleCanvas),$(window).unload((function(){1==gameState||-1==gameState||0===gameState?localStorage.setItem("saveState",exportSaveState()):localStorage.setItem("saveState","{}")})),addKeyListeners(),document.addEventListener("pause",handlePause,!1),document.addEventListener("backbutton",handlePause,!1),document.addEventListener("menubutton",handlePause,!1),setTimeout((function(){if("mobile"==settings.platform){try{document.body.removeEventListener("touchstart",handleTapBefore,!1)}catch(e){}try{document.body.removeEventListener("touchstart",handleTap,!1)}catch(e){}document.body.addEventListener("touchstart",handleTapBefore,!1)}else{try{document.body.removeEventListener("mousedown",handleClickBefore,!1)}catch(e){}try{document.body.removeEventListener("mousedown",handleClick,!1)}catch(e){}document.body.addEventListener("mousedown",handleClickBefore,!1)}}),1))}function startBtnHandler(){if(setTimeout((function(){if("mobile"==settings.platform){try{document.body.removeEventListener("touchstart",handleTapBefore,!1)}catch(e){}try{document.body.removeEventListener("touchstart",handleTap,!1)}catch(e){}document.body.addEventListener("touchstart",handleTap,!1)}else{try{document.body.removeEventListener("mousedown",handleClickBefore,!1)}catch(e){}try{document.body.removeEventListener("mousedown",handleClick,!1)}catch(e){}document.body.addEventListener("mousedown",handleClick,!1)}}),5),!canRestart)return!1;$("#openSideBar").is(":visible")&&$("#openSideBar").fadeOut(150,"linear"),1==importing?(init(1),checkVisualElements(0)):resumeGame()}function handlePause(){1!=gameState&&2!=gameState||pause()}function handleTap(e){handleClickTap(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}function handleClick(e){handleClickTap(e.clientX,e.clientY)}function handleTapBefore(e){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY;t<120&&i<83&&$(".helpText").is(":visible")&&showHelp()}function handleClickBefore(e){var t=e.clientX,i=e.clientY;t<120&&i<83&&$(".helpText").is(":visible")&&showHelp()}$(document).ready((function(){initialize()}));