var BackgroundService=new function(){var e=this,t=!(!window.Blob||!window.Worker),n=null;function i(t){var n=new Date,i=new Grid(t);i.generateFast();var a={};a.size=t,a.full=i.getValues();var s=0,r={4:60,6:60,8:60,10:60},l=0;do{l>0&&(i.clear(),i.state.restore("full")),i.breakDown(),s=i.quality}while(s<r[t]&&l++<42);i.getValues();a.empty=i.getValues(),a.quality=i.quality,a.ms=new Date-n,e.postMessage(JSON.stringify(a))}function a(){var e=[Utility,State,Grid,Tile,i,"\nvar Utils = new Utility();","\nfunction Hint() { this.active = false; }","self.onmessage = function(e) {generateGridAndSolution(e.data.size)};"].join(""),t=new Blob([e],{type:"text/javascript"});(n=new Worker(window.URL.createObjectURL(t))).onmessage=function(e){!function(e){Game.debug;Levels.addSize(e.size,e)}(JSON.parse(e.data))}}function s(e){t&&(n||a(),n.postMessage({size:e}))}Game.debug,this.generatePuzzle=s,this.kick=function(){Levels.needs()&&s(Levels.needs())},this.__defineGetter__("enabled",(function(){return t}))};