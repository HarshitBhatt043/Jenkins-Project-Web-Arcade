define((function(n,e,r){"use strict";var t=n("lib/CustEvent"),o=n("general/Ball"),f=n("general/Tween");r.exports=function(n,e,r,u,s){var i,l=[],a=[],p=t();return s=s||1,i={ballList:l,add:function(n){},remove:function(n){var e=l[n];return l.splice(n,1),e},clear:function(){a=[],l=[]},popup:function(){var n=l.shift();n.st=+new Date,n.sv=n.pos().y,a.push(n)},update:function(){var n,t,o,u=a.length,s=l.length;if(u){for(t=a[0].rad(),n=r-3*t;u--;)a[u].pos(e,f.simple(a[u].sv,n,a[u].st,50)),o=a[a.length-1].pos().y,a[u].pos().y===n&&(p.fire("popup",a[u]),a.splice(u,1));for(;s--;)l[s].pos(e,o+3*t*(s+1))}},render:function(){for(var n=l.length,e=a.length;n--;)l[n].render();for(;e--;)a[e].render()},on:function(n,e){p.add(n,e)},off:function(n,e){p.remove(n,e)},destroy:function(){for(var n=l.length;n--;)l[n].destroy();p.destroy()}},function(){var t,f,i=function(n){var e=n,r=[];for(;e--;)r.push(e+1);return r}(n),a=i.length;for(t=0;t<a;t++)(f=o(u,null,i[t],null,s)).pos(e,r+3*f.rad()*t),l.push(f)}(),i}}));