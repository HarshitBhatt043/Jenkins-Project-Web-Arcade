!function(e){var t={enabled:!1,version:"0.11.3",_:{}};window.cards=t}(),function(){var e;Object.keys||(Object.keys=function(e){var t=[];for(var r in e)t.push(r);return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var r=t||0,n=this.length;r<n;r++)if(r in this&&this[r]===e)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var r=0,n=this.length;r<n;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){for(var r=this.length,n=new Array(r),o=0;o<r;o++)o in this&&(n[o]=e.call(t,this[o],o,this));return n}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var r,n=[],o=0,i=this.length;o<i;o++)r=this[o],o in this&&e.call(t,r,o,this)&&n.push(r);return n}),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var r=0,n=this.length;for(void 0===t&&(t=this[0],r=1);r<n;r++)r in this&&(t=e(t,this[r],r,this));return t}),String.prototype.trim||(String.prototype.trim=(e=/^\s+|\s+$/g,function(){return String(this).replace(e,"")}))}(),"undefined"==typeof document||"classList"in document.createElement("a")||function(e){var t="classList",r="prototype",n=(e.HTMLElement||e.Element)[r],o=Object,i=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[r].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},c=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},u=function(e){for(var t=i.call(e.className),r=t?t.split(/\s+/):[],n=0,o=r.length;n<o;n++)this.push(r[n]);this._updateClassName=function(){e.className=this.toString()}},l=u[r]=[],d=function(){return new u(this)};if(s[r]=Error[r],l.item=function(e){return this[e]||null},l.contains=function(e){return-1!==c(this,e+="")},l.add=function(e){-1===c(this,e+="")&&(this.push(e),this._updateClassName())},l.remove=function(e){var t=c(this,e+="");-1!==t&&(this.splice(t,1),this._updateClassName())},l.toggle=function(e){-1===c(this,e+="")?this.add(e):this.remove(e)},l.toString=function(){return this.join(" ")},o.defineProperty){var f={get:d,enumerable:!0,configurable:!0};try{o.defineProperty(n,t,f)}catch(e){-2146823252===e.number&&(f.enumerable=!1,o.defineProperty(n,t,f))}}else o[r].__defineGetter__&&n.__defineGetter__(t,d)}(self),function(e,t,r){var n=!1,o=[];function i(e,t){n||(n=!0,o.forEach((function(r){try{r(e,t)}catch(e){}})),n=!1)}function a(t,r){switch(typeof t){case"undefined":t=function(){};case"function":break;default:return t}return function(){var n=Array.prototype.map.call(arguments,(function(t){if("object"==typeof t&&null!==t&&e.JSON&&JSON.stringify)try{return JSON.stringify(t)}catch(e){}return t+""})).join(" ");i(r,n),t.apply(this,arguments)}}!function(){var t=e.console;"object"!=typeof t&&(t={});t.log=a(t.log,"log"),t.warn=a(t.warn,"warn"),t.error=a(t.error,"error"),function(){if(!e.addEventListener)return;e.addEventListener("error",(function(e){i("exception",e.message+"")}),!1)}(),e.console=t}(),r._.onLog=function(e){if("function"!=typeof e)throw TypeError("log listener must be a function, got "+e);o.push(e)}}(window,document,cards),function(e,t,r){var n,o={};r.utils=o,o.error=function(t){e.console&&e.console.error&&("object"==typeof t&&t.stack?e.console.error(t.stack):e.console.error(t+""))},o.platform={},o.platform.os=function(){var t,r,n,o=e.navigator.userAgent;(n=/\bCPU.*OS (\d+(_\d+)?)/i.exec(o))?(t="ios",r=n[1].replace("_",".")):(n=/\bAndroid (\d+(\.\d+)?)/.exec(o))?(t="android",r=n[1]):(n=/\bWindows Phone OS (\d+(\.\d+)?)/.exec(o))?(t="winphone",r=n[1]):(n=/\bMac OS X (\d+(_\d+)?)/.exec(o))?(t="osx",r=n[1].replace("_",".")):(n=/\bWindows NT (\d+(.\d+)?)/.exec(o))?(t="windows",r=n[1]):(n=/\bLinux\b/.exec(o))?(t="linux",r=null):(n=/\b(Free|Net|Open)BSD\b/.exec(o))&&(t="bsd",r=null);var i={name:t,version:r&&e.parseFloat(r),versionString:r};return i[t]=!0,i}(),o.os=o.platform.os,o.platform.browser=function(){var t,r,n,i=e.navigator.userAgent;(n=/\bMSIE (\d+(\.\d+)?)/i.exec(i))?(t="msie",r=n[1]):(n=/\bOpera\/(\d+(\.\d+)?)/i.exec(i))?(t="opera",r=n[1],(n=/\bVersion\/(\d+(\.\d+)?)/i.exec(i))&&(r=n[1])):(n=/\bChrome\/(\d+(\.\d+)?)/i.exec(i))?(t="chrome",r=n[1]):-1!=i.indexOf("Safari/")&&(n=/\bVersion\/(\d+(\.\d+)?)/i.exec(i))?(t=o.platform.os.android?"android":"safari",r=n[1]):(n=/\bFirefox\/(\d+(\.\d+)?)/i.exec(i))&&(t="firefox",r=n[1]);var a={name:t,version:r&&e.parseFloat(r),versionString:r};return a[t]=!0,a}(),o.browser=o.platform.browser,o.platform.engine=function(){var t,r,n,o=e.navigator.userAgent;(n=/\bTrident\/(\d+(\.\d+)?)/i.exec(o))?(t="trident",r=n[1]):(n=/\bMSIE 7/i.exec(o))?(t="trident",r="3.1"):(n=/\bPresto\/(\d+(\.\d+)?)/i.exec(o))?(t="presto",r=n[1]):(n=/\bAppleWebKit\/(\d+(\.\d+)?)/i.exec(o))?(t="webkit",r=n[1]):(n=/\brv\:(\d+(\.\d+)?)/i.exec(o))&&(t="gecko",r=n[1]);var i={name:t,version:r&&e.parseFloat(r),versionString:r};return i[t]=!0,i}(),o.engine=o.platform.engine,o.random={},o.random.name=function(e){return("____"+(e||"")+"____"+Math.random()).replace(/\.|\-/g,"")},o.random.num=function(){return Math.floor(0x40000000000000*Math.random()-9007199254740992)},o.random.uuid=function(){var e,t=new Array(36);for(e=0;e<36;e++)t[e]=Math.floor(16*Math.random());for(t[14]=4,t[19]=3&t[19]|8,e=0;e<36;e++)t[e]="0123456789abcdef"[t[e]];return t[8]=t[13]=t[18]=t[23]="-",t.join("")},o.enumerate=function(e){"object"!=typeof e&&(e=Array.prototype.slice.call(arguments));for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=r;return t},o.preloadImage=function(){var e={};return function(){var e=arguments;cards.ready((function(){t.apply(o,e)}))};function t(t,r){if("string"==typeof t)if(!0!==e[t])if(e[t])e[t].push(r);else{e[t]=[r];var n=!1,i=new Image;i.onload=function(){a(!0)},i.onerror=function(){a(!1)},i.src=t}else r&&setTimeout((function(){r(!0)}),0);else o.asyncJoin(t.map((function(e){return function(t){o.preloadImage(e,t)}})),r||function(){});function a(r){if(!n){n=!0;var o=e[t];e[t]=r;for(var i,a=0,s=o.length;a<s;a++)(i=o[a])&&i(r)}}}}(),o.url={},o.url.dir=(n=/\/[^\/]*$/,function(t){switch(typeof t){case"undefined":t=e.location.href;case"string":break;default:throw TypeError("url "+t+" must be string if defined")}return(t=(t.split("?")[0]||"").split("#")[0]||"").replace(n,"/")}),o.url.host=function(){var t=/^https?\:\/\/([^\/]+)\/.*$/;return function(r){switch(typeof r){case"undefined":return e.location.host;case"string":break;default:throw TypeError("url "+r+" must be string if defined")}var n=t.exec(r);return n&&n[1]}}(),o.url.path=function(){var t=/^https?\:\/\/[^\/]+(\/.*)$/;return function(r){switch(typeof r){case"undefined":return e.location.pathname;case"string":break;default:throw TypeError("url "+r+" must be string if defined")}var n=t.exec(r);return n&&n[1]}}(),o.url.dataToQuery=function(){var e=/%20/g;return function(t){var r,n,o,i=[];for(var a in t)null!=(r=t[a])&&(n=encodeURIComponent(a),o=encodeURIComponent(r),i.push(n+"="+o));return i.join("&").replace(e,"+")}}(),o.url.queryToData=function(){var e=/([^&=]+)=([^&]+)/g,t=/\+/g;return function(r){var n,o,i,a={};if(r)for(r=r.replace(t,"%20");n=e.exec(r);)o=decodeURIComponent(n[1]),i=decodeURIComponent(n[2]),a[o]=i;return a}}(),o.url.withQuery=function(t,r){r||(r=t,t=e.location.href),t=t.split("?")[0];var n=o.url.dataToQuery(r);return n&&(t+="?"+n),t},o.url.updateQuery=function(t,r){r||(r=t,t=e.location.href);var n=o.url.parseQuery(t);return o.obj.extend(n,r),o.url.withQuery(t,n)},o.url.parseQuery=function(t){return t=t||e.location.href,o.url.queryToData(t.split("?")[1])},o.url.query=o.url.parseQuery(),o.jsonp=function(r){var n=!1,i=function(){},a=o.random.name("PICARD_UTILS_JSONP_CALLBACK"),s=r.url,c=o.obj.copy(r.data),u=r.callbackName||"callback",l=r.callback||i,d=r.success||i,f=r.error||i,p=r.complete||i,h=t.getElementsByTagName("script")[0],m=t.createElement("script");function g(){e[a]=i;try{h.parentNode.removeChild(m)}catch(e){}}function y(){n||(g(),l=i,d=i,f(),f=i,p(),p=i)}c[u]="window."+a,m.type="text/javascript",m.async=!0,m.onerror=y,m.src=o.url.updateQuery(s,c),e[a]=function(){n=!0,g(),l.apply(this,arguments),l=i,d.apply(this,arguments),d=i,f=i,p(),p=i},r.timeout&&setTimeout(y,r.timeout),h.parentNode.insertBefore(m,h)},o.asyncJoin=function(t,r){var n=!0;Array.isArray(t)||(n=!1,t=Array.prototype.slice.call(arguments),r=t.pop());var o=!1,i=t.length,a=new Array(i);function s(){0!==i||o||(o=!0,setTimeout((function(){n?r.call(e,a):r.apply(e,a)}),0))}0!==i?t.forEach((function(e,t){setTimeout((function(){var r=!1;e((function(){if(!r&&(r=!0,!a[t])){var e=Array.prototype.slice.call(arguments);a[t]=e,i--,s()}}))}),0)})):s()},o.obj={},o.obj.extend=function(e,t){for(var r in t)val1=e[r],val2=t[r],val1!==val2&&(e[r]=val2);return e},o.obj.copy=function(e){return o.obj.extend({},e)},o.obj.forEach=function(e,t,r){for(var n in e)t.call(r,n,e[n],e)},o.obj.inverse=function(e){var t={};for(var r in e)t[e[r]]=r;return t},o.obj.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},o.obj.has=function(e,t){for(var r in e)if(e[r]===t)return!0;return!1},o.windowReady=function(r){"complete"!==t.readyState?e.addEventListener("load",(function t(){e.removeEventListener("load",t),setTimeout((function(){r()}),0)}),!1):setTimeout((function(){r()}),0)},o.ready=function(){var r=!1,n=[];function i(e){try{t.documentElement.doScroll("left")}catch(t){return void setTimeout((function(){i(e)}),1)}e&&e()}return function(r){if("complete"!==t.readyState){if(t.addEventListener)t.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1);else if(t.attachEvent){t.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var n=!1;try{n=null===e.frameElement}catch(e){}t.documentElement.doScroll&&n&&setTimeout((function(){i(r)}),0)}}else setTimeout(r,0)}((function(){if(!r){r=!0;for(var e;e=n.shift();)try{e()}catch(e){o.error(e)}}})),function(e){if("function"!=typeof e)throw TypeError("callback "+e+" must be a function");r?setTimeout((function(){e()}),0):n.push(e)}}()}(window,document,cards),function(e,t,r){function n(){this.handlers={},this.onceHandlers={},this.globalHandlers=[],this.globalOnceHandlers=[]}function o(e,t){for(var r=e.length;r--;)e[r]===t&&e.splice(r,1)}function i(){this.handlers=[],this.events=[]}r.events=function(e){void 0===e&&(e={});var t=new n;return e.on=function(r,n){if(Array.isArray(r))r.forEach((function(t){e.on(t,n)}));else{if(void 0===n&&(n=r,r=""),"string"!=typeof r)throw TypeError("name "+r+" must be a string");if("function"!=typeof n)throw TypeError("handler "+n+" must be a function");r?t.bind(r,n):t.bindToAll(n)}},e.off=function(r,n){if(Array.isArray(r))r.forEach((function(t){e.off(t,n)}));else{if(void 0===n&&(n=r,r=""),"string"!=typeof r)throw TypeError("name "+r+" must be a string");if("function"!=typeof n)throw TypeError("handler "+n+" must be a function");r?t.unbind(r,n):t.unbindFromAll(n)}},e.once=function(r,n){if(Array.isArray(r))r.forEach((function(t){e.once(t,n)}));else{if(void 0===n&&(n=r,r=""),"string"!=typeof r)throw TypeError("name "+r+" must be a string");if("function"!=typeof n)throw TypeError("handler "+n+" must be a function");r?t.bindOnce(r,n):t.bindToAllOnce(n)}},e.trigger=function(r,n,o){if(Array.isArray(r))r.forEach((function(t){e.trigger(t,n,o)}));else{if("string"!=typeof r)throw TypeError("name "+r+" must be a string");t.trigger(r,n,o)}},e},r.events.handlers=function(){var e=new i;return{handler:function(t){return e.addHandler(t)},trigger:function(t){e.triggerEvent(t)},triggerMulti:function(t){e.triggerEvents(t)}}},n.prototype.insureNamespace=function(e){this.handlers[e]||(this.handlers[e]=[]),this.onceHandlers[e]||(this.onceHandlers[e]=[])},n.prototype.bind=function(e,t){this.insureNamespace(e),this.handlers[e].push(t)},n.prototype.bindToAll=function(e){this.globalHandlers.push(e)},n.prototype.bindOnce=function(e,t){this.insureNamespace(e),this.onceHandlers[e].push(t)},n.prototype.bindToAllOnce=function(e){this.globalOnceHandlers.push(e)},n.prototype.unbind=function(e,t){this.insureNamespace(e),o(this.handlers[e],t),o(this.onceHandlers[e],t)},n.prototype.unbindFromAll=function(e){for(var t in o(this.globalHandlers,e),o(this.globalOnceHandlers,e),this.handlers)o(this.handlers[t],e),o(this.onceHandlers[t],e)},n.prototype.trigger=function(e,t,n){function o(o){try{o.call(n,t,e)}catch(e){r.utils.error(e)}}this.insureNamespace(e),void 0===n&&(n=this),this.handlers[e].forEach(o),this.globalHandlers.forEach(o),this.onceHandlers[e].forEach(o),this.globalOnceHandlers.forEach(o),this.onceHandlers[e].splice(0),this.globalOnceHandlers.splice(0)},i.prototype.addHandler=function(e){return this.handlers.push(e),this.processEvents()},i.prototype.triggerEvent=function(e){this.events.push(e),this.processEvents()},i.prototype.triggerEvents=function(e){this.events=this.events.concat(e),this.processEvents()},i.prototype.processEvents=function(){if(!this.events.length||!this.handlers.length)return!1;var e=this.events.splice(0),t=this.handlers;return e.forEach((function(e){t.forEach((function(t){t(e)}))})),!0}}(window,document,cards),cards.ready=function(e,t){var r=[];return t.utils.windowReady((function(){setTimeout((function(){var e=r.slice();r=null,e.forEach(n)}),3)})),function(e){r?r.push(e):n(e)};function n(e){try{e()}catch(e){t.utils.error(e)}}}(window,cards),cards.open=function(e,t){var r=t.utils.platform.os;t.utils.platform.browser;return e.open=function(e){n(e)},n.card=o,n;function n(r,n){if("string"!=typeof r)throw TypeError("url must be a string, got "+r);switch(typeof n){case"object":n=JSON.stringify(n);case"undefined":case"string":break;default:throw TypeError("linkData must be a string of JSON if defined, got "+n)}if(t.browser&&t.browser.open)t.browser.open(r,n);else{n&&(r=r.split("#")[0]+"#"+encodeURIComponent(n));var i="card://"===r.substr(0,7),a="cards://"===r.substr(0,8);i||a?o(r,"http"+r.substr(4)):e.location.href=r}}function o(n,o,i){if(r.ios||r.android){if(r.ios)return o&&setTimeout((function(){document.webkitHidden||(e.location.href=o)}),r.ios?25:1e3),void(i?t.ready((function(){setTimeout((function(){e.location.href=n}),0)})):e.location.href=n);var a;o&&(a=setTimeout((function(){e.location=o}),1e3));var s=document.createElement("iframe");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="1px",s.style.height="1px",s.style.border="none",s.style.opacity="0",s.onload=function(){o&&clearTimeout(a);try{document.documentElement.removeChild(s)}catch(e){}},s.src=n,document.documentElement.appendChild(s)}else o&&(e.location.href=o)}}(window,cards),function(e,t){var r="__PICARD_ID__";e.localStorage&&(e.localStorage[r]||(e.localStorage[r]=t.utils.random.uuid()),t._.id=e.localStorage[r])}(window,cards),function(e,t){if(-1!==navigator.userAgent.indexOf("Kik/")&&/\bandroid/i.test(navigator.userAgent)&&t&&!e.CardsBridge){var r=e.CardsBridge={};["invokeAsyncFunction","invokeFunction","poll"].forEach((function(e){r[e]=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),t("CardsBridge",JSON.stringify(r))||""}}))}}(window,window.prompt),function(window){if(window.chrome&&window.chrome.app&&!window.shimsham){var shimshamMeta=document.getElementById("shimsham-meta");if(shimshamMeta&&"META"===shimshamMeta.nodeName){var url=shimshamMeta.content;try{var xhr=new XMLHttpRequest;xhr.open("GET",url,!1),xhr.send(null),200===xhr.status&&eval(xhr.responseText)}catch(e){}}}}(window),function(window,document,picard){var BRIDGE_SIGNAL_URL=window.location.protocol+"//cardsbridge.kik.com/",PLUGIN_REQUEST_BATCH="batch-call",PLUGIN_REQUEST_NAME="requestPlugin",PLUGIN_REQUEST_VERSION="requestVersion",PLUGIN_LOG="log",plugins={},os=picard.utils.platform.os,androidBridge=window.CardsBridge;function getBridge(){var e=getAndroidBridge();return e||!(!os.ios||looksLikeChrome())&&getIPhoneBridge()}function looksLikeChrome(){try{return"function"==typeof window.chrome.send}catch(e){return!1}}function getAndroidBridge(){return!!androidBridge&&("function"==typeof androidBridge.invokeFunction&&("function"==typeof androidBridge.poll&&makeBridgeCall(PLUGIN_REQUEST_VERSION).data))}function getIPhoneBridge(){var e;try{e=makeBridgeCall(PLUGIN_REQUEST_VERSION).data}catch(e){}return e||!1}function sendIFrameSignal(e,t,r){var n,o,i=picard.utils.random.name("PICARD_BRIDGE_CALLBACK");window[i]=function(e,t){delete window[i],n=e,o=t};var a=BRIDGE_SIGNAL_URL+e+"/"+i+"?args="+encodeURIComponent(t)+"&async="+(r||""),s=document.documentElement,c=document.createElement("iframe");if(c.style.display="none",c.src=a,s.appendChild(c),s.removeChild(c),window[i])throw delete window[i],Error("bridge call "+e+" failed to return");return{status:n,data:o}}function sendBatchIFrameSignal(e){var t=e.map((function(e){return encodeURIComponent(e)})).join(","),r=BRIDGE_SIGNAL_URL+PLUGIN_REQUEST_BATCH+"?calls="+t,n=document.documentElement,o=document.createElement("iframe");o.style.display="none",o.src=r,n.appendChild(o),n.removeChild(o)}function androidBridgeCall(e,t,r){var n,o;if(r){if(!androidBridge.invokeAsyncFunction)throw TypeError("bridge: android bridge does not support async callbacks");n=androidBridge.invokeAsyncFunction(e,t,r)}else n=androidBridge.invokeFunction(e,t);try{o=JSON.parse(n)}catch(t){throw TypeError("bridge call for "+e+" responded with invalid JSON")}return{status:o.status,data:o.data}}function makeBridgeCall(e,t,r){if("string"!=typeof e)throw TypeError("bridge call "+e+" must be a string");switch(typeof t){case"function":r=t,t=void 0;case"undefined":t={};case"object":break;default:throw TypeError("bridge call arguments "+t+" must be a JSON object if specified")}switch(typeof r){case"undefined":case"function":break;default:throw TypeError("bridge async callback must be a function if defined, got "+r)}var n,o,i;try{n=JSON.stringify(t)}catch(e){throw TypeError("bridge call arguments "+t+" must be a JSON object")}return r&&(o=setupAsyncCallback(r)),i=androidBridge?androidBridgeCall(e,n,o):sendIFrameSignal(e,n,o),!o||i&&i.status&&202===i.status||(setTimeout((function(){window[o]&&(androidBridge?window[o](JSON.stringify({status:500,data:null})):window[o](500,null))}),0),i={status:202,data:{}}),i}function setupAsyncCallback(e){var t=picard.utils.random.name("PICARD_BRIDGE_ASYNC_CALLBACK");return window[t]=function(r,n){if(delete window[t],androidBridge)try{var o=JSON.parse(r);r=o.status,n=o.data}catch(e){throw Error("bridge failed to parse android async data, "+r)}"object"!=typeof n||null===n||!r||r<200||r>=300?e():e(n)},t}function setupEventCallback(e){var t=picard.utils.random.name("PICARD_BRIDGE_EVENT_CALLBACK");return window[t]=function(t,r){if(androidBridge)try{r=JSON.parse(r)}catch(e){throw Error("bridge failed to parse android event data, "+r)}e(t,r)},t}function setupAndroidPoll(){window.addEventListener("keyup",(function(e){if(0===e.which)return performAndroidPoll(),!1}))}function performAndroidPoll(){var result=androidBridge.poll();if(result){var code=result+"";if(code){try{eval(code)}catch(e){window.console&&window.console.error&&window.console.error("android poll failed to evaluate "+code+", "+e)}performAndroidPoll()}}}function setupIOSLogging(){picard._.onLog((function(e,t){try{makeBridgeCall(PLUGIN_LOG,{level:e,message:t})}catch(e){}}))}function bridgeFunctionCall(e,t,r){var n=makeBridgeCall(e,t,r);if(!n)throw Error("bridge call "+e+" did not return");if(!n.status||n.status<200||n.status>=300)throw Error("bridge call "+e+" did not complete successfully, "+n.status);if("object"!=typeof n.data)throw TypeError("bridge call "+e+" did not return an object, "+n.data);return n.data}function setupFunction(e){return function(t,r){return bridgeFunctionCall(e,t,r)}}function setupFunctions(e,t,r){if(!Array.isArray(t))throw TypeError("functions "+t+" must be an array");void 0===r&&(r={}),t.forEach((function(t){if("string"!=typeof t)throw TypeError("function "+t+" must be a string");r[t]=setupFunction(e+"."+t)}))}function setupPlugin(e){var t=picard.events(),r=makeBridgeCall(PLUGIN_REQUEST_NAME,{name:e,eventCallback:setupEventCallback(t.trigger)});if(200!==r.status)throw TypeError("plugin "+e+" failed to initialize");return setupFunctions(e,r.data.functions,t),t}function bridge(e){if("string"!=typeof e)throw TypeError("plugin name must be a string, got "+e);if(!plugins[e]){var t=setupPlugin(e);plugins[e]=t}return plugins[e]}function batchRequest(e){if(!Array.isArray(e))throw TypeError("batch calls must be an array, got "+e);if(e.forEach((function(e){if("object"!=typeof e)throw TypeError("batch call must be an object, got "+e);if("string"!=typeof e.name)throw TypeError("batch call name must be a string, got "+e.name);switch(typeof e.args){case"undefined":case"object":break;default:throw TypeError("batch call args must be an object if defined, got "+e.args)}switch(typeof e.callback){case"function":case"undefined":break;default:throw TypeError("batch call callback must be a function if defined, got "+e.callback)}})),androidBridge)return e.map((function(e){try{return-1===e.name.indexOf(".")?bridge(e.name):bridgeFunctionCall(e.name,e.args,e.callback)}catch(e){}}));var t=[],r=new Array(e.length);return e.forEach((function(e,n){-1===e.name.indexOf(".")?plugins[e.name]?r[n]=plugins[e.name]:t.push(generatePluginBatchSegment(e,(function(e){r[n]=e}))):t.push(generateBatchSegment(e,(function(e){r[n]=e})))})),sendBatchIFrameSignal(t),r}function generateBatchSegment(e,t){var r,n=JSON.stringify(e.args);e.callback&&(r=setupAsyncCallback(e.callback));var o=picard.utils.random.name("PICARD_BRIDGE_CALLBACK");return setTimeout((function(){delete window[o]}),0),window[o]=function(e,n){delete window[o],r&&202!==e&&delete window[r],e>=200&&e<300&&t(n)},BRIDGE_SIGNAL_URL+e.name+"/"+o+"?args="+encodeURIComponent(n)+"&async="+(r||"")}function generatePluginBatchSegment(e,t){var r=picard.events(),n=JSON.stringify({name:e.name,eventCallback:setupEventCallback(r.trigger)}),o=picard.utils.random.name("PICARD_BRIDGE_CALLBACK");return setTimeout((function(){delete window[o]}),0),window[o]=function(n,i){delete window[o],200===n&&(setupFunctions(e.name,i.functions,r),plugins[e.name]=r,t(r))},BRIDGE_SIGNAL_URL+PLUGIN_REQUEST_NAME+"/"+o+"?args="+encodeURIComponent(n)+"&async="}function redirectToCards(){var e=picard.utils.platform.os,t=picard.utils.url;if(t.query.kikme&&(e.ios||e.android))try{var r=document.createElement("iframe");r.src="card"+t.updateQuery({kikme:null}).substr(4),r.style.display="none";var n=function(){try{document.documentElement.removeChild(r)}catch(e){}};r.onload=n,r.onerror=n,setTimeout(n,1e3),document.documentElement.appendChild(r)}catch(e){}}function main(){var e=getBridge();e?(picard._.bridge=bridge,picard._.bridge.batch=batchRequest,androidBridge?(setupAndroidPoll(),picard._.bridge.forceAndroidPoll=performAndroidPoll):setupIOSLogging(),picard.enabled=!0,bridge.info=e,bridge.version=e.version,picard.utils.platform.browser.name="cards",picard.utils.platform.browser.cards=!0,picard.utils.platform.browser.version=window.parseFloat(bridge.version),picard.utils.platform.browser.versionString=bridge.version):redirectToCards()}main()}(window,document,cards),function(e,t){var r;function n(e,t){e.style["-webkit-transform"]=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,e.style["-o-transform"]=t,e.style.transform=t}function o(e,t){t?(e.style["-webkit-transition"]="-webkit-"+t,e.style["-moz-transition"]="-moz-"+t,e.style["-ms-transition"]="-ms-"+t,e.style["-o-transition"]="-o-"+t,e.style.transition=t):(e.style["-webkit-transition"]="",e.style["-moz-transition"]="",e.style["-ms-transition"]="",e.style["-o-transition"]="",e.style.transition="")}(function(){var r=!0;t.enabled&&t.utils.platform.os.android?Array.prototype.forEach.call(e.getElementsByTagName("meta"),(function(e){"kik-transform-fix"===e.name&&"false"===e.content&&(r=!1)})):r=!1;return r})()&&(n(r=e.documentElement,"translate3d(0,0,0)"),setTimeout((function(){o(r,"transform 10ms linear"),setTimeout((function(){n(r,"translate3d(0,0,1px)"),setTimeout((function(){o(r,""),setTimeout((function(){n(r,"")}),0)}),10)}),0)}),0))}(document,cards),function(){try{var e=document.querySelector('meta[name="viewport"]');cards.enabled&&e&&/\bipad\b/i.test(navigator.userAgent)&&e.setAttribute("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}catch(e){}}(),function(e,t,r){cards._.bridge&&(e.alert=function(){},e.confirm=function(){},e.prompt=function(){})}(window,document),function(e,t,r){var n=r.utils.platform.os,o=r.utils.platform.browser;e.navigator&&o.cards&&o.version<6.7&&n.android&&(e.navigator.geolocation=void 0)}(window,document,cards),function(e){var t={};if(e._.firstBatch=t,e._.bridge&&e.utils.platform.os.ios&&!(e.utils.platform.browser.version<6.5)){var r=[{name:"Metrics"},{name:"Browser"},{name:"Media"},{name:"Kik"},{name:"Profile"},{name:"UserData"},{name:"Auth"},{name:"Photo"},{name:"Keyboard"},{name:"Push"},{name:"Picker"}],n=[{name:"Browser.getLastLinkData",args:{}},{name:"Browser.isPopupMode",args:{}},{name:"Kik.getLastMessage",args:{}},{name:"Push.getNotificationList",args:{}},{name:"Picker.getRequest",args:{}}];e._.bridge.batch(r.concat(n)).slice(r.length).forEach((function(r,o){t[n[o].name]=r,r&&(e._.secondBatch||(e._.secondBatch=[]))}))}}(cards),function(e,t){var r;try{r=t._.bridge("Metrics")}catch(e){}var n=t.events(),o=[];t.metrics=n,n.loadTime=null,n.coverTime=null,r&&r.on("loadData",(function(e){"number"==typeof e.loadTime&&(n.loadTime=e.loadTime,n.trigger("loadTime",e.loadTime)),"number"==typeof e.coverTime&&(n.coverTime=e.coverTime,n.trigger("coverTime",e.coverTime))}));var i=!1;function a(t,r,n,i){if("string"!=typeof t)throw TypeError("event category must be a string, got "+t);if("string"!=typeof r)throw TypeError("event name must be a string, got "+r);switch(typeof n){case"string":break;case"number":i=n;default:n=""}switch(typeof i){case"number":i=Math.floor(i);break;default:i=0}o?o.push([t,r,n,i]):"function"==typeof e.ga?e.ga("send","event",t,r,n,i):(e._gaq||(e._gaq=[]),"function"==typeof e._gaq.push&&e._gaq.push(["_trackEvent",t,r,n,i,!0]))}function s(e,t,r){a("Cards",e,t,r)}function c(e){n[e]?s(e,n[e]):n.once(e,(function(){s(e,n[e])}))}n.enableGoogleAnalytics=function(n,u,l){if(i)return;i=!0,n&&(l?function(r){if("string"!=typeof r)throw TypeError("google analytics ID must be a string, got "+r);var n=e._gaq=[];n.push(["_setAccount",r]),n.push(["_trackPageview"]),t.ready((function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.id="ga",e.src="//www.google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}))}(n):function(r,n){if("string"!=typeof r)throw TypeError("google analytics ID must be a string, got "+r);if("string"!=typeof n)throw TypeError("google analytics host must be a string, got "+n);e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,t.ready((function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.async=1,e.src="//www.google-analytics.com/analytics.js",t.parentNode.insertBefore(e,t)})),e.ga("create",r,n),e.ga("send","pageview")}(n,u));!function(){e.addEventListener("error",(function(t){var r=t.message||"";r+=" ("+(t.filename||e.location.href),t.lineno&&(r+=":"+t.lineno),s("error",r+=")")}),!1),"object"==typeof App&&"function"==typeof App.enableGoogleAnalytics&&App.enableGoogleAnalytics();r&&(c("loadTime"),c("coverTime"));var t=o.slice();o=null,t.forEach((function(e){a(e[0],e[1],e[2],e[3])}))}()},n.event=a,n._cardsEvent=s}(window,cards),function(e,t,r){function n(t,r){var n=e.applicationCache,o=!1;if(n&&n.addEventListener&&n.swapCache&&n.update)if(n.status!==n.UPDATEREADY)if(n.status===n.IDLE||n.status===n.CHECKING||n.status===n.DOWNLOADING){if(n.addEventListener("noupdate",(function(){if(o)return;o=!0,!t&&e.console&&e.console.log&&(e.console.log("refresh requested but no update to manifest found"),e.console.log("** update your manifest to see changes reflected"));setTimeout((function(){r(!0)}),1e3)}),!1),n.addEventListener("updateready",i,!1),n.addEventListener("error",i,!1),n.addEventListener("obsolete",i,!1),setTimeout(i,3e4),n.status===n.IDLE)try{n.update()}catch(e){i()}}else r(!1);else i();else r(!1);function i(){if(!o){o=!0;var e=!1;if(n.status===n.UPDATEREADY)try{n.swapCache(),e=!0}catch(e){}r(e)}}}function o(){try{e.ZERVER_KILL_STREAM()}catch(e){}}function i(e){if("string"==typeof e){var t;e=decodeURIComponent(e);try{t=JSON.parse(e)}catch(e){}return"object"==typeof t&&null!==t?t:e||void 0}}var a;r.utils.platform.os.ios&&setTimeout((function(){n(!0,(function(e){}))}),5e3),e.ZERVER_REFRESH=function(){o(),n(!0,(function(){e.location.reload()}))},e.location.hash&&(r.linkData=i(e.location.hash.substr(1)));try{a=r._.bridge("Browser")}catch(e){return}var s=r.events();if(r.browser=s,a.setCardInfo){var c,u,l,d,f,p,h=/(^|\s)icon(\s|$)/i;Array.prototype.forEach.call(t.getElementsByTagName("link"),(function(e){h.test(e.rel)?c=e.href:"kik-icon"===e.rel?l=e.href:"kik-icon-fallback"===e.rel?u=e.href:"kik-tray-icon"===e.rel?d=e.href:"privacy"===e.rel?f=e.href:"terms"===e.rel&&(p=e.href)}));var m={title:t.title,icon:u||l||d||c,squareIcon:l||d||u||c,mediaTrayIcon:l||d||u||c,privacy:f,terms:p};cards._.secondBatch?cards._.secondBatch.push({name:"Browser.setCardInfo",args:m}):a.setCardInfo(m)}a.pageLoaded&&r.utils.windowReady((function(){if(t.body)t.body.offsetWidth;setTimeout((function(){a.pageLoaded()}),1)})),e.addEventListener("unload",(function(){try{a.navigationAttempted()}catch(e){}}),!1);var g,y=!0;if(a.setStatusBarVisible){var b=!1;s.statusBar=function(e){b=!0,a.setStatusBarVisible({visible:!!e}),y=!!e}}if(a.setStatusBarTransparent&&(s.statusBarTransparent=function(e){var t;"black"===e?t=!1:e&&(t=!0);try{if(a.setStatusBarTransparent({transparent:!!e,light:t}))return!0}catch(e){}return!1},Array.prototype.forEach.call(t.getElementsByTagName("meta"),(function(e){"kik-transparent-statusbar"===e.name&&(g=(e.content||"").trim())})),g&&"false"!==g&&s.statusBarTransparent(g))){e.APP_ENABLE_IOS_STATUSBAR=!0;try{"function"==typeof App._enableIOSStatusBar&&App._enableIOSStatusBar()}catch(e){}}a.getOrientationLock&&a.setOrientationLock&&(s.getOrientationLock=function(){var e=a.getOrientationLock().position;return"free"===e?null:e},s.setOrientationLock=function(e){switch(e){case"free":case"portrait":case"landscape":break;default:if(!e){e="free";break}throw TypeError("if defined, position "+e+' must be one of "free", "portrait", or "landscape"')}try{return a.setOrientationLock({position:e}),!b&&a.setStatusBarVisible&&y!==("landscape"!==e)&&(a.setStatusBarVisible({visible:"landscape"!==e}),y="landscape"!==e),!0}catch(e){return!1}}),a.on("orientationChanged",(function(){try{e.App._layout()}catch(e){}})),a.setBacklightTimeoutEnabled&&(s.backlightTimeout=function(e){a.setBacklightTimeoutEnabled({enabled:!!e})}),a.forceRepaint&&(s.paint=function(){if(t.body)t.body.offsetWidth;a.forceRepaint()});var v=[];s.back=function(e){if("function"!=typeof e)throw TypeError("back handler "+e+" must be a function");v.push(e)},s.unbindBack=function(e){if("function"!=typeof e)throw TypeError("back handler "+e+" must be a function");for(var t=v.length;t--;)v[t]===e&&v.splice(t,1)},a.on("back",(function(e){for(var t=!1,n=v.length;n--;)try{if(!1===v[n]()){t=!0;break}}catch(e){r.utils.error(e)}a.handleBack({requestToken:e.requestToken,override:t})})),s.back((function(){if(e.App&&"function"==typeof e.App.back)try{if(!1!==App.back())return!1}catch(e){}})),a.refresh&&a.refreshPlanned&&(s.refresh=function(){var t=e.applicationCache;o(),t&&t.status!==t.UNCACHED?n(!1,(function(e){a.refresh({withCache:!0})})):a.refresh({withCache:!1})},a.on("refresh",(function(){setTimeout((function(){a.refreshPlanned(),s.refresh()}),0)})),e.ZERVER_REFRESH=function(){s.refresh()}),a.openCard&&a.openExternal&&(s.open=function(e,t,r){if("string"!=typeof e)throw TypeError("url "+e+" must be a string");switch(typeof t){case"undefined":case"string":break;case"object":t=JSON.stringify(t);break;default:throw TypeError("card linkData must be a string or JSON if defined, got "+t)}switch(typeof r){case"undefined":r={};break;case"object":break;default:throw TypeError("card data must be an object if defined, got "+r)}var n="card://"===e.substr(0,7),o="cards://"===e.substr(0,8);n||o?(e="http"+e.substr(4),t&&(e=e.split("#")[0]+"#"+encodeURIComponent(t)),a.openCard({url:e,title:r.title||void 0,icon:r.icon||void 0,clearHistory:!!r.clearHistory})):a.openExternal({url:e})});var w=!1;if(Array.prototype.forEach.call(t.getElementsByTagName("meta"),(function(e){"kik-https"===e.name&&(w=e.content)})),w===e.location.host)if("https:"===e.location.protocol)try{a.performHttpsUpgradeCleanup()}catch(e){}else try{a.openCard({url:e.location.href.split("#")[0].replace(/^http\:/,"https:"),title:t.title,icon:icon,clearHistory:!0})}catch(e){}function E(e,t){s.linkData=i(e&&e.data),r.linkData=s.linkData,!1!==t&&s.linkData&&s.trigger("linkData",s.linkData)}s._processLinkData=E,a.getLastLinkData&&E(cards._.firstBatch["Browser.getLastLinkData"]||a.getLastLinkData(),!1),a.on("linkData",E);var k=!0,T=!1,A=!0;function _(){var e=k;k=T||A,s.background=k,e!==k&&s.trigger(k?"background":"foreground")}s.background=k,a.on("pause",(function(e){T=!0,_()})),a.on("unpause",(function(e){T=!1,_()})),a.on("conceal",(function(e){A=!0,_()})),a.on("reveal",(function(e){A=!1,_()}))}(window,document,cards),function(e,t,r){var n,o;try{n=r._.bridge("Media")}catch(e){}function i(e){if(cards._.secondBatch)cards._.secondBatch.push({name:"Media."+(e?"":"un")+"setMediaCategory",args:{}});else try{e?n.setMediaCategory():n.unsetMediaCategory()}catch(e){}}n&&n.setMediaCategory&&n.unsetMediaCategory?(r._mediaEnabled=i,o=!1,Array.prototype.forEach.call(t.getElementsByTagName("meta"),(function(e){"kik-media-enabled"===e.name&&"true"===e.content&&(o=!0)})),i(o)):r._mediaEnabled=function(){}}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Kik")}catch(e){return}var o=r.events();function i(e){if("object"!=typeof e)throw TypeError("message "+e+" must be an object");switch(typeof e.big){case"undefined":case"boolean":break;default:throw TypeError("message size (big) "+e.big+" must be a boolean if defined")}switch(typeof e.title){case"undefined":case"string":if(!e.big&&!e.title)throw TypeError("message title must be a string");e.title=e.title||"";break;default:throw TypeError("message title "+e.title+" must be a string")}switch(typeof e.text){case"string":case"undefined":break;default:throw TypeError("message text "+e.text+" must be a string")}switch(typeof e.pic){case"undefined":case"string":break;default:throw TypeError("message pic "+e.pic+" must be a string if defined")}switch(typeof e.noForward){case"undefined":case"boolean":break;default:throw TypeError("message noForward flag must be a boolean if defined, got "+e.noForward)}switch(typeof e.fallback){case"undefined":case"string":break;default:throw TypeError("message fallback URL must be a string if defined, got "+e.fallback)}switch(typeof e.linkData){case"undefined":case"string":break;case"object":try{t=JSON.stringify(e.linkData)}catch(t){throw TypeError("message linkData must be a string or JSON if defined, got "+e.linkData)}break;default:throw TypeError("message linkData must be a string or JSON if defined, got "+e.linkData)}var t,n,o=t||e.linkData;switch("string"==typeof o&&(o=encodeURIComponent(o)),typeof e.data){case"object":if(null!==e.data)try{t=JSON.stringify(e.data)}catch(t){throw TypeError("message data must be a json object if defined, got "+e.data)}case"undefined":break;default:throw TypeError("message data must be a json object if defined, got "+e.data)}return"object"==typeof e.data&&null!==e.data&&e.data.id&&(n=e.data.id+""),cards.metrics._cardsEvent("kikSend",n),{title:e.title,text:e.text,image:e.pic,forwardable:!e.noForward,fallbackUrl:e.fallback,layout:e.big?"photo":"article",extras:{sender:r._.id,dataID:n,messageID:r.utils.random.uuid(),linkData:o||"",jsonData:t||""}}}r.kik=o,o._formatMessage=i,o.send=function(e,t){"string"!=typeof e&&(t=e,e=void 0),(t=i(t)).targetUser=e,e&&n.sendKikToUser?n.sendKikToUser(t):n.sendKik(t)};var a=r.events.handlers();function s(e,t){if(function(){if(!n.openConversation)return;o.returnToConversation=function(e){o.returnToConversation=null,e?((e=i(e)).returnToSender=!0,n.sendKik(e)):n.openConversation({returnToSender:!0})}}(),e.extras.sender&&e.extras.sender===r._.id||cards.metrics._cardsEvent("kikReceive",e.extras.dataID),e.extras.jsonData){var s;try{s=JSON.parse(e.extras.jsonData)}catch(e){}"object"==typeof s&&null!==s&&(o.message=s,a.trigger(s),o.trigger("message",s))}e.extras&&e.extras.linkData&&r.browser&&r.browser._processLinkData&&r.browser._processLinkData({data:e.extras.linkData},t)}if(o.handler=function(e){return a.handler(e)},n.getLastMessage){var c=cards._.firstBatch["Kik.getLastMessage"]||n.getLastMessage();c&&c.message&&s(c.message,!1)}n.on("message",s),n.openConversationWithUser&&(o.openConversation=function(e,t){n.openConversationWithUser({username:e},(function(e){t&&t(e)}))})}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Profile")}catch(e){return}var o=r.kik;o||(o=r.events(),r.kik=o),n.openProfile&&(o.showProfile=function(e){if("string"!=typeof e)throw TypeError("username must be a string, got "+e);try{n.openProfile({username:e})}catch(e){}})}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("UserData")}catch(e){return}var o,i=r.kik;function a(e){if(e){e.fullName=e.displayName||"";var t=e.fullName.indexOf(" ");return-1===t?(e.firstName=e.fullName,e.lastName=""):(e.firstName=e.fullName.substr(0,t),e.lastName=e.fullName.substr(t+1)),delete e.displayName,e.pic=s(e.pic),e.thumbnail=s(e.thumbnail),e}}function s(e){return"string"!=typeof e?e:"//d33vud085sp3wg.cloudfront.net"+e.replace(/^https?\:\/\/[^\/]*/,"")}i||(i=r.events(),r.kik=i),n.getUserData&&(i.getUser=function(e){switch(typeof e){case"undefined":e=function(){};case"function":break;default:throw TypeError("callback must be a function if defined, got "+e)}if(o)e(o);else{var t=i.hasPermission(),s=r.utils.platform.os;n.getUserData({fields:["profile"]},(function(r){var n=a(r&&r.userData);n&&(o=n,t||i.trigger("permission")),s.ios&&!t?setTimeout((function(){e(n)}),600):e(n)}))}}),i.hasPermission=function(){try{return!!n.checkPermissions({fields:["profile"]}).permitted}catch(e){return!1}},(n.pickUsers||n.pickFilteredUsers)&&(i.pickUsers=function(e,t){switch(typeof e){case"function":t=e;case"undefined":e={};case"object":break;default:throw TypeError("options must be an object if defined, got "+e)}if("function"!=typeof t)throw TypeError("callback must be a function, got "+t);switch(typeof e.preselected){case"undefined":e.preselected=[];break;default:if(!Array.isArray(e.preselected))throw TypeError("preselected users must be an array of users if defined, got "+e.preselected);e.preselected.forEach((function(e){if("object"!=typeof e)throw TypeError("user must be an object, got "+e);if("string"!=typeof e.username)throw TypeError("user.username must be a string, got "+e.username)}));break}switch(typeof e.filtered){case"undefined":e.filtered=[];break;default:if(!Array.isArray(e.filtered))throw TypeError("filtered users must be an array of users if defined, got "+e.filtered);e.filtered=e.filtered.map((function(e){switch(typeof e){case"string":return e;case"object":if(null!==e&&"string"==typeof e.username)return e.username;default:throw TypeError("filtered user didnt have a username, got "+e)}}));break}switch(typeof e.filterSelf){case"undefined":e.filterSelf=!0;case"boolean":break;default:throw TypeError("filterSelf must be a boolean if defined, got "+e.filterSelf)}switch(typeof e.minResults){case"undefined":break;case"number":if(e.minResults<0)throw TypeError("minResults must be non-negative if defined, got "+e.minResults);break;default:throw TypeError("minResults must be a number if defined, got "+e.minResults)}switch(typeof e.maxResults){case"undefined":break;case"number":if(e.maxResults<1)throw TypeError("maxResults must be greater than 1 if defined, got "+e.maxResults);break;default:throw TypeError("maxResults must be a number if defined, got "+e.maxResults)}switch(typeof t){case"undefined":t=function(){};break;case"function":break;default:throw TypeError("callback must be a function if defined, got "+t)}if(e.preselected.length&&e.filtered.length)throw TypeError("can only preselect or filter users, not both");n.pickFilteredUsers&&!e.preselected.length?function(e,t){e.minResults=e.minResults||1,n.pickFilteredUsers({minResults:e.minResults,maxResults:e.maxResults,filtered:e.filtered,filterSelf:e.filterSelf},(function(r){if(r&&r.userDataList){var n=r.userDataList.map(a);e.filtered&&(n=n.filter((function(t){return-1===e.filtered.indexOf(t.username)}))),t(n)}else t()}))}(e,t):function(e,t){var o=!1;e.preselected&&e.preselected.length||(e.minResults=e.minResults||1);var i={},s=[];e.preselected.forEach((function(e){i[e.username]=e,s.push(e.username)})),n.pickUsers({minResults:e.minResults,maxResults:e.maxResults,preselected:s,filterSelf:e.filterSelf},(function(r){if(!o){if(!r||!r.userDataList)return o=!0,void t();var n=r.userDataList.map((function(e){return e.username in i?i[e.username]:a(e)}));e.filtered&&(n=n.filter((function(t){return-1===e.filtered.indexOf(t.username)}))),o=!0,t(n)}}));var c=r.utils.platform.os,u=r.utils.platform.browser;c.ios&&u.cards&&u.version<6.5&&r.browser.once("foreground",(function(){setTimeout((function(){o||(o=!0,t())}),0)}))}(e,t)})}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Auth")}catch(e){}if(n&&n.signRequest){var o=r.kik;o||(o=r.events(),r.kik=o),o.sign=function(e,t,n){if("string"!=typeof e)throw TypeError("data to be signed must be a string, got "+e);if("function"!=typeof t)throw TypeError("callback must be a function, got "+t);n=!!n;var o=r.utils.platform.os,a=r.utils.platform.browser;o.android&&a.version<6.5?r.ready((function(){i(e,t,n)})):i(e,t,n)},n.getAnonymousId&&(o.getAnonymousUser=function(e){n.getAnonymousId((function(t){t&&t.anonymousId?e(t.anonymousId):e()}))}),n.signAnonymousRequest&&(o.anonymousSign=function(e,t){if("string"!=typeof e)throw TypeError("data to be signed must be a string, got "+e);if("function"!=typeof t)throw TypeError("callback must be a function, got "+t);n.signAnonymousRequest({request:e},(function(e){e&&e.signedRequest?t(e.signedRequest,e.anonymousId,e.host):t()}))})}function i(t,r,i){var a=o.hasPermission();n.signRequest({request:t,skipPrompt:i},(function(t){if(t&&t.signedRequest){a||o.trigger("permission");var n=t.host||e.location.host;r(t.signedRequest,t.username,n)}else r()}))}}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Photo")}catch(e){return}var o=r.events();function i(e,t){switch(typeof t){case"undefined":case"function":break;default:throw TypeError(e+" must be a function if defined, got "+t)}}function a(e,t,r,n){switch(typeof t){case"undefined":break;case"number":if(t<r||t>n)throw TypeError(e+" must be within "+r+" and "+n+" if defined, got "+t);break;default:throw TypeError(e+" must be a number if defined, got "+t)}}function s(e,t,o){switch("string"!=typeof e&&(o=t,t=e,e=void 0),typeof t){case"function":o=t,t={};case"object":break;default:throw TypeError("options must be an object, got "+t)}i("callback",o),i("onCancel",t.onCancel),i("onSelect",t.onSelect),i("onPhoto",t.onPhoto),i("onComplete",t.onComplete),a("quality",t.quality,0,1),a("minResults",t.minResults,0,25),a("maxResults",t.maxResults,1,25),a("maxHeight",t.maxHeight,0,1280),a("maxWidth",t.maxWidth,0,1280);var s,c,u=t.onSelect,l=t.onCancel,d=t.onPhoto,f=t.onComplete,p=!1,h=r.utils.platform.os,m=r.utils.platform.browser;function g(e){if(e){var t=s.indexOf(e.id);if(-1!==t){e.url=e.url||null,s[t]=null,c[t]=e.url;for(var r=0,i=0,a=s.length;i<a;i++)null!==s[i]&&r++;y(d,e.url,t),0===r&&(n.off("photo",g),y(f,c),y(o,c))}}}function y(e,t,n){if(e)try{e(t,n)}catch(e){r.utils.error(e)}}0===t.minResults&&(t.minResults=1),n.getPhoto({source:e,quality:t.quality,minResults:t.minResults,maxResults:t.maxResults,maxHeight:t.maxHeight,maxWidth:t.maxWidth,autoSave:t.saveToGallery},(function(e){if(p)return;p=!0;var t=(s=e&&e.photoIds)&&s.length;if(!t)return y(l),void y(o);y(u,t),c=new Array(t),n.on("photo",g)})),h.android&&m.version<6.7&&r.browser.once("foreground",(function(){setTimeout((function(){p||(p=!0,y(l),y(o))}),0)}))}r.photo=o,n.getPhoto&&(o.get=function(e,t){s(e,t)},o.getFromCamera=function(e,t){s("camera",e,t)},o.getFromGallery=function(e,t){s("gallery",e,t)}),n.savePhoto&&(o.saveToGallery=function(e,t){switch(typeof t){case"undefined":t=function(){};case"function":break;default:throw TypeError("callback must be a function, got "+t)}try{n.savePhoto({url:e},(function(e){r(!!e)}))}catch(e){r(!1)}function r(e){r=function(){},t(e)}})}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Keyboard")}catch(e){}var o=r.utils.platform.browser;function i(e){if(r._.secondBatch)r._.secondBatch.push({name:"Keyboard.setFormNavigationEnabled",args:{enabled:e}});else try{n.setFormNavigationEnabled({enabled:e})}catch(e){}}!function(){var e;if(Array.prototype.forEach.call(t.getElementsByTagName("meta"),(function(t){"kik-hide-form-helpers"===t.name&&(e=(t.content||"").trim())})),"true"!==e)return;o.cards&&o.version<=6.5?r.ready((function(){i(!1)})):i(!1)}(),r.formHelpers={show:function(){i(!0)},hide:function(){i(!1)},isEnabled:function(){try{return!!n.isFormNavigationEnabled().enabled}catch(e){return!!r.utils.platform.os.ios}}}}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Picker")}catch(e){return}if(n.startRequest){var o=r.events((function(e,t,r){if("string"!=typeof e)throw TypeError("picker url must be a string, got "+e);switch(typeof t){case"function":r=t;case"undefined":t={};case"object":break;default:throw TypeError("picker options must be an object if defined, got "+t)}if("function"!=typeof r)throw TypeError("picker callback must be a function, got "+r);n.startRequest({requestUrl:e,requestData:t},(function(e){r(e&&e.responseData)}))}));if(r.picker=o,n.getRequest&&n.completeRequest){var i,a;try{i=(r._.secondBatch?r._.firstBatch["Picker.getRequest"]:n.getRequest()).requestData}catch(e){}i&&t.referrer&&(a=!(!i||!i.kik||"https://kik.com/"!==t.referrer.split("?")[0]),o.url=t.referrer,o.data=i,o.fromKik=a,o.reply=function(e){a&&e&&(e=r.kik._formatMessage(e));try{n.completeRequest({responseData:e})}catch(e){}},o.cancel=function(){try{n.cancelRequest()}catch(e){}o.isPopup||(o.url=void 0,o.data=void 0,o.reply=void 0,o.cancel=void 0,o.trigger("cancel"))})}try{r._.firstBatch&&r._.firstBatch["Browser.isPopupMode"]?o.isPopup=r._.firstBatch["Browser.isPopupMode"].popup:o.isPopup=r._.bridge("Browser").isPopupMode().popup}catch(e){o.isPopup=!1}}}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("Push")}catch(e){return}var o=r.events();if(r.push=o,n.setBadgeVisibility&&(o.badge=function(e){n.setBadgeVisibility({visible:!!e,blue:!0}),o.trigger("badge",!!e)}),n.getPushToken&&(o.getToken=function(e){if("function"!=typeof e)throw TypeError("callback must be a function, got "+e);n.getPushToken((function(t){e(t&&t.token)}))}),n.getNotificationList){var i=r.events.handlers(),a=function(){var e;try{e=r._.firstBatch&&r._.firstBatch["Push.getNotificationList"]?r._.firstBatch["Push.getNotificationList"]:n.getNotificationList()}catch(e){}var t=r.picker&&r.picker.isPopup,a=!0;if(t)o.once("badge",(function(){a=!1}));else{a=!1;try{n.setBadgeVisibility({visible:!1}),o.trigger("badge",!1)}catch(e){}}var s=[];if(e&&e.notifications)for(var c=0,u=e.notifications.length;c<u;c++)if("object"==typeof e.notifications[c])switch(typeof e.notifications[c].data){case"object":s.push(e.notifications[c].data);break;case"string":try{var l=JSON.parse(e.notifications[c].data);"object"==typeof l&&s.push(l)}catch(e){}break;default:break}if(s.length?(i.triggerMulti(s),s.forEach((function(e){o.trigger("push",e)}))):a=!1,a)try{n.setBadgeVisibility({visible:!0,blue:!0}),o.trigger("badge",!0)}catch(e){}};o.handler=function(e){return i.handler(e)},n.on("notificationReceived",(function(){var e=r.utils.platform;e.os.ios&&e.browser.version<6.4?setTimeout(a,0):a()})),a()}}(window,document,cards),function(e,t,r){var n;try{n=r._.bridge("IAP")}catch(e){return}if(n.purchase&&n.markTransactionStored&&n.getTransactionList){var o=r.events((function(e,t,r,i){switch(typeof e){case"object":if(null===e)throw TypeError("SKU must be a string, got "+e);if("string"!=typeof e.sku)throw TypeError("SKU must be a string, got "+e.sku);e=e.sku;case"string":break;default:throw TypeError("SKU must be a string, got "+e)}if(-1===o.items.map((function(e){return e.sku})).indexOf(e))throw TypeError("SKU not available, got "+e);switch(typeof t){case"boolean":r=t,t=void 0;case"function":i=r,r=t;case"undefined":t={};case"object":break;default:throw TypeError("purchase data must be a JSON object if defined, got "+t)}switch(typeof r){case"boolean":i=r;case"undefined":r=function(){};case"function":break;default:throw TypeError("purchase callback must be a function if defined, got "+r)}switch(typeof i){case"undefined":i=!1;case"boolean":break;default:throw TypeError("skipPrompt must be a boolean if defined, got "+i)}n.purchase({sku:e,data:t,skipPrompt:i},(function(e){e?e.transaction?(o.pending.push(e.transaction),r(e.transaction)):r():r(void 0,!0)}))}));o.init=function(t,r){"string"==typeof arguments[0]&&(t=Array.prototype.slice.call(arguments));if(!Array.isArray(t))throw TypeError("list of SKUs must be an array");if(t.forEach((function(e){if("string"!=typeof e)throw TypeError("SKU must be a string, got "+e)})),"function"==typeof r)if(n.getAvailableItemsAsynchronously)n.getAvailableItemsAsynchronously({skus:t},s);else{try{a=n.getAvailableItems({skus:t})}catch(e){}s(a)}else if(n.getAvailableItems){var a;try{a=n.getAvailableItems({skus:t})}catch(e){}s(a)}else s();function s(a){var s,c;try{s=a.items}catch(e){}s&&Array.isArray(s)||(s=[]);try{c=n.getTransactionList({skus:t}).transactions}catch(e){c=[]}c.forEach((function(t){if(!t.sku)try{t.sku=JSON.parse(e.atob(t.content.split(".")[1])).item.sku}catch(e){}})),o.init=null,o.complete=i,o.items=s,o.pending=c,"function"==typeof r&&r()}},r.purchase=o}function i(e){if("string"!=typeof e)throw TypeError("transactionId must be a string, got "+e);n.markTransactionStored({transactionId:e});for(var t=o.pending.length;t--;)o.pending[t].transactionId===e&&o.pending.splice(t,1)}}(window,document,cards),function(e,t,r){var n,o;n=r.utils.platform.os,o=r.utils.platform.browser,n.ios&&o.cards&&o.version<6.5&&t.documentElement.addEventListener("click",(function(e){if(!e.defaultPrevented&&e.target&&"A"===e.target.nodeName&&e.target.href&&!e.target._clickable){var t=r.browser;if(t)return t.open(e.target.href),e.preventDefault(),!1}}))}(window,document,cards),function(e){delete e._.firstBatch,e._.secondBatch&&(e._.bridge.batch(e._.secondBatch),delete e._.secondBatch)}(cards),function(e,t,r){var n="kik-unsupported";function o(e){var t=-1,r=!1,n=!1;if(0===e.indexOf("android-")){if(n=!0,(t=parseFloat(e.replace("android-","")))>=2.3)return i(e)}else{if(0!==e.indexOf("ios-"))return i(e);if(r=!0,(t=parseFloat(e.replace("ios-","")))>=5)return i(e)}return{ios:r,android:n,version:t}}function i(t){return e.console&&e.console.error&&e.console.error('"'+t+'" is an unsupported value for the "'+n+'" meta tag'),!1}!function(){if(r.enabled)return;var e=r.utils.url;if(e.query._app_platform)return;var n="card"+e.updateQuery({kikme:null}).substr(4),o=!!e.query.kikme;o||Array.prototype.forEach.call(t.getElementsByTagName("meta"),(function(e){"kik-prefer"===e.name&&(e.content||"").trim()&&(o=!0)}));o&&r.ready((function(){r.open.card(n,void 0,!0)}))}(),function(){if(function(){var e,i=r.utils.platform.os;if(Array.prototype.forEach.call(t.getElementsByTagName("meta"),(function(t){t.name===n&&(e=(t.content||"").trim())})),!e)return!0;for(var a=!0,s=e.split(","),c=0,u=s.length;c<u;c++){var l=s[c].trim(),d=o(l);l&&d&&(d.ios&&i.ios?i.version<d.version+1&&(a=!1):d.android&&i.android&&i.version<=d.version&&(a=!1))}return a}())return;var i=r.utils.platform.os,a=t.documentElement;Array.prototype.forEach.call(a.childNodes,(function(e){a.removeChild(e)})),a.style["min-height"]="0",a.style["min-width"]="0",a.style.height="0",a.style.width="0",a.style.padding="0",a.style.border="none",a.style.margin="0",a.style.overflow="hidden";var s=t.createElement("head"),c=t.createElement("meta");c.name="viewport",c.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",s.appendChild(c),a.appendChild(s);var u=t.createElement("body");u.style.margin="0",u.style.padding="0";var l=t.createElement("div");l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="0",l.style.width="0",l.style.background="#31333B",l.style.zIndex="100000000000",l.style.fontFamily='"Helvetica Neue", Helvetica, Arial, sans-serif',i.android&&(l.style.fontFamily='"Roboto", sans-serif');var d=t.createElement("div");d.style.position="fixed",d.style.left="0",d.style.zIndex="100000000000";var f=t.createElement("div");f.style.backgroundImage="url('http://cdn.kik.com/cards/unsupported_icon.png')",f.style["background-size"]="100%",f.style.width="100px",f.style.height="100px",f.style.margin="0 auto";var p=t.createElement("div");p.style.color="#E0E0E0",p.style.padding="20px",p.style.textAlign="center",p.style.margin="0 auto",p.style.fontSize="16px",p.innerHTML="Oh no! This Card isn't supported on your phone.";var h=t.createElement("div");h.style.color="#979799",h.style.padding="0 20px",h.style.textAlign="center",h.style.margin="0 auto",h.innerHTML="This card is not available for your phone. But don't worry! You can still use the Kik Messenger you know and love :)",d.appendChild(f),d.appendChild(p),d.appendChild(h),l.appendChild(d),i.android&&i.version<2.3&&Array.prototype.forEach.call(a.childNodes,(function(e){a.removeChild(e)}));function m(){a.style.height=screen.height+"px",a.style.width=screen.width+"px",a.style["max-height"]=screen.height+"px",a.style["max-width"]=screen.width+"px",u.style.height=screen.height+"px",u.style.width=screen.width+"px",l.style.height=screen.height+"px",l.style.width=screen.width+"px",d.style.width=screen.width+"px",d.style.top=.15*screen.height+"px",p.style.width=.65*screen.width+"px",h.style.width=.65*screen.width+"px"}u.appendChild(l),a.appendChild(u),a.style["-webkit-user-select"]="none",a.style["user-select"]="none",a.style.background="#31333B",e.onorientationchange=function(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},setTimeout(m,50),a.addEventListener&&a.addEventListener("resize",m,!1);throw delete e.cards,TypeError("OS Version is not supported.")}()}(window,document,cards);