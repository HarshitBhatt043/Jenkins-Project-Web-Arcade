(function(t){function e(t,i){if({}.hasOwnProperty.call(e.cache,t))return e.cache[t];var r=e.resolve(t);if(!r)throw new Error("Failed to resolve module "+t);var s={id:t,require:e,filename:t,exports:{},loaded:!1,parent:i,children:[]};i&&i.children.push(s);var o=t.slice(0,t.lastIndexOf("/")+1);return e.cache[t]=s.exports,r.call(s.exports,s,s.exports,o,t),s.loaded=!0,e.cache[t]=s.exports}e.modules={},e.cache={},e.resolve=function(t){return{}.hasOwnProperty.call(e.modules,t)?e.modules[t]:void 0},e.define=function(t,i){e.modules[t]=i},e.define("/gif.worker.coffee",(function(t,i,r,s){var o,n;o=e("/GIFEncoder.js",t),n=function(t){var e,i,r,s;return e=new o(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.addFrame(t.data),t.last&&e.finish(),r=e.stream(),t.data=r.pages,t.cursor=r.cursor,t.pageSize=r.constructor.pageSize,t.canTransfer?(s=function(e){for(var r=0,s=t.data.length;r<s;++r)i=t.data[r],e.push(i.buffer);return e}.call(this,[]),self.postMessage(t,s)):self.postMessage(t)},self.onmessage=function(t){return n(t.data)}})),e.define("/GIFEncoder.js",(function(t,i,r,s){function o(){this.page=-1,this.pages=[],this.newPage()}function n(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.out=new o}var a=e("/TypedNeuQuant.js",t),h=e("/LZWEncoder.js",t);o.pageSize=4096,o.charMap={};for(var u=0;u<256;u++)o.charMap[u]=String.fromCharCode(u);o.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(o.pageSize),this.cursor=0},o.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<o.pageSize;i++)t+=o.charMap[this.pages[e][i]];return t},o.prototype.writeByte=function(t){this.cursor>=o.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},o.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},o.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;s<r;s++)this.writeByte(t[s])},n.prototype.setDelay=function(t){this.delay=Math.round(t/10)},n.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},n.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},n.prototype.setRepeat=function(t){this.repeat=t},n.prototype.setTransparent=function(t){this.transparent=t},n.prototype.addFrame=function(t){this.image=t,this.getImagePixels(),this.analyzePixels(),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.writePixels(),this.firstFrame=!1},n.prototype.finish=function(){this.out.writeByte(59)},n.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},n.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},n.prototype.analyzePixels=function(){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);var e=new a(this.pixels,this.sample);e.buildColormap(),this.colorTab=e.getColormap();for(var i=0,r=0;r<t;r++){var s=e.lookupRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[s]=!0,this.indexedPixels[r]=s}this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent))},n.prototype.findClosest=function(t){if(null===this.colorTab)return-1;for(var e=(16711680&t)>>16,i=(65280&t)>>8,r=255&t,s=0,o=16777216,n=this.colorTab.length,a=0;a<n;){var h=e-(255&this.colorTab[a++]),u=i-(255&this.colorTab[a++]),p=r-(255&this.colorTab[a]),l=h*h+u*u+p*p,f=parseInt(a/3);this.usedEntry[f]&&l<o&&(o=l,s=f),a++}return s},n.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,s=0;s<e;s++)for(var o=0;o<t;o++){var n=s*t*4+4*o;this.pixels[r++]=i[n],this.pixels[r++]=i[n+1],this.pixels[r++]=i[n+2]}},n.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},n.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},n.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},n.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},n.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},n.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},n.prototype.writePixels=function(){new h(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},n.prototype.stream=function(){return this.out},t.exports=n})),e.define("/LZWEncoder.js",(function(t,e,i,r){var s=-1,o=12,n=5003,a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=function(t,e,i,r){function h(t,e){S[g++]=t,g>=254&&f(e)}function u(t){p(n),F=m+2,A=!0,y(m,t)}function p(t){for(var e=0;e<t;++e)P[e]=-1}function l(t,e){var i,r,a,h,l,f,d;for(x=t,A=!1,n_bits=x,v=c(n_bits),B=(m=1<<t-1)+1,F=m+2,g=0,h=w(),d=0,i=n;i<65536;i*=2)++d;d=8-d,p(f=n),y(m,e);t:for(;(r=w())!=s;)if(i=(r<<o)+h,P[a=r<<d^h]!==i){if(P[a]>=0){l=f-a,0===a&&(l=1);do{if((a-=l)<0&&(a+=f),P[a]===i){h=I[a];continue t}}while(P[a]>=0)}y(h,e),h=r,F<1<<o?(I[a]=F++,P[a]=i):u(e)}else h=I[a];y(h,e),y(B,e)}function f(t){g>0&&(t.writeByte(g),t.writeBytes(S,0,g),g=0)}function c(t){return(1<<t)-1}function w(){return 0===remaining?s:(--remaining,255&i[curPixel++])}function y(t,e){for(d&=a[T],T>0?d|=t<<T:d=t,T+=n_bits;T>=8;)h(255&d,e),d>>=8,T-=8;if((F>v||A)&&(A?(v=c(n_bits=x),A=!1):(++n_bits,v=n_bits==o?1<<o:c(n_bits))),t==B){for(;T>0;)h(255&d,e),d>>=8,T-=8;f(e)}}var d,g,v,x,m,B,b=Math.max(2,r),S=new Uint8Array(256),P=new Int32Array(n),I=new Int32Array(n),T=0,F=0,A=!1;this.encode=function(i){i.writeByte(b),remaining=t*e,curPixel=0,l(b+1,i),i.writeByte(0)}}})),e.define("/TypedNeuQuant.js",(function(t,e,i,r){var s=100,o=256,n=o-1,a=4,h=16,u=1<<h,p=10,l=10,f=u>>l,c=u<<p-l,w=6,y=(o>>3)*(1<<w),d=30,g=1024,v=256,x=1<<18,m=499,B=491,b=487,S=503,P=3*S;t.exports=function(t,e){function i(t,e,i,r,s){T[e][0]-=t*(T[e][0]-i)/g,T[e][1]-=t*(T[e][1]-r)/g,T[e][2]-=t*(T[e][2]-s)/g}function r(t,e,i,r,s){for(var n,a,h=Math.abs(e-t),u=Math.min(e+t,o),p=e+1,l=e-1,f=1;p<u||l>h;)a=M[f++],p<u&&((n=T[p++])[0]-=a*(n[0]-i)/x,n[1]-=a*(n[1]-r)/x,n[2]-=a*(n[2]-s)/x),l>h&&((n=T[l--])[0]-=a*(n[0]-i)/x,n[1]-=a*(n[1]-r)/x,n[2]-=a*(n[2]-s)/x)}function I(t,e,i){var r,s,n,u,w,y=2147483647,d=y,g=-1,v=g;for(r=0;r<o;r++)s=T[r],(n=Math.abs(s[0]-t)+Math.abs(s[1]-e)+Math.abs(s[2]-i))<y&&(y=n,g=r),(u=n-(A[r]>>h-a))<d&&(d=u,v=r),w=E[r]>>l,E[r]-=w,A[r]+=w<<p;return E[g]+=f,A[g]-=c,v}var T,F,A,E,M;this.buildColormap=function(){(function(){var t,e;for(T=[],F=new Int32Array(256),A=new Int32Array(o),E=new Int32Array(o),M=new Int32Array(o>>3),t=0;t<o;t++)e=(t<<a+8)/o,T[t]=new Float64Array([e,e,e,0]),E[t]=u/o,A[t]=0})(),function(){var o,n,h=t.length,u=30+(e-1)/3,p=h/(3*e),l=~~(p/s),f=g,c=y,x=c>>w;for(x<=1&&(x=0),o=0;o<x;o++)M[o]=f*((x*x-o*o)*v/(x*x));h<P?(e=1,n=3):n=h%m!=0?3*m:h%B!=0?3*B:h%b!=0?3*b:3*S;var T,F,A,E,z=0;for(o=0;o<p;)if(i(f,E=I(T=(255&t[z])<<a,F=(255&t[z+1])<<a,A=(255&t[z+2])<<a),T,F,A),0!==x&&r(x,E,T,F,A),(z+=n)>=h&&(z-=h),0===l&&(l=1),++o%l==0)for(f-=f/u,(x=(c-=c/d)>>w)<=1&&(x=0),E=0;E<x;E++)M[E]=f*((x*x-E*E)*v/(x*x))}(),function(){for(var t=0;t<o;t++)T[t][0]>>=a,T[t][1]>>=a,T[t][2]>>=a,T[t][3]=t}(),function(){var t,e,i,r,s,a,h=0,u=0;for(t=0;t<o;t++){for(s=t,a=(i=T[t])[1],e=t+1;e<o;e++)(r=T[e])[1]<a&&(s=e,a=r[1]);if(r=T[s],t!=s&&(e=r[0],r[0]=i[0],i[0]=e,e=r[1],r[1]=i[1],i[1]=e,e=r[2],r[2]=i[2],i[2]=e,e=r[3],r[3]=i[3],i[3]=e),a!=h){for(F[h]=u+t>>1,e=h+1;e<a;e++)F[e]=t;h=a,u=t}}for(F[h]=u+n>>1,e=h+1;e<256;e++)F[e]=n}()},this.getColormap=function(){for(var t=[],e=[],i=0;i<o;i++)e[T[i][3]]=i;for(var r=0,s=0;s<o;s++){var n=e[s];t[r++]=T[n][0],t[r++]=T[n][1],t[r++]=T[n][2]}return t},this.lookupRGB=function(t,e,i){for(var r,s,n,a=1e3,h=-1,u=F[e],p=u-1;u<o||p>=0;)u<o&&((n=(s=T[u])[1]-e)>=a?u=o:(u++,n<0&&(n=-n),(r=s[0]-t)<0&&(r=-r),(n+=r)<a&&((r=s[2]-i)<0&&(r=-r),(n+=r)<a&&(a=n,h=s[3])))),p>=0&&((n=e-(s=T[p])[1])>=a?p=-1:(p--,n<0&&(n=-n),(r=s[0]-t)<0&&(r=-r),(n+=r)<a&&((r=s[2]-i)<0&&(r=-r),(n+=r)<a&&(a=n,h=s[3]))));return h}}})),e("/gif.worker.coffee")}).call(this,this);