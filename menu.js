function drawMenu(){sizeMenu(),ctx.fillStyle="#111",ctx.fillRect(0,0,$canv.width,$canv.height),drawMenuLogo(),drawMenuButton(),drawSoundControl()}function drawMenuLogo(){var t=GAME.MENU.title;ctx.drawImage(ASSETS[usingSmallLogo?"logoSmall":"logo"],t.x,t.y,t.width,t.height)}function fadeInMenu(){GAME.state="menu",GAME.MENU.opacity=0,requestAnimFrame(menuFade)}function menuFade(){GAME.MENU.opacity+=.02,drawMenu();var t=1-GAME.MENU.opacity;ctx.fillStyle="rgba(17,17,17,"+(t>0?t:0)+")",ctx.fillRect(0,0,$canv.width,$canv.height),GAME.MENU.opacity<1&&"menu"===GAME.state&&requestAnimFrame(menuFade)}function drawMenuButton(t){var i=GAME.MENU.button;ctx.lineWidth=4,ctx.strokeStyle="#444",roundRect(ctx,i.x,i.y,i.width,i.height,20),ctx.fillStyle=t?"#222":"#1a1a1a",ctx.fill(),ctx.stroke();var n=ASSETS.enter.width,e=ASSETS.enter.height,a=scaleSize(n,e,i.width-5,i.height-5);n*=a,e*=a;var l=i.x+i.width/2-n/2,h=i.y+i.height/2-e/2;ctx.drawImage(ASSETS.enter,l,h,n,e)}function sizeMenu(){var t={width:ASSETS[usingSmallLogo?"logoSmall":"logo"].width,height:ASSETS[usingSmallLogo?"logoSmall":"logo"].height,minPaddingX:50,minPaddingY:15,x:null,y:null},i={x:null,y:$canv.height/1.8,width:.5*$canv.width,height:$canv.height/6};i.x=$canv.width/2-i.width/2;var n=scaleSize(t.width,t.height,$canv.width-t.minPaddingX,$canv.height-i.y-2*t.minPaddingY);t.width*=n,t.height*=n,t.x=$canv.width/2-t.width/2,t.y=i.y-t.height-t.minPaddingY,GAME.MENU.title=t,GAME.MENU.button=i,t.width<=300&&!usingSmallLogo?(usingSmallLogo=!0,sizeMenu()):1===n&&usingSmallLogo&&(usingSmallLogo=!1,sizeMenu())}