<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Arcade Cache Cleaner</title><style>body{ font-family: Arial, sans-serif; padding: 10px; background-color: #d1cfcf;} .headline{ font-size: 3em; text-align: center; color: #080808; transition: transform 0.3s ease; animation: headerAnimation 5s infinite; margin-top: 0; margin-bottom: 0;} @keyframes headerAnimation{ 0%{ transform: scale(1);} 50%{ transform: scale(1.05);} 100%{ transform: scale(1);}} .headline:hover{ transform: scale(1.05);} .button-container{ text-align: center; margin-top: 20px;} #progress{ display: none; margin-top: 20px; font-weight: bold; color: #5c5b5b;} table{ width: 100%; border-collapse: collapse;} th, td{ border: 1px solid #a9a6a6; padding: 8px; text-align: left;} th{ background-color: #b19c9c;} tr:hover{ background-color: #f2f2f2;} .clear-button{ background-color: #786def; color: white; border: none; padding: 5px 10px; text-align: center; text-decoration: none; display: inline-block; margin: 0px 0px; cursor: pointer; transition: background-color 0.3s ease; border-radius: 8px;} .clear-button:hover{ background-color: #041bad;} #storageInfoRow td{ font-weight: bold;} #cacheTable{ border-collapse: separate; border-spacing: 0; border: 1px solid #a9a6a6; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);} #cacheTable th{ cursor: pointer; position: relative;} #cacheTable th.asc:after, #cacheTable th.desc:after{ content: ""; position: absolute; right: 10px; top: 50%; transform: translateY(-50%); width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent;} #cacheTable th.asc:after{ border-bottom: 10px solid black;} #cacheTable th.desc:after{ border-top: 10px solid black;} .popup{ display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; backdrop-filter: blur(5px); background-color: rgba(0, 0, 0, 0.5); transition: opacity 0.3s ease;} .popup-content{ position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(255, 255, 255, 0.8); padding: 20px; text-align: center; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5); transition: transform 0.3s ease, opacity 0.3s ease;} @keyframes popIn{ from{ transform: translate(-50%, -150%) scale(0.8); opacity: 0;} to{ transform: translate(-50%, -50%) scale(1); opacity: 1;}} @keyframes fadeIn{ from{ opacity: 0;} to{ opacity: 1;}} @keyframes popOut{ from{ transform: translate(-50%, -50%) scale(1); opacity: 1;} to{ transform: translate(-50%, 150%) scale(0.8); opacity: 0;}} @keyframes fadeOut{ from{ opacity: 1;} to{ opacity: 0;}} .popup-button{ cursor: pointer; background-color: transparent; border: none; font-size: 20px; padding: 10px 20px; margin: 0 10px; border-radius: 10px; transition: transform 0.2s ease-in-out;} .popup-button:hover{ transform: scale(1.2);} .popup-buttons{ margin-top: 20px;} </style></head><body><h1 class="headline">Arcade Cache Cleaner</h1><div id="popup" class="popup"><div class="popup-content"><h2 id="popup-title" style="color: blue"></h2><p id="popup-message" style="color: green"></p><div class="popup-buttons"><button id="yesButton" class="popup-button">Yes</button ><button id="noButton" class="popup-button">No</button></div></div></div><div class="button-container"><h1 style="text-align: center">Available Caches</h1><button onclick="listCachesAndButtons()">Refresh</button><div id="progress">Loading...</div></div><div id="cacheList"><input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Search for cache names..." /><table id="cacheTable"><thead><tr><th class="sortable" onclick="sortTable(0)">Cache Name</th><th class="sortable" onclick="sortTable(1)">Size</th><th>Action</th></tr></thead><tbody id="cacheTableBody"></tbody></table></div><script type="text/javascript">const cachecleaner="arcade_cache_cleaner"; let popupClosed=false; function startTypingAnimation(){ const title=document.getElementById("popup-title"); const message=document.getElementById("popup-message"); const titleText="!!!!READ CAREFULLY!!!!"; const messageText=[ "!!!Arcade Cache Cleaner Information!!!", "This is a tool for managing and cleaning up Web Arcade caches. This tool is designed to help you optimize your browsing experience by managing and clearing out unnecessary cache files that can slow down your device or consume unnecessary storage space.", "This is a tool can also be used when your PWA is behaving oddly or not caching files fully or after a certain time your are not seeing NO INTERNET toast.", "IF ANY OF THE ABOVE IS TRUE, THEN YOU CAN USE BELOW INFORMATION ", "!!How to Use the Arcade Cache Cleaner!!", "Refresh the Cache List: Click on the 'Refresh' button to update the list of available caches.", "Clearing Caches: For each cache in the list, you'll see an 'Clear' button. Click this button to clear the particular cache.", "Search for Specific Caches: Use the search bar to find specific caches by their names.", "Sort the Cache List: Click on the 'Cache Name' or 'Size' column headers to sort the list of caches alphabetically or by size, respectively.", "Storage Usage Information Requires Storage Permission.", "After clearing the cache always open Cache Cleaner or PWA or Website in a new tab.", "Do you want to see this announcement again?", ]; const typingSpeed=50; let currentIndex=0; function typeNextLine(){ if (currentIndex < messageText.length){ const line=document.createElement("div"); message.appendChild(line); const lineText=messageText[currentIndex]; let lineIndex=0; function typeNextCharacter(){ if (lineIndex < lineText.length){ line.textContent +=lineText.charAt(lineIndex); lineIndex++; setTimeout(typeNextCharacter, typingSpeed);} else{ currentIndex++; setTimeout(typeNextLine, typingSpeed);}} typeNextCharacter();}} typeText(title, titleText, 0, typingSpeed); setTimeout(typeNextLine, titleText.length * typingSpeed);} function typeText(element, text, index, speed){ if (index < text.length){ element.textContent +=text.charAt(index); index++; setTimeout(function (){ typeText(element, text, index, speed);}, speed);}} function closePopup(){ const popup=document.getElementById("popup"); const popupContent=document.querySelector(".popup-content"); popupContent.style.animation="popOut 0.5s ease forwards, fadeOut 0.5s ease forwards"; setTimeout(function (){ popup.style.display="none"; popupClosed=true;}, 500);} document .getElementById("yesButton") .addEventListener("click", function (){ localStorage.setItem(cachecleaner, "yes"); closePopup();}); document .getElementById("noButton") .addEventListener("click", function (){ localStorage.setItem(cachecleaner, "no"); closePopup();}); document .getElementById("popup") .addEventListener("click", function (event){ if (event.target===this){ closePopup();}}); function checkLocalStorage(){ const visited=localStorage.getItem(cachecleaner); if (visited !=="no"){ const popup=document.getElementById("popup"); const popupContent=document.querySelector(".popup-content"); popup.style.display="block"; popupContent.style.animation="popIn 0.5s ease forwards, fadeIn 0.5s ease forwards"; startTypingAnimation();}} window.addEventListener("load", function (){ checkLocalStorage();}); </script><script>let sortDirection=true; let sortColumnIndex=0; function sortTable(columnIndex){ if (sortColumnIndex===columnIndex){ sortDirection=!sortDirection;} else{ sortDirection=true;} sortColumnIndex=columnIndex; const headers=document.querySelectorAll("#cacheTable th.sortable"); headers.forEach((header)=>{ header.classList.remove("asc", "desc");}); headers[columnIndex].classList.add(sortDirection ? "asc" : "desc"); const rowsArray=Array.from( document.querySelectorAll("#cacheTable tbody tr") ).filter((row)=>row.id !=="storageInfoRow"); rowsArray.sort((a, b)=>{ const aColText=a.cells[columnIndex].textContent.trim(); const bColText=b.cells[columnIndex].textContent.trim(); if (columnIndex===1){ const aSize=parseFloat(aColText.split(" ")[0]); const bSize=parseFloat(bColText.split(" ")[0]); return sortDirection ? aSize - bSize : bSize - aSize;} return sortDirection ? aColText.localeCompare(bColText) : bColText.localeCompare(aColText);}); const tbody=document.querySelector("#cacheTable tbody"); while (tbody.firstChild.id !=="storageInfoRow"){ tbody.removeChild(tbody.firstChild);} rowsArray.forEach((row)=>tbody.appendChild(row));} function filterTable(){ const input=document.getElementById("searchInput"); const filter=input.value.toUpperCase(); const table=document.getElementById("cacheTable"); const rows=table.getElementsByTagName("tr"); for (let i=1; i < rows.length; i++){ const cacheName=rows[i].getElementsByTagName("td")[0].textContent || rows[i].getElementsByTagName("td")[0].innerText; if (cacheName.toUpperCase().indexOf(filter) >-1){ rows[i].style.display="";} else{ rows[i].style.display="none";}}} function formatBytes(bytes, decimals=2){ if (bytes===0) return "0 Bytes"; const k=1024; const dm=decimals < 0 ? 0 : decimals; const sizes=["Bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"]; const i=Math.floor(Math.log(bytes) / Math.log(k)); return ( parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + " " + sizes[i] );} async function listCachesAndButtons(){ try{ const cacheNames=await caches.keys(); const cacheTableBody=document.getElementById("cacheTableBody"); cacheTableBody.innerHTML=""; const sizePromises=cacheNames.map(async (cacheName)=>{ const cache=await caches.open(cacheName); const requests=await cache.keys(); const cacheSize=await Promise.all( requests.map(async (request)=>{ const response=await cache.match(request); const blob=await response.blob(); return blob.size;}) ); const cacheTotalSize=cacheSize.reduce((a, b)=>a + b, 0); return{ cacheName, cacheTotalSize};}); const cachesSizes=await Promise.all(sizePromises); const storageEstimate=await navigator.storage.estimate(); const usedStorage=storageEstimate.usage; const totalStorage=storageEstimate.quota; cachesSizes.forEach(({ cacheName, cacheTotalSize})=>{ const row=document.createElement("tr"); row.innerHTML=` <td>${cacheName}</td><td>${formatBytes( cacheTotalSize )}</td><td><button class="clear-button" onclick="clearCacheAndStopServiceWorker('${cacheName}')">Clear</button></td>`; cacheTableBody.appendChild(row);}); const storageInfoRow=document.createElement("tr"); storageInfoRow.id="storageInfoRow"; storageInfoRow.innerHTML=` <td colspan="3">Storage Usage: ${formatBytes( usedStorage )} / ${formatBytes(totalStorage)}</td>`; cacheTableBody.appendChild(storageInfoRow);} catch (error){ console.error("Error listing caches:", error);}} function stopServiceWorker(registration){ if (registration){ registration .unregister() .then(()=>{ console.log("Service worker unregistered.");}) .catch((error)=>{ console.error("Error unregistering service worker:", error);});} else{ console.log("No service worker found.");}} function showProgress(message){ document.getElementById("progress").textContent=message; document.getElementById("progress").style.display="block";} function hideProgress(){ document.getElementById("progress").style.display="none";} function clearCacheAndStopServiceWorker(cacheName){ if ( confirm(`Are you sure you want to clear the cache "${cacheName}"?`) ){ setTimeout(()=>{ showProgress("Clearing cache...");}, 100); navigator.serviceWorker .getRegistrations() .then((registrations)=>{ registrations.forEach((registration)=>{ if ( registration.active && registration.active.scriptURL.endsWith(cacheName + ".js") ){ stopServiceWorker(registration);}});}) .finally(()=>{ caches.delete(cacheName).then(()=>{ console.log(`${cacheName} cache deleted.`); setTimeout(()=>{ showProgress("Cache cleared successfully!");}, 1000); setTimeout(()=>{ hideProgress(); listCachesAndButtons();}, 3000);});}) .catch((error)=>{ console.error(`Error deleting ${cacheName} cache:`, error); setTimeout(()=>{ showProgress("An error occurred while clearing the cache.");}, 1000); setTimeout(()=>{ hideProgress();}, 3000);});}} listCachesAndButtons(); </script></body></html>
