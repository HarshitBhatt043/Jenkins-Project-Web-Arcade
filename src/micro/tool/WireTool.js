import{BaseToolConnector}from"./BaseToolConnector.js";import{Tile,ZoneUtils}from"../Tile.js";export class WireTool extends BaseToolConnector{constructor(e){super(),this.init(5,e,!0,!0)}layWire(e,i){this.doAutoBulldoze(e,i);let l=5,T=this._worldEffects.getTileValue(e,i);switch(T=ZoneUtils.normalizeRoad(T),T){case Tile.DIRT:this._worldEffects.setTile(e,i,Tile.LHPOWER,Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.RIVER:case Tile.REDGE:case Tile.CHANNEL:if(l=25,e<this._map.width-1&&(T=this._worldEffects.getTile(e+1,i),T.isConductive()&&(T=T.getValue(),T=ZoneUtils.normalizeRoad(T),T!=Tile.HROADPOWER&&T!=Tile.RAILHPOWERV&&T!=Tile.HPOWER))){this._worldEffects.setTile(e,i,Tile.VPOWER,Tile.CONDBIT|Tile.BULLBIT);break}if(e>0&&(T=this._worldEffects.getTile(e-1,i),T.isConductive()&&(T=T.getValue(),T=ZoneUtils.normalizeRoad(T),T!=Tile.HROADPOWER&&T!=Tile.RAILHPOWERV&&T!=Tile.HPOWER))){this._worldEffects.setTile(e,i,Tile.VPOWER,Tile.CONDBIT|Tile.BULLBIT);break}if(i<this._map.height-1&&(T=this._worldEffects.getTile(e,i+1),T.isConductive()&&(T=T.getValue(),T=ZoneUtils.normalizeRoad(T),T!=Tile.VROADPOWER&&T!=Tile.RAILVPOWERH&&T!=Tile.VPOWER))){this._worldEffects.setTile(e,i,Tile.HPOWER,Tile.CONDBIT|Tile.BULLBIT);break}if(i>0&&(T=this._worldEffects.getTile(e,i-1),T.isConductive()&&(T=T.getValue(),T=ZoneUtils.normalizeRoad(T),T!=Tile.VROADPOWER&&T!=Tile.RAILVPOWERH&&T!=Tile.VPOWER))){this._worldEffects.setTile(e,i,Tile.HPOWER,Tile.CONDBIT|Tile.BULLBIT);break}return this.TOOLRESULT_FAILED;case Tile.ROADS:this._worldEffects.setTile(e,i,Tile.HROADPOWER,Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.ROADS2:this._worldEffects.setTile(e,i,Tile.VROADPOWER,Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.LHRAIL:this._worldEffects.setTile(e,i,Tile.RAILHPOWERV,Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.LVRAIL:this._worldEffects.setTile(e,i,Tile.RAILVPOWERH,Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;default:return this.TOOLRESULT_FAILED}return this.addCost(l),this.checkZoneConnections(e,i),this.TOOLRESULT_OK}doTool(e,i,l){this.result=this.layWire(e,i)}}