import{BaseToolConnector}from"./BaseToolConnector.js";import{Tile,ZoneUtils}from"../Tile.js";export class RoadTool extends BaseToolConnector{constructor(e){super(),this.init(10,e,!0,!0)}layRoad(e,i){this.doAutoBulldoze(e,i);let l=this._worldEffects.getTileValue(e,i),T=this.toolCost;switch(l){case Tile.DIRT:this._worldEffects.setTile(e,i,Tile.ROADS,Tile.BULLBIT|Tile.BURNBIT);break;case Tile.RIVER:case Tile.REDGE:case Tile.CHANNEL:if(T=50,e<this._map.width-1&&(l=this._worldEffects.getTileValue(e+1,i),l=ZoneUtils.normalizeRoad(l),l===Tile.VRAILROAD||l===Tile.HBRIDGE||l>=Tile.ROADS&&l<=Tile.HROADPOWER)){this._worldEffects.setTile(e,i,Tile.HBRIDGE,Tile.BULLBIT);break}if(e>0&&(l=this._worldEffects.getTileValue(e-1,i),l=ZoneUtils.normalizeRoad(l),l===Tile.VRAILROAD||l===Tile.HBRIDGE||l>=Tile.ROADS&&l<=Tile.INTERSECTION)){this._worldEffects.setTile(e,i,Tile.HBRIDGE,Tile.BULLBIT);break}if(i<this._map.height-1&&(l=this._worldEffects.getTileValue(e,i+1),l=ZoneUtils.normalizeRoad(l),l===Tile.HRAILROAD||l===Tile.VROADPOWER||l>=Tile.VBRIDGE&&l<=Tile.INTERSECTION)){this._worldEffects.setTile(e,i,Tile.VBRIDGE,Tile.BULLBIT);break}if(i>0&&(l=this._worldEffects.getTileValue(e,i-1),l=ZoneUtils.normalizeRoad(l),l===Tile.HRAILROAD||l===Tile.VROADPOWER||l>=Tile.VBRIDGE&&l<=Tile.INTERSECTION)){this._worldEffects.setTile(e,i,Tile.VBRIDGE,Tile.BULLBIT);break}return this.TOOLRESULT_FAILED;case Tile.LHPOWER:this._worldEffects.setTile(e,i,Tile.VROADPOWER|Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.LVPOWER:this._worldEffects.setTile(e,i,Tile.HROADPOWER|Tile.CONDBIT|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.LHRAIL:this._worldEffects.setTile(e,i,Tile.HRAILROAD|Tile.BURNBIT|Tile.BULLBIT);break;case Tile.LVRAIL:this._worldEffects.setTile(e,i,Tile.VRAILROAD|Tile.BURNBIT|Tile.BULLBIT);break;default:return this.TOOLRESULT_FAILED}return this.addCost(T),this.checkZoneConnections(e,i),this.TOOLRESULT_OK}doTool=function(e,i,l){this.result=this.layRoad(e,i)}}