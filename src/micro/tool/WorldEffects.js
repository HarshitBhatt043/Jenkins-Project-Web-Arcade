import{Tiles}from"../Tile.js";export class WorldEffects{constructor(t){this._map=t,this._data={}}toKey(t,e){return[t,e].join(",")}fromKey(t){return{x:(t=t.split(","))[0]-0,y:t[1]-0}}clear(){this._data=[]}getTile(t,e){let i=this.toKey(t,e),s=this._data[i];return void 0===s&&(s=this._map.getTile(t,e)),s}getTileValue(t,e){return this.getTile(t,e).getValue()}setTile(t,e,i,s){if(void 0!==s&&i.isTile)throw new Error("Flags supplied with already defined tile");void 0!==s||i.isTile?void 0!==s&&(i=new Tiles(i,s)):i=new Tiles(i);let l=this.toKey(t,e);this._data[l]=i}apply(){let t=Object.keys(this._data);for(let e=0,i=t.length;e<i;e++){let i=this.fromKey(t[e]);this._map.setTo(i,this._data[t[e]])}}}