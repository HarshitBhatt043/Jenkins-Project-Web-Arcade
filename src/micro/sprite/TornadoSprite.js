import{BaseSprite}from"./BaseSprite.js";import{Micro}from"../Micro.js";import{Tile}from"../Tile.js";import{Messages}from"../Messages.js";import{SpriteUtils}from"./SpriteUtils.js";import{math}from"../math/math.js";export class TornadoSprite extends BaseSprite{constructor(t,i,s,e){super(),this.init(Micro.SPRITE_TORNADO,t,i,s,e),this.width=48,this.height=48,this.xOffset=-24,this.yOffset=-40,this.frame=1,this.count=200,this.xDelta=[2,3,2,0,-2,-3],this.yDelta=[-2,0,2,3,2,0]}move(t,i,s,e){let r;r=this.frame,2===r?r=this.flag?3:1:(this.flag=1===r?1:0,r=2),this.count>0&&this.count--,this.frame=r;let o=this.spriteManager.getSpriteList();for(let t=0;t<o.length;t++){let s=o[t];0===s.frame||s.type!==Micro.SPRITE_AIRPLANE&&s.type!==Micro.SPRITE_HELICOPTER&&s.type!==Micro.SPRITE_SHIP&&s.type!==Micro.SPRITE_TRAIN||!SpriteUtils.checkSpriteCollision(this,s)||s.explodeSprite(i)}r=Random.getRandom(5),this.x+=this.xDelta[r],this.y+=this.yDelta[r],this.spriteNotInBounds()&&(this.frame=0),0!==this.count&&0===Random.getRandom(500)&&(this.frame=0),SpriteUtils.destroyMapTile(this.spriteManager,this.map,e,this.x,this.y)}}