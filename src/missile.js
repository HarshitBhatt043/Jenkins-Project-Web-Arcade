MG.missile=function(){var t,n,e,a,i,r,o,u,s,c,f,M=.8*MG.TUNNEL_RADIUS,R="crashed",h="autopilot",A="manual";return{init:function(){this.reset()},reset:function(){t=h,n=200,e=0,a=400,i=0,r=0,o=0,u=0,s=0,c=0,f=1},update:function(G){switch(t){case h:(f-=G)<0&&(f=1.1+.9*Math.random(),s=(MG.TUNNEL_RADIUS*(Math.random()-.5)-o)/1.5,c=(MG.TUNNEL_RADIUS*(Math.random()-.5)-u)/1.5),i+=s*G,r+=c*G;break;case A:i+=(o-i)*G/.25,r+=(u-r)*G/.25;break;default:}var I=Math.sqrt(i*i+r*r),N=Math.min(M,I);i=0===I?0:i*N/I,r=0===I?0:r*N/I,e+=t===R?G*MG.BARRIER_SPACING*e/(n-MG.BARRIER_SPACING):G*(a-e)/1,n-=e*G},getPosition:function(){return{x:i,y:r}},getTarget:function(){return{x:o,y:u}},getOffset:function(){return n},getVelocity:function(){return e},isCrashed:function(){return t==R},setTarget:function(n,e){t===A&&(o=n,u=e)},setVelocity:function(t){a=t},setManual:function(){t=A},setAutopilot:function(){t=h},onBarrierPassed:function(){n+=MG.BARRIER_SPACING},onCrash:function(){e=-Math.abs(e),t=R}}}();