V3D.helicopter=function(t){this.base=t,this.mesh=new THREE.Object3D,this.parts=[],this.ToRad=Math.PI/180,this.gaz=.6,this.ge=0,this.hud=document.getElementById("hud").contentDocument,this.init()},V3D.helicopter.prototype={constructor:V3D.helicopter,init:function(){this.sound=new Audio("./sound/helico/8534.mp3");var t,i=(new THREE.Matrix4).makeScale(1,1,-1),s=this.base.meshs.elico;s.material=this.base.townMaterial,s.geometry.applyMatrix(i),s.position.set(0,-.12,0),this.mesh.add(s),this.mesh.position.set(0,1,0),this.parts[0]=s;for(var a=0;a<s.children.length;a++)(t=s.children[a]).material=this.base.townMaterial,t.geometry.applyMatrix(i),"elico2"==t.name&&(this.parts[1]=t,this.parts[4]=t.children[0],this.parts[5]=t.children[1],this.parts[4].material=this.base.townMaterial,this.parts[5].material=this.base.townMaterial,this.parts[4].geometry.applyMatrix(i),this.parts[5].geometry.applyMatrix(i)),"elico4"==t.name&&(t.position.z=-t.position.z,this.parts[2]=t),"elico3"==t.name&&(t.position.z=-t.position.z,this.parts[3]=t);this.base.scene.add(this.mesh)},move:function(t){switch(t){case 1:this.parts[1].rotation.x=-.08;break;case 2:this.parts[1].rotation.x=.08;break;case 3:this.parts[4].rotation.z=-3.44,this.parts[5].rotation.z=-.3;break;case 4:this.parts[4].rotation.z=-2.84,this.parts[5].rotation.z=.3;break}this.parts[1].rotation.y+=this.gaz,this.parts[2].rotation.x-=this.gaz,this.ge++,this.rotate("Symbole_2_0_Layer0_0_FILL",this.ge)},fly:function(){this.parts.length>2&&this.move(1)},rotate:function(t,i){var s=this.hud.getElementById(t);s&&s.setAttribute("transform","rotate("+i+")")}};