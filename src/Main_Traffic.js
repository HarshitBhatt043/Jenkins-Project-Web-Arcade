import*as THREE from"../build/three.module.js";import*as UIL from"../build/uil.module.js";import{OrbitControls}from"./jsm/controls/OrbitControls.js";import{TrafficBase}from"./TrafficBase.js";let camera,scene,renderer,controls,traffic;export class Main{static init(){renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,200),controls=new OrbitControls(camera,renderer.domElement),scene=new THREE.Scene;let e=new THREE.GridHelper(19,19,0,2105376);e.position.set(9,-.01,9),scene.add(e),camera.position.set(9,20,29),controls.target.set(9,0,9),controls.update(),window.addEventListener("resize",onWindowResize,!1);const i=new THREE.BoxGeometry(1,1,1),n=new THREE.MeshBasicMaterial({color:65280});let r=new THREE.Mesh(i,n);scene.add(r),traffic=new TrafficBase({callback:addGui}),scene.add(traffic),animate()}}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(e){requestAnimationFrame(animate),renderer.render(scene,camera)}function addGui(){let e=new UIL.Gui({w:300,h:26,close:!0});e.add(traffic.sets,"timeFactor",{min:.1,max:10,precision:2}).listen(),e.add(traffic.world,"carsNumber",{min:0,max:500,precision:0}).listen(),e.add(traffic.world,"instantSpeed",{min:0,max:1,precision:2,lock:!0}).listen(),e.add(traffic.sets,"lightsFlip",{min:0,max:200,precision:0}).listen()}